{"text": "2024-03-09 00:07:03.242 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.\n", "record": {"elapsed": {"repr": "0:01:28.477775", "seconds": 88.477775}, "exception": null, "extra": {}, "file": {"name": "httptools_impl.py", "path": "E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\uvicorn\\protocols\\http\\httptools_impl.py"}, "function": "data_received", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 180, "message": "Invalid HTTP request received.", "module": "httptools_impl", "name": "uvicorn.protocols.http.httptools_impl", "process": {"id": 7676, "name": "SpawnProcess-7"}, "thread": {"id": 14284, "name": "MainThread"}, "time": {"repr": "2024-03-09 00:07:03.242775+08:00", "timestamp": 1709914023.242775}}}
{"text": "2024-03-09 00:07:03.243 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.\n", "record": {"elapsed": {"repr": "0:01:28.478775", "seconds": 88.478775}, "exception": null, "extra": {}, "file": {"name": "httptools_impl.py", "path": "E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\uvicorn\\protocols\\http\\httptools_impl.py"}, "function": "data_received", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 180, "message": "Invalid HTTP request received.", "module": "httptools_impl", "name": "uvicorn.protocols.http.httptools_impl", "process": {"id": 7676, "name": "SpawnProcess-7"}, "thread": {"id": 14284, "name": "MainThread"}, "time": {"repr": "2024-03-09 00:07:03.243775+08:00", "timestamp": 1709914023.243775}}}
{"text": "2024-03-09 00:07:03.244 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.\n", "record": {"elapsed": {"repr": "0:01:28.479774", "seconds": 88.479774}, "exception": null, "extra": {}, "file": {"name": "httptools_impl.py", "path": "E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\uvicorn\\protocols\\http\\httptools_impl.py"}, "function": "data_received", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 180, "message": "Invalid HTTP request received.", "module": "httptools_impl", "name": "uvicorn.protocols.http.httptools_impl", "process": {"id": 7676, "name": "SpawnProcess-7"}, "thread": {"id": 14284, "name": "MainThread"}, "time": {"repr": "2024-03-09 00:07:03.244774+08:00", "timestamp": 1709914023.244774}}}
{"text": "2024-03-09 00:07:03.245 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.\n", "record": {"elapsed": {"repr": "0:01:28.480801", "seconds": 88.480801}, "exception": null, "extra": {}, "file": {"name": "httptools_impl.py", "path": "E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\uvicorn\\protocols\\http\\httptools_impl.py"}, "function": "data_received", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 180, "message": "Invalid HTTP request received.", "module": "httptools_impl", "name": "uvicorn.protocols.http.httptools_impl", "process": {"id": 7676, "name": "SpawnProcess-7"}, "thread": {"id": 14284, "name": "MainThread"}, "time": {"repr": "2024-03-09 00:07:03.245801+08:00", "timestamp": 1709914023.245801}}}
{"text": "2024-03-09 00:11:23.026 | ERROR    | uvicorn.lifespan.on:send:134 - Traceback (most recent call last):\n  File \"E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\starlette\\routing.py\", line 743, in lifespan\n    await receive()\n  File \"E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\uvicorn\\lifespan\\on.py\", line 137, in receive\n    return await self.receive_queue.get()\n  File \"C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\queues.py\", line 163, in get\n    await getter\nasyncio.exceptions.CancelledError\n\n", "record": {"elapsed": {"repr": "0:00:07.989983", "seconds": 7.989983}, "exception": null, "extra": {}, "file": {"name": "on.py", "path": "E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\uvicorn\\lifespan\\on.py"}, "function": "send", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 134, "message": "Traceback (most recent call last):\n  File \"E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\starlette\\routing.py\", line 743, in lifespan\n    await receive()\n  File \"E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\uvicorn\\lifespan\\on.py\", line 137, in receive\n    return await self.receive_queue.get()\n  File \"C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\queues.py\", line 163, in get\n    await getter\nasyncio.exceptions.CancelledError\n", "module": "on", "name": "uvicorn.lifespan.on", "process": {"id": 11364, "name": "SpawnProcess-12"}, "thread": {"id": 12160, "name": "MainThread"}, "time": {"repr": "2024-03-09 00:11:23.026093+08:00", "timestamp": 1709914283.026093}}}
2024-03-09 00:29:08.064 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 376
               │     └ 3
               └ <function _main at 0x000001B66D4F74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 376
           │    └ <function BaseProcess._bootstrap at 0x000001B66D4035E0>
           └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B66D402C10>
    └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B66F438820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>
    │    └ <function subprocess_started at 0x000001B66F422EE0>
    └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B66D50DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001B66F4220D0>
           │       │   └ <uvicorn.server.Server object at 0x000001B66D50DEE0>
           │       └ <function run at 0x000001B66F0BC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B6705B7340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B66F0BD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B66F0BD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B66F0C04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B66F02C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001B67003EFA0>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001B67003EFA0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001B67003EFA0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001B67003EFA0>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B66FCA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B670...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B66FD52FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B66FCA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B670...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B670...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B672BC4A90>
          └ <fastapi.applications.FastAPI object at 0x000001B66FD52FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B66FC92160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B672BC4A30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B672BC4A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B66FC92160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B672BC4A60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B672BC4A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B66FC92160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001B67003E8E0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001B670447B80>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B672BC4A60>
          └ <function wrap_app_handling_exceptions at 0x000001B6701D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0F70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001B670447B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0F70>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001B670447B80>>
          └ <fastapi.routing.APIRouter object at 0x000001B670447B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0F70>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001B6701C6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001B66FF60A60>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0F70>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001B67003E7F0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001B672BC0EE0>
          └ <function wrap_app_handling_exceptions at 0x000001B6701D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001B672BC0EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B67003E7F0>
                     └ <function get_request_handler.<locals>.app at 0x000001B672B7EF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001B67011E550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001B672BAB6A0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info['id'])
                 │        │          └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...
                 │        └ <staticmethod object at 0x000001B672B02C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

KeyError: 'id'
2024-03-09 00:29:08.108 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 376
               │     └ 3
               └ <function _main at 0x000001B66D4F74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 376
           │    └ <function BaseProcess._bootstrap at 0x000001B66D4035E0>
           └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B66D402C10>
    └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B66F438820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>
    │    └ <function subprocess_started at 0x000001B66F422EE0>
    └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B66D50DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001B66F4220D0>
           │       │   └ <uvicorn.server.Server object at 0x000001B66D50DEE0>
           │       └ <function run at 0x000001B66F0BC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B6705B7340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B66F0BD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B66F0BD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B66F0C04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B66F02C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001B67003EFA0>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001B67003EFA0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001B67003EFA0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001B67003EFA0>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B66FCA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B670...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B66FD52FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B66FCA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B670...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B670...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B672BC4A90>
          └ <fastapi.applications.FastAPI object at 0x000001B66FD52FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B66FC92160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B672BC4A30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B672BC4A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B66FC92160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B672BC4A60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B672BC4A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B66FC92160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001B67003E8E0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001B670447B80>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B672BC4A60>
          └ <function wrap_app_handling_exceptions at 0x000001B6701D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0F70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001B670447B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0F70>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001B670447B80>>
          └ <fastapi.routing.APIRouter object at 0x000001B670447B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0F70>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001B6701C6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001B66FF60A60>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0F70>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001B67003E7F0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001B672BC0EE0>
          └ <function wrap_app_handling_exceptions at 0x000001B6701D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672BC0C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001B672BC0EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B67003E7F0>
                     └ <function get_request_handler.<locals>.app at 0x000001B672B7EF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001B67011E550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001B672BAB6A0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info['id'])
                 │        │          └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...
                 │        └ <staticmethod object at 0x000001B672B02C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

KeyError: 'id'
2024-03-09 00:29:09.881 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 376
               │     └ 3
               └ <function _main at 0x000001B66D4F74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 376
           │    └ <function BaseProcess._bootstrap at 0x000001B66D4035E0>
           └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B66D402C10>
    └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B66F438820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>
    │    └ <function subprocess_started at 0x000001B66F422EE0>
    └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B66D50DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001B66F4220D0>
           │       │   └ <uvicorn.server.Server object at 0x000001B66D50DEE0>
           │       └ <function run at 0x000001B66F0BC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B6705B7340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B66F0BD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B66F0BD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B66F0C04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B66F02C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001B672C198B0>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001B672C198B0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001B672C198B0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001B672C198B0>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B66FCA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B672...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B66FD52FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B66FCA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B672...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B672...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B672BC4A90>
          └ <fastapi.applications.FastAPI object at 0x000001B66FD52FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B6700ED310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B672BC4A30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B672BC4A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B6700ED310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B672BC4A60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B672BC4A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B6700ED310>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001B672C19910>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001B670447B80>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B672BC4A60>
          └ <function wrap_app_handling_exceptions at 0x000001B6701D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001B670447B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001B670447B80>>
          └ <fastapi.routing.APIRouter object at 0x000001B670447B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001B6701C6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001B66FF60A60>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001B672C19A90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001B672D81AF0>
          └ <function wrap_app_handling_exceptions at 0x000001B6701D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001B672D81AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B672C19A90>
                     └ <function get_request_handler.<locals>.app at 0x000001B672B7EF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001B67011E550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001B672BAB6A0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info['id'])
                 │        │          └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...
                 │        └ <staticmethod object at 0x000001B672B02C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

KeyError: 'id'
2024-03-09 00:29:09.898 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 376
               │     └ 3
               └ <function _main at 0x000001B66D4F74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 376
           │    └ <function BaseProcess._bootstrap at 0x000001B66D4035E0>
           └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B66D402C10>
    └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B66F438820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>
    │    └ <function subprocess_started at 0x000001B66F422EE0>
    └ <SpawnProcess name='SpawnProcess-17' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B66D50DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001B66F4220D0>
           │       │   └ <uvicorn.server.Server object at 0x000001B66D50DEE0>
           │       └ <function run at 0x000001B66F0BC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B6705B7340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B66F0BD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B66F0BD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B66F0C04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B66F02C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001B672C198B0>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001B672C198B0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001B672C198B0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001B672C198B0>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B66FCA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B672...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B66FD52FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B66FCA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B672...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B672...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B672BC4A90>
          └ <fastapi.applications.FastAPI object at 0x000001B66FD52FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B6700ED310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B672BC4A30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B672BC4A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B6700ED310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B672BC4A60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B672BC4A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B6700ED310>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001B672C19910>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001B670447B80>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B672BC4A60>
          └ <function wrap_app_handling_exceptions at 0x000001B6701D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001B670447B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001B670447B80>>
          └ <fastapi.routing.APIRouter object at 0x000001B670447B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001B6701C6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001B66FF60A60>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001B672C19A90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001B672D81AF0>
          └ <function wrap_app_handling_exceptions at 0x000001B6701D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B672D81C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001B672D81AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B672C19A90>
                     └ <function get_request_handler.<locals>.app at 0x000001B672B7EF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001B67011E550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001B672BAB6A0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info['id'])
                 │        │          └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...
                 │        └ <staticmethod object at 0x000001B672B02C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

KeyError: 'id'
2024-03-09 00:31:00.440 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x000002189CEE74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x000002189CDF35E0>
           └ <SpawnProcess name='SpawnProcess-18' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002189CDF2C10>
    └ <SpawnProcess name='SpawnProcess-18' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002189EE08820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17008 started>
    │    └ <function subprocess_started at 0x000002189EDF2EE0>
    └ <SpawnProcess name='SpawnProcess-18' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=472, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002189CEFDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=472, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002189EDF20D0>
           │       │   └ <uvicorn.server.Server object at 0x000002189CEFDEE0>
           │       └ <function run at 0x000002189EA8C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002189FFCB340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002189EA8D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002189EA8D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002189EA904C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002189E9FC0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000002189FAD7580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000002189FAD7580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000002189FAD7580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000002189FAD7580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002189F675250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002189F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002189F721FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002189F675250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002189F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002189F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000218A25948B0>
          └ <fastapi.applications.FastAPI object at 0x000002189F721FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002189F661160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000218A25947C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000218A25948B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002189F661160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000218A2594850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000218A25947C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002189F661160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002189FAD76D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002189FE17F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000218A2594850>
          └ <function wrap_app_handling_exceptions at 0x000002189FBB8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002189FE17F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002189FE17F10>>
          └ <fastapi.routing.APIRouter object at 0x000002189FE17F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002189FB76040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002189F960EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002189FAD7940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000218A2590C10>
          └ <function wrap_app_handling_exceptions at 0x000002189FBB8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000218A2590C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002189FAD7940>
                     └ <function get_request_handler.<locals>.app at 0x000002189F960C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000002189FAF5550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x00000218A2584520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info.id)
                 │        │          └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...
                 │        └ <staticmethod object at 0x00000218A24D3C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-09 00:31:00.473 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x000002189CEE74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x000002189CDF35E0>
           └ <SpawnProcess name='SpawnProcess-18' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002189CDF2C10>
    └ <SpawnProcess name='SpawnProcess-18' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002189EE08820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17008 started>
    │    └ <function subprocess_started at 0x000002189EDF2EE0>
    └ <SpawnProcess name='SpawnProcess-18' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=472, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002189CEFDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=472, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002189EDF20D0>
           │       │   └ <uvicorn.server.Server object at 0x000002189CEFDEE0>
           │       └ <function run at 0x000002189EA8C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002189FFCB340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002189EA8D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002189EA8D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002189EA904C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002189E9FC0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000002189FAD7580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000002189FAD7580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000002189FAD7580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000002189FAD7580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002189F675250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002189F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002189F721FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002189F675250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002189F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002189F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000218A25948B0>
          └ <fastapi.applications.FastAPI object at 0x000002189F721FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002189F661160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000218A25947C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000218A25948B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002189F661160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000218A2594850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000218A25947C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002189F661160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002189FAD76D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002189FE17F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000218A2594850>
          └ <function wrap_app_handling_exceptions at 0x000002189FBB8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002189FE17F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002189FE17F10>>
          └ <fastapi.routing.APIRouter object at 0x000002189FE17F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002189FB76040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002189F960EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002189FAD7940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000218A2590C10>
          └ <function wrap_app_handling_exceptions at 0x000002189FBB8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000218A2590940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000218A2590C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002189FAD7940>
                     └ <function get_request_handler.<locals>.app at 0x000002189F960C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000002189FAF5550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x00000218A2584520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info.id)
                 │        │          └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...
                 │        └ <staticmethod object at 0x00000218A24D3C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-09 00:31:34.016 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x0000024547EF74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x0000024547DF35E0>
           └ <SpawnProcess name='SpawnProcess-19' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000024547DF2C10>
    └ <SpawnProcess name='SpawnProcess-19' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024549E38820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-19' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-19' parent=17008 started>
    │    └ <function subprocess_started at 0x0000024549E22EE0>
    └ <SpawnProcess name='SpawnProcess-19' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000024547F0DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000024549E220D0>
           │       │   └ <uvicorn.server.Server object at 0x0000024547F0DEE0>
           │       └ <function run at 0x0000024549ABB160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002454AFFB340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000024549ABC9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000024549ABC940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000024549ABF4C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000024549A2C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000002454AB09580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000002454AB09580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000002454AB09580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000002454AB09580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002454A6A5250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002454A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002454A751FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002454A6A5250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002454A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002454A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002454AA3B880>
          └ <fastapi.applications.FastAPI object at 0x000002454A751FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002454A691160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002454AA3B820>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002454AA3B880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002454A691160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002454AA3B850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002454AA3B820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002454A691160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002454AB096D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002454AE47F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002454AA3B850>
          └ <function wrap_app_handling_exceptions at 0x000002454ABD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002454AE47F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002454AE47F10>>
          └ <fastapi.routing.APIRouter object at 0x000002454AE47F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002454ACB2040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002454A990EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002454AB09940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002454AA49C10>
          └ <function wrap_app_handling_exceptions at 0x000002454ABD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002454AA49C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002454AB09940>
                     └ <function get_request_handler.<locals>.app at 0x000002454A990C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000002454AB26550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000002454D5B5520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info.id)
                 │        │          └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...
                 │        └ <staticmethod object at 0x000002454D503C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-09 00:31:34.052 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x0000024547EF74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x0000024547DF35E0>
           └ <SpawnProcess name='SpawnProcess-19' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000024547DF2C10>
    └ <SpawnProcess name='SpawnProcess-19' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024549E38820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-19' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-19' parent=17008 started>
    │    └ <function subprocess_started at 0x0000024549E22EE0>
    └ <SpawnProcess name='SpawnProcess-19' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000024547F0DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000024549E220D0>
           │       │   └ <uvicorn.server.Server object at 0x0000024547F0DEE0>
           │       └ <function run at 0x0000024549ABB160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002454AFFB340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000024549ABC9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000024549ABC940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000024549ABF4C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000024549A2C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000002454AB09580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000002454AB09580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000002454AB09580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000002454AB09580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002454A6A5250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002454A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002454A751FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002454A6A5250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002454A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002454A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002454AA3B880>
          └ <fastapi.applications.FastAPI object at 0x000002454A751FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002454A691160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002454AA3B820>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002454AA3B880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002454A691160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002454AA3B850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002454AA3B820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002454A691160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002454AB096D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002454AE47F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002454AA3B850>
          └ <function wrap_app_handling_exceptions at 0x000002454ABD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002454AE47F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002454AE47F10>>
          └ <fastapi.routing.APIRouter object at 0x000002454AE47F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002454ACB2040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002454A990EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002454AB09940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002454AA49C10>
          └ <function wrap_app_handling_exceptions at 0x000002454ABD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002454AA49940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002454AA49C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002454AB09940>
                     └ <function get_request_handler.<locals>.app at 0x000002454A990C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000002454AB26550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000002454D5B5520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info.id)
                 │        │          └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...
                 │        └ <staticmethod object at 0x000002454D503C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-09 00:32:32.674 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 400
               │     └ 3
               └ <function _main at 0x000001F883B074C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 400
           │    └ <function BaseProcess._bootstrap at 0x000001F8839F35E0>
           └ <SpawnProcess name='SpawnProcess-20' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F8839F2C10>
    └ <SpawnProcess name='SpawnProcess-20' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F885A48820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-20' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-20' parent=17008 started>
    │    └ <function subprocess_started at 0x000001F885A32EE0>
    └ <SpawnProcess name='SpawnProcess-20' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=496, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F883B1DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=496, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001F885A320D0>
           │       │   └ <uvicorn.server.Server object at 0x000001F883B1DEE0>
           │       └ <function run at 0x000001F8856CC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F886BC7340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F8856CD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F8856CD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F8856D04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F88563C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001F886717580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001F886717580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001F886717580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001F886717580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F8862B7250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F886...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F886362FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F8862B7250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F886...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F886...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F8866548B0>
          └ <fastapi.applications.FastAPI object at 0x000001F886362FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F8862A2160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F8866547C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F8866548B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F8862A2160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F886654850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F8866547C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F8862A2160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001F8867176D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001F886A57F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F886654850>
          └ <function wrap_app_handling_exceptions at 0x000001F8867F8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001F886A57F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001F886A57F10>>
          └ <fastapi.routing.APIRouter object at 0x000001F886A57F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001F8867B6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001F8865A3EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001F886717940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001F886652C10>
          └ <function wrap_app_handling_exceptions at 0x000001F8867F8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001F886652C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F886717940>
                     └ <function get_request_handler.<locals>.app at 0x000001F8865A3C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001F886735550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001F8891C4520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token).data
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTUzMzQsImV...
                └ <function jwt_decode at 0x000001F88917E940>

AttributeError: 'dict' object has no attribute 'data'
2024-03-09 00:32:32.712 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 400
               │     └ 3
               └ <function _main at 0x000001F883B074C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 400
           │    └ <function BaseProcess._bootstrap at 0x000001F8839F35E0>
           └ <SpawnProcess name='SpawnProcess-20' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F8839F2C10>
    └ <SpawnProcess name='SpawnProcess-20' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F885A48820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-20' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-20' parent=17008 started>
    │    └ <function subprocess_started at 0x000001F885A32EE0>
    └ <SpawnProcess name='SpawnProcess-20' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=496, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F883B1DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=496, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001F885A320D0>
           │       │   └ <uvicorn.server.Server object at 0x000001F883B1DEE0>
           │       └ <function run at 0x000001F8856CC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F886BC7340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F8856CD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F8856CD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F8856D04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F88563C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001F886717580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001F886717580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001F886717580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001F886717580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F8862B7250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F886...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F886362FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F8862B7250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F886...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F886...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F8866548B0>
          └ <fastapi.applications.FastAPI object at 0x000001F886362FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F8862A2160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F8866547C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F8866548B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F8862A2160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F886654850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F8866547C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F8862A2160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001F8867176D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001F886A57F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F886654850>
          └ <function wrap_app_handling_exceptions at 0x000001F8867F8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001F886A57F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001F886A57F10>>
          └ <fastapi.routing.APIRouter object at 0x000001F886A57F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001F8867B6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001F8865A3EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001F886717940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001F886652C10>
          └ <function wrap_app_handling_exceptions at 0x000001F8867F8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F886652940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001F886652C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F886717940>
                     └ <function get_request_handler.<locals>.app at 0x000001F8865A3C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001F886735550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001F8891C4520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token).data
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTUzMzQsImV...
                └ <function jwt_decode at 0x000001F88917E940>

AttributeError: 'dict' object has no attribute 'data'
2024-03-09 00:33:48.400 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 400
               │     └ 3
               └ <function _main at 0x000001F2482C74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 400
           │    └ <function BaseProcess._bootstrap at 0x000001F2481B35E0>
           └ <SpawnProcess name='SpawnProcess-21' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F2481B2C10>
    └ <SpawnProcess name='SpawnProcess-21' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F24A608820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-21' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-21' parent=17008 started>
    │    └ <function subprocess_started at 0x000001F24A5F2EE0>
    └ <SpawnProcess name='SpawnProcess-21' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F2482DDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001F24A5F20D0>
           │       │   └ <uvicorn.server.Server object at 0x000001F2482DDEE0>
           │       └ <function run at 0x000001F249E8C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F24B389340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F249E8D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F249E8D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F249E904C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F249DFC0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001F24AED9580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001F24AED9580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001F24AED9580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001F24AED9580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F24AA76250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F24A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F24AB22FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F24AA76250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F24A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F24A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F24D9958B0>
          └ <fastapi.applications.FastAPI object at 0x000001F24AB22FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F24AA62160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F24D9957C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F24D9958B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F24AA62160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F24D995850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F24D9957C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F24AA62160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001F24AED96D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001F24B217F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F24D995850>
          └ <function wrap_app_handling_exceptions at 0x000001F24AFA3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001F24B217F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001F24B217F10>>
          └ <fastapi.routing.APIRouter object at 0x000001F24B217F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001F24AF96040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001F24AD63EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001F24AED9940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001F24D991C10>
          └ <function wrap_app_handling_exceptions at 0x000001F24AFA3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001F24D991C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F24AED9940>
                     └ <function get_request_handler.<locals>.app at 0x000001F24AD63C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001F24AEEE550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001F24D984520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 57, in __call__
    if user_info.data.get("role", 0) < self.role:
       │                               │    └ 0
       │                               └ <app.apis.Permission object at 0x000001F24D984520>
       └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...

AttributeError: 'dict' object has no attribute 'data'
2024-03-09 00:33:48.430 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 400
               │     └ 3
               └ <function _main at 0x000001F2482C74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 400
           │    └ <function BaseProcess._bootstrap at 0x000001F2481B35E0>
           └ <SpawnProcess name='SpawnProcess-21' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F2481B2C10>
    └ <SpawnProcess name='SpawnProcess-21' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F24A608820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-21' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-21' parent=17008 started>
    │    └ <function subprocess_started at 0x000001F24A5F2EE0>
    └ <SpawnProcess name='SpawnProcess-21' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F2482DDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001F24A5F20D0>
           │       │   └ <uvicorn.server.Server object at 0x000001F2482DDEE0>
           │       └ <function run at 0x000001F249E8C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F24B389340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F249E8D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F249E8D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F249E904C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F249DFC0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001F24AED9580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001F24AED9580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001F24AED9580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001F24AED9580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F24AA76250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F24A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F24AB22FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F24AA76250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F24A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F24A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F24D9958B0>
          └ <fastapi.applications.FastAPI object at 0x000001F24AB22FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F24AA62160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F24D9957C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F24D9958B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F24AA62160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F24D995850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F24D9957C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F24AA62160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001F24AED96D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001F24B217F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F24D995850>
          └ <function wrap_app_handling_exceptions at 0x000001F24AFA3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001F24B217F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001F24B217F10>>
          └ <fastapi.routing.APIRouter object at 0x000001F24B217F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001F24AF96040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001F24AD63EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001F24AED9940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001F24D991C10>
          └ <function wrap_app_handling_exceptions at 0x000001F24AFA3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F24D991940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001F24D991C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F24AED9940>
                     └ <function get_request_handler.<locals>.app at 0x000001F24AD63C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001F24AEEE550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001F24D984520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 57, in __call__
    if user_info.data.get("role", 0) < self.role:
       │                               │    └ 0
       │                               └ <app.apis.Permission object at 0x000001F24D984520>
       └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...

AttributeError: 'dict' object has no attribute 'data'
2024-03-09 00:34:28.749 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 408
               │     └ 3
               └ <function _main at 0x000001AF0A3074C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 408
           │    └ <function BaseProcess._bootstrap at 0x000001AF0A2135E0>
           └ <SpawnProcess name='SpawnProcess-22' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001AF0A212C10>
    └ <SpawnProcess name='SpawnProcess-22' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001AF0C248820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-22' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-22' parent=17008 started>
    │    └ <function subprocess_started at 0x000001AF0C232EE0>
    └ <SpawnProcess name='SpawnProcess-22' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=836, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001AF0A31DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=836, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001AF0C2320D0>
           │       │   └ <uvicorn.server.Server object at 0x000001AF0A31DEE0>
           │       └ <function run at 0x000001AF0BECB160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001AF0D40B340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001AF0BECC9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001AF0BECC940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001AF0BECF4C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001AF0BE3C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001AF0CF19580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001AF0CF19580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001AF0CF19580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001AF0CF19580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001AF0CAB5250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001AF0C...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001AF0CB61FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001AF0CAB5250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001AF0C...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001AF0C...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001AF0CE508B0>
          └ <fastapi.applications.FastAPI object at 0x000001AF0CB61FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001AF0CAA1160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001AF0CE507C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001AF0CE508B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001AF0CAA1160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001AF0CE50850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001AF0CE507C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001AF0CAA1160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001AF0CF196D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001AF0D257F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001AF0CE50850>
          └ <function wrap_app_handling_exceptions at 0x000001AF0CFF8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001AF0D257F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001AF0D257F10>>
          └ <fastapi.routing.APIRouter object at 0x000001AF0D257F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001AF0CFB6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001AF0CDA2EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001AF0CF19940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001AF0CE59C10>
          └ <function wrap_app_handling_exceptions at 0x000001AF0CFF8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001AF0CE59C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001AF0CF19940>
                     └ <function get_request_handler.<locals>.app at 0x000001AF0CDA2C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001AF0CF27550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001AF0F9C4520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 57, in __call__
    if user_info.data.get("role", 0) < self.role:
       │                               │    └ 0
       │                               └ <app.apis.Permission object at 0x000001AF0F9C4520>
       └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...

AttributeError: 'dict' object has no attribute 'data'
2024-03-09 00:34:28.772 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 408
               │     └ 3
               └ <function _main at 0x000001AF0A3074C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 408
           │    └ <function BaseProcess._bootstrap at 0x000001AF0A2135E0>
           └ <SpawnProcess name='SpawnProcess-22' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001AF0A212C10>
    └ <SpawnProcess name='SpawnProcess-22' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001AF0C248820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-22' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-22' parent=17008 started>
    │    └ <function subprocess_started at 0x000001AF0C232EE0>
    └ <SpawnProcess name='SpawnProcess-22' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=836, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001AF0A31DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=836, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001AF0C2320D0>
           │       │   └ <uvicorn.server.Server object at 0x000001AF0A31DEE0>
           │       └ <function run at 0x000001AF0BECB160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001AF0D40B340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001AF0BECC9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001AF0BECC940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001AF0BECF4C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001AF0BE3C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001AF0CF19580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001AF0CF19580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001AF0CF19580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001AF0CF19580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001AF0CAB5250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001AF0C...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001AF0CB61FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001AF0CAB5250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001AF0C...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001AF0C...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001AF0CE508B0>
          └ <fastapi.applications.FastAPI object at 0x000001AF0CB61FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001AF0CAA1160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001AF0CE507C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001AF0CE508B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001AF0CAA1160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001AF0CE50850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001AF0CE507C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001AF0CAA1160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001AF0CF196D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001AF0D257F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001AF0CE50850>
          └ <function wrap_app_handling_exceptions at 0x000001AF0CFF8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001AF0D257F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001AF0D257F10>>
          └ <fastapi.routing.APIRouter object at 0x000001AF0D257F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001AF0CFB6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001AF0CDA2EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001AF0CF19940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001AF0CE59C10>
          └ <function wrap_app_handling_exceptions at 0x000001AF0CFF8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001AF0CE59940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001AF0CE59C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001AF0CF19940>
                     └ <function get_request_handler.<locals>.app at 0x000001AF0CDA2C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001AF0CF27550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMjgwNzEyODIiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001AF0F9C4520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 57, in __call__
    if user_info.data.get("role", 0) < self.role:
       │                               │    └ 0
       │                               └ <app.apis.Permission object at 0x000001AF0F9C4520>
       └ {'jti': '202403090028071282', 'iss': 'wieszheng', 'iat': 1709915334, 'exp': 1709917134, 'data': {'id': 'd5a8fa2f-5450-42a5-80...

AttributeError: 'dict' object has no attribute 'data'
2024-03-09 00:38:16.393 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 172
               │     └ 3
               └ <function _main at 0x000002B1AE8F74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 172
           │    └ <function BaseProcess._bootstrap at 0x000002B1AE7D35E0>
           └ <SpawnProcess name='SpawnProcess-23' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002B1AE7D2C10>
    └ <SpawnProcess name='SpawnProcess-23' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002B1B0838820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17008 started>
    │    └ <function subprocess_started at 0x000002B1B0823EE0>
    └ <SpawnProcess name='SpawnProcess-23' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=828, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002B1AE90DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=828, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002B1B08230D0>
           │       │   └ <uvicorn.server.Server object at 0x000002B1AE90DEE0>
           │       └ <function run at 0x000002B1B04BC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002B1B19B9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002B1B04BD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002B1B04BD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002B1B04C04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002B1B042C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000002B1B1431790>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000002B1B1431790>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000002B1B1431790>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000002B1B1431790>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B1B10A6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B1B1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002B1B1152FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B1B10A6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B1B1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B1B1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B1B3FD7AC0>
          └ <fastapi.applications.FastAPI object at 0x000002B1B1152FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B1B1092160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B1B3FD7A60>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B1B3FD7AC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B1B1092160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B1B3FD78B0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B1B3FD7A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B1B1092160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002B1B14318E0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002B1B1847B80>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B1B3FD78B0>
          └ <function wrap_app_handling_exceptions at 0x000002B1B15D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3F70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002B1B1847B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3F70>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002B1B1847B80>>
          └ <fastapi.routing.APIRouter object at 0x000002B1B1847B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3F70>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002B1B15C6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002B1B1360A60>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3F70>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002B1B1431B50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002B1B3FD3EE0>
          └ <function wrap_app_handling_exceptions at 0x000002B1B15D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002B1B3FD3EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002B1B1431B50>
                     └ <function get_request_handler.<locals>.app at 0x000002B1B3F8EF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000002B1B151E550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMzg3NzIyMDUiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000002B1B3FBB6A0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 57, in __call__
    if user_info.data.get("role", 0) < self.role:
       │                               │    └ 0
       │                               └ <app.apis.Permission object at 0x000002B1B3FBB6A0>
       └ {'jti': '202403090038772205', 'iss': 'wieszheng', 'iat': 1709915882, 'exp': 1709917682, 'data': {'id': 'd5a8fa2f-5450-42a5-80...

AttributeError: 'dict' object has no attribute 'data'
2024-03-09 00:38:16.435 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 172
               │     └ 3
               └ <function _main at 0x000002B1AE8F74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 172
           │    └ <function BaseProcess._bootstrap at 0x000002B1AE7D35E0>
           └ <SpawnProcess name='SpawnProcess-23' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002B1AE7D2C10>
    └ <SpawnProcess name='SpawnProcess-23' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002B1B0838820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17008 started>
    │    └ <function subprocess_started at 0x000002B1B0823EE0>
    └ <SpawnProcess name='SpawnProcess-23' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=828, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002B1AE90DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=828, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002B1B08230D0>
           │       │   └ <uvicorn.server.Server object at 0x000002B1AE90DEE0>
           │       └ <function run at 0x000002B1B04BC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002B1B19B9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002B1B04BD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002B1B04BD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002B1B04C04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002B1B042C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000002B1B1431790>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000002B1B1431790>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000002B1B1431790>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000002B1B1431790>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B1B10A6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B1B1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002B1B1152FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B1B10A6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B1B1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B1B1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B1B3FD7AC0>
          └ <fastapi.applications.FastAPI object at 0x000002B1B1152FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B1B1092160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B1B3FD7A60>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B1B3FD7AC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B1B1092160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B1B3FD78B0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B1B3FD7A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B1B1092160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002B1B14318E0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002B1B1847B80>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B1B3FD78B0>
          └ <function wrap_app_handling_exceptions at 0x000002B1B15D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3F70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002B1B1847B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3F70>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002B1B1847B80>>
          └ <fastapi.routing.APIRouter object at 0x000002B1B1847B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3F70>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002B1B15C6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002B1B1360A60>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3F70>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002B1B1431B50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002B1B3FD3EE0>
          └ <function wrap_app_handling_exceptions at 0x000002B1B15D3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002B1B3FD3C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002B1B3FD3EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002B1B1431B50>
                     └ <function get_request_handler.<locals>.app at 0x000002B1B3F8EF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000002B1B151E550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMzg3NzIyMDUiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000002B1B3FBB6A0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 57, in __call__
    if user_info.data.get("role", 0) < self.role:
       │                               │    └ 0
       │                               └ <app.apis.Permission object at 0x000002B1B3FBB6A0>
       └ {'jti': '202403090038772205', 'iss': 'wieszheng', 'iat': 1709915882, 'exp': 1709917682, 'data': {'id': 'd5a8fa2f-5450-42a5-80...

AttributeError: 'dict' object has no attribute 'data'
2024-03-09 00:38:50.676 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 400
               │     └ 3
               └ <function _main at 0x0000016ADF2D74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 400
           │    └ <function BaseProcess._bootstrap at 0x0000016ADF1E35E0>
           └ <SpawnProcess name='SpawnProcess-24' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000016ADF1E2C10>
    └ <SpawnProcess name='SpawnProcess-24' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000016AE1208820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-24' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-24' parent=17008 started>
    │    └ <function subprocess_started at 0x0000016AE11F2EE0>
    └ <SpawnProcess name='SpawnProcess-24' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=844, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000016ADF2EDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=844, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000016AE11F20D0>
           │       │   └ <uvicorn.server.Server object at 0x0000016ADF2EDEE0>
           │       └ <function run at 0x0000016AE0E8C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000016AE2388340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000016AE0E8D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000016AE0E8D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000016AE0E904C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000016AE0DFC0D0>
    └ <Handle <TaskStepMethWrapper object at 0x0000016AE1ED9580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000016AE1ED9580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000016AE1ED9580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000016AE1ED9580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000016AE1A76250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016AE1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000016AE1B22FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000016AE1A76250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016AE1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016AE1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000016AE1E0B8B0>
          └ <fastapi.applications.FastAPI object at 0x0000016AE1B22FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000016AE1A62160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000016AE1E0B7C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000016AE1E0B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000016AE1A62160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000016AE1E0B850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000016AE1E0B7C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000016AE1A62160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000016AE1ED96D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000016AE2218F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000016AE1E0B850>
          └ <function wrap_app_handling_exceptions at 0x0000016AE1FBCA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E14CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000016AE2218F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E14CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000016AE2218F10>>
          └ <fastapi.routing.APIRouter object at 0x0000016AE2218F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E14CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000016AE1F6F040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E14CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000016AE1D60EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E14CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000016AE1ED9940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000016AE1E14C10>
          └ <function wrap_app_handling_exceptions at 0x0000016AE1FBCA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E149D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000016AE1E14C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000016AE1ED9940>
                     └ <function get_request_handler.<locals>.app at 0x0000016AE1D60C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x0000016AE1EF9550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMzg3NzIyMDUiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x0000016AE4984520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info.id)
                 │        │          └ {'jti': '202403090038772205', 'iss': 'wieszheng', 'iat': 1709915882, 'exp': 1709917682, 'data': {'id': 'd5a8fa2f-5450-42a5-80...
                 │        └ <staticmethod object at 0x0000016AE48D2C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-09 00:38:50.709 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 400
               │     └ 3
               └ <function _main at 0x0000016ADF2D74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 400
           │    └ <function BaseProcess._bootstrap at 0x0000016ADF1E35E0>
           └ <SpawnProcess name='SpawnProcess-24' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000016ADF1E2C10>
    └ <SpawnProcess name='SpawnProcess-24' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000016AE1208820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-24' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-24' parent=17008 started>
    │    └ <function subprocess_started at 0x0000016AE11F2EE0>
    └ <SpawnProcess name='SpawnProcess-24' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=844, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000016ADF2EDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=844, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000016AE11F20D0>
           │       │   └ <uvicorn.server.Server object at 0x0000016ADF2EDEE0>
           │       └ <function run at 0x0000016AE0E8C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000016AE2388340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000016AE0E8D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000016AE0E8D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000016AE0E904C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000016AE0DFC0D0>
    └ <Handle <TaskStepMethWrapper object at 0x0000016AE1ED9580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000016AE1ED9580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000016AE1ED9580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000016AE1ED9580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000016AE1A76250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016AE1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000016AE1B22FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000016AE1A76250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016AE1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016AE1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000016AE1E0B8B0>
          └ <fastapi.applications.FastAPI object at 0x0000016AE1B22FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000016AE1A62160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000016AE1E0B7C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000016AE1E0B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000016AE1A62160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000016AE1E0B850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000016AE1E0B7C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000016AE1A62160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000016AE1ED96D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000016AE2218F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000016AE1E0B850>
          └ <function wrap_app_handling_exceptions at 0x0000016AE1FBCA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E14CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000016AE2218F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E14CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000016AE2218F10>>
          └ <fastapi.routing.APIRouter object at 0x0000016AE2218F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E14CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000016AE1F6F040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E14CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000016AE1D60EE0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E14CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000016AE1ED9940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000016AE1E14C10>
          └ <function wrap_app_handling_exceptions at 0x0000016AE1FBCA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000016AE1E149D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000016AE1E14C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000016AE1ED9940>
                     └ <function get_request_handler.<locals>.app at 0x0000016AE1D60C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x0000016AE1EF9550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwMzg3NzIyMDUiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x0000016AE4984520>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info.id)
                 │        │          └ {'jti': '202403090038772205', 'iss': 'wieszheng', 'iat': 1709915882, 'exp': 1709917682, 'data': {'id': 'd5a8fa2f-5450-42a5-80...
                 │        └ <staticmethod object at 0x0000016AE48D2C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-09 00:44:25.295 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 380
               │     └ 3
               └ <function _main at 0x00000243519D74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 380
           │    └ <function BaseProcess._bootstrap at 0x00000243518E35E0>
           └ <SpawnProcess name='SpawnProcess-27' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000243518E2C10>
    └ <SpawnProcess name='SpawnProcess-27' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024353918820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-27' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-27' parent=17008 started>
    │    └ <function subprocess_started at 0x0000024353902EE0>
    └ <SpawnProcess name='SpawnProcess-27' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000243519EDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000243539020D0>
           │       │   └ <uvicorn.server.Server object at 0x00000243519EDEE0>
           │       └ <function run at 0x000002435359C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000024354A96340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002435359D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002435359D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000243535A04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002435350C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x00000243570B2E20>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x00000243570B2E20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x00000243570B2E20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x00000243570B2E20>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024354186250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024357...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000024354231FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024354186250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024357...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024357...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000243570B28B0>
          └ <fastapi.applications.FastAPI object at 0x0000024354231FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024354172160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000243570B27C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000243570B28B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024354172160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000243570B2850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000243570B27C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024354172160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000243570B2910>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000024354928A00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000243570B2850>
          └ <function wrap_app_handling_exceptions at 0x00000243546CDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243545CD820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000024354928A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243545CD820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000024354928A00>>
          └ <fastapi.routing.APIRouter object at 0x0000024354928A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243545CD820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000243547AF040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243545CD820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000024354779AF0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243545CD820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000243570B2E80>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000243570B0C10>
          └ <function wrap_app_handling_exceptions at 0x00000243546CDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243570B0CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000243570B0C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000243570B2E80>
                     └ <function get_request_handler.<locals>.app at 0x0000024354779A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x0000024354605550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x0000024357083FD0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info.id)
                 │        │          └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
                 │        └ <staticmethod object at 0x0000024356FF2C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-09 00:44:25.328 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 380
               │     └ 3
               └ <function _main at 0x00000243519D74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 380
           │    └ <function BaseProcess._bootstrap at 0x00000243518E35E0>
           └ <SpawnProcess name='SpawnProcess-27' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000243518E2C10>
    └ <SpawnProcess name='SpawnProcess-27' parent=17008 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024353918820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-27' parent=17008 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-27' parent=17008 started>
    │    └ <function subprocess_started at 0x0000024353902EE0>
    └ <SpawnProcess name='SpawnProcess-27' parent=17008 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000243519EDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000243539020D0>
           │       │   └ <uvicorn.server.Server object at 0x00000243519EDEE0>
           │       └ <function run at 0x000002435359C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000024354A96340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002435359D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002435359D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000243535A04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002435350C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x00000243570B2E20>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x00000243570B2E20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x00000243570B2E20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x00000243570B2E20>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024354186250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024357...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000024354231FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024354186250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024357...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024357...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000243570B28B0>
          └ <fastapi.applications.FastAPI object at 0x0000024354231FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024354172160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000243570B27C0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000243570B28B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024354172160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000243570B2850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000243570B27C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024354172160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000243570B2910>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000024354928A00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000243570B2850>
          └ <function wrap_app_handling_exceptions at 0x00000243546CDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243545CD820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000024354928A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243545CD820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000024354928A00>>
          └ <fastapi.routing.APIRouter object at 0x0000024354928A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243545CD820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000243547AF040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243545CD820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000024354779AF0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243545CD820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000243570B2E80>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000243570B0C10>
          └ <function wrap_app_handling_exceptions at 0x00000243546CDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000243570B0CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000243570B0C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000243570B2E80>
                     └ <function get_request_handler.<locals>.app at 0x0000024354779A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x0000024354605550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x0000024357083FD0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 59, in __call__
    user = await UserCRUD.query_user(user_info.id)
                 │        │          └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
                 │        └ <staticmethod object at 0x0000024356FF2C70>
                 └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-09 00:46:14.005 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 412
               │     └ 3
               └ <function _main at 0x000002A7031374C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 412
           │    └ <function BaseProcess._bootstrap at 0x000002A7030335E0>
           └ <SpawnProcess name='SpawnProcess-2' parent=12980 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002A703032C10>
    └ <SpawnProcess name='SpawnProcess-2' parent=12980 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002A705078820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=12980 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=12980 started>
    │    └ <function subprocess_started at 0x000002A705062EE0>
    └ <SpawnProcess name='SpawnProcess-2' parent=12980 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=164, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002A70314DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=164, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002A7050620D0>
           │       │   └ <uvicorn.server.Server object at 0x000002A70314DEE0>
           │       └ <function run at 0x000002A704CFB160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002A7061F6340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002A704CFC9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002A704CFC940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002A704CFF4C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002A704C6C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000002A705D47580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000002A705D47580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000002A705D47580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000002A705D47580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A7058E6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A705...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002A705991FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A7058E6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A705...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A705...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A7088048B0>
          └ <fastapi.applications.FastAPI object at 0x000002A705991FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A7058D2160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A708804610>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A7088048B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A7058D2160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A7088046A0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A708804610>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A7058D2160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002A705D476D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002A706087F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A7088046A0>
          └ <function wrap_app_handling_exceptions at 0x000002A705E13A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FCD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002A706087F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FCD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002A706087F10>>
          └ <fastapi.routing.APIRouter object at 0x000002A706087F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FCD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002A705E06040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FCD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002A705EDBAF0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FCD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002A705D47940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002A7087FCCA0>
          └ <function wrap_app_handling_exceptions at 0x000002A705E13A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FC9D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002A7087FCCA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002A705D47940>
                     └ <function get_request_handler.<locals>.app at 0x000002A705EDBA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000002A705D5E550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000002A7087D4FD0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 57, in __call__
    print(user_info.id)
          └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...

AttributeError: 'dict' object has no attribute 'id'
2024-03-09 00:46:14.041 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 412
               │     └ 3
               └ <function _main at 0x000002A7031374C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 412
           │    └ <function BaseProcess._bootstrap at 0x000002A7030335E0>
           └ <SpawnProcess name='SpawnProcess-2' parent=12980 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002A703032C10>
    └ <SpawnProcess name='SpawnProcess-2' parent=12980 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002A705078820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=12980 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=12980 started>
    │    └ <function subprocess_started at 0x000002A705062EE0>
    └ <SpawnProcess name='SpawnProcess-2' parent=12980 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=164, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002A70314DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=164, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002A7050620D0>
           │       │   └ <uvicorn.server.Server object at 0x000002A70314DEE0>
           │       └ <function run at 0x000002A704CFB160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002A7061F6340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002A704CFC9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002A704CFC940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002A704CFF4C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002A704C6C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000002A705D47580>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000002A705D47580>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000002A705D47580>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000002A705D47580>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A7058E6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A705...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002A705991FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A7058E6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A705...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A705...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A7088048B0>
          └ <fastapi.applications.FastAPI object at 0x000002A705991FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A7058D2160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A708804610>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A7088048B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A7058D2160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A7088046A0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A708804610>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A7058D2160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002A705D476D0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002A706087F10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A7088046A0>
          └ <function wrap_app_handling_exceptions at 0x000002A705E13A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FCD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002A706087F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FCD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002A706087F10>>
          └ <fastapi.routing.APIRouter object at 0x000002A706087F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FCD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002A705E06040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FCD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002A705EDBAF0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FCD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002A705D47940>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002A7087FCCA0>
          └ <function wrap_app_handling_exceptions at 0x000002A705E13A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A7087FC9D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002A7087FCCA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002A705D47940>
                     └ <function get_request_handler.<locals>.app at 0x000002A705EDBA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000002A705D5E550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000002A7087D4FD0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 57, in __call__
    print(user_info.id)
          └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...

AttributeError: 'dict' object has no attribute 'id'
2024-03-09 00:50:13.555 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 00:50:13.555 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 01:20:12.587 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 01:20:12.587 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 01:51:06.551 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x00000227672737F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x0000022767287280>
              └ <jwt.api_jwt.PyJWT object at 0x00000227672737F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 162, in decode_complete
    self._validate_claims(
    │    └ <function PyJWT._validate_claims at 0x0000022767287430>
    └ <jwt.api_jwt.PyJWT object at 0x00000227672737F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 248, in _validate_claims
    self._validate_exp(payload, now, leeway)
    │    │             │        │    └ 0
    │    │             │        └ 1709920266.550088
    │    │             └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
    │    └ <function PyJWT._validate_exp at 0x0000022767287670>
    └ <jwt.api_jwt.PyJWT object at 0x00000227672737F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 306, in _validate_exp
    raise ExpiredSignatureError("Signature has expired")
          └ <class 'jwt.exceptions.ExpiredSignatureError'>

jwt.exceptions.ExpiredSignatureError: Signature has expired


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x00000227642F74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x00000227641E35E0>
           └ <SpawnProcess name='SpawnProcess-3' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000227641E2C10>
    └ <SpawnProcess name='SpawnProcess-3' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000022766238820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=5652 started>
    │    └ <function subprocess_started at 0x0000022766222EE0>
    └ <SpawnProcess name='SpawnProcess-3' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=544, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002276430DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=544, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000227662220D0>
           │       │   └ <uvicorn.server.Server object at 0x000002276430DEE0>
           │       └ <function run at 0x0000022765EBB160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000227673B8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022765EBC9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022765EBC940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022765EBF4C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022765E2C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x0000022766E327F0>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000022766E327F0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000022766E327F0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000022766E327F0>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022766AA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022766...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022766B52FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022766AA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022766...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022766...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000227699C5B20>
          └ <fastapi.applications.FastAPI object at 0x0000022766B52FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022766A92160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000227699C5A30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000227699C5B20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022766A92160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000227699C5AC0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000227699C5A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022766A92160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000022766E32940>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000022767247B80>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000227699C5AC0>
          └ <function wrap_app_handling_exceptions at 0x0000022766FE8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000227699C0F70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000022767247B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000227699C0F70>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000022767247B80>>
          └ <fastapi.routing.APIRouter object at 0x0000022767247B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000227699C0F70>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000022766FC6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000227699C0F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002276709CDC0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000227699C0F70>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000022766E32BB0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000227699C0CA0>
          └ <function wrap_app_handling_exceptions at 0x0000022766FE8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022766EE8040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000227699C0CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000022766E32BB0>
                     └ <function get_request_handler.<locals>.app at 0x000002276709CD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x0000022766F1E550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x00000227699AEEB0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTYyNTMsImV...
                └ <function jwt_decode at 0x000002276996E9D0>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 66, in jwt_decode
    raise Exception("登录状态已过期, 请重新登录")

Exception: 登录状态已过期, 请重新登录
2024-03-09 01:51:06.592 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x00000227672737F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x0000022767287280>
              └ <jwt.api_jwt.PyJWT object at 0x00000227672737F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 162, in decode_complete
    self._validate_claims(
    │    └ <function PyJWT._validate_claims at 0x0000022767287430>
    └ <jwt.api_jwt.PyJWT object at 0x00000227672737F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 248, in _validate_claims
    self._validate_exp(payload, now, leeway)
    │    │             │        │    └ 0
    │    │             │        └ 1709920266.550088
    │    │             └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
    │    └ <function PyJWT._validate_exp at 0x0000022767287670>
    └ <jwt.api_jwt.PyJWT object at 0x00000227672737F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 306, in _validate_exp
    raise ExpiredSignatureError("Signature has expired")
          └ <class 'jwt.exceptions.ExpiredSignatureError'>

jwt.exceptions.ExpiredSignatureError: Signature has expired


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x00000227642F74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x00000227641E35E0>
           └ <SpawnProcess name='SpawnProcess-3' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000227641E2C10>
    └ <SpawnProcess name='SpawnProcess-3' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000022766238820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=5652 started>
    │    └ <function subprocess_started at 0x0000022766222EE0>
    └ <SpawnProcess name='SpawnProcess-3' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=544, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002276430DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=544, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000227662220D0>
           │       │   └ <uvicorn.server.Server object at 0x000002276430DEE0>
           │       └ <function run at 0x0000022765EBB160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000227673B8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022765EBC9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022765EBC940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022765EBF4C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022765E2C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x0000022766E327F0>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000022766E327F0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000022766E327F0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000022766E327F0>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022766AA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022766...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022766B52FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022766AA6250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022766...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022766...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000227699C5B20>
          └ <fastapi.applications.FastAPI object at 0x0000022766B52FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022766A92160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000227699C5A30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000227699C5B20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022766A92160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000227699C5AC0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000227699C5A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022766A92160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000022766E32940>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000022767247B80>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000227699C5AC0>
          └ <function wrap_app_handling_exceptions at 0x0000022766FE8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000227699C0F70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000022767247B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000227699C0F70>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000022767247B80>>
          └ <fastapi.routing.APIRouter object at 0x0000022767247B80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000227699C0F70>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000022766FC6040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000227699C0F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002276709CDC0>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000227699C0F70>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000022766E32BB0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000227699C0CA0>
          └ <function wrap_app_handling_exceptions at 0x0000022766FE8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022766EE8040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000227699C0CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000022766E32BB0>
                     └ <function get_request_handler.<locals>.app at 0x000002276709CD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x0000022766F1E550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x00000227699AEEB0>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTYyNTMsImV...
                └ <function jwt_decode at 0x000002276996E9D0>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 66, in jwt_decode
    raise Exception("登录状态已过期, 请重新登录")

Exception: 登录状态已过期, 请重新登录
2024-03-09 01:54:14.150 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x00000196EA9637F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x00000196EA977280>
              └ <jwt.api_jwt.PyJWT object at 0x00000196EA9637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 162, in decode_complete
    self._validate_claims(
    │    └ <function PyJWT._validate_claims at 0x00000196EA977430>
    └ <jwt.api_jwt.PyJWT object at 0x00000196EA9637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 248, in _validate_claims
    self._validate_exp(payload, now, leeway)
    │    │             │        │    └ 0
    │    │             │        └ 1709920454.14774
    │    │             └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
    │    └ <function PyJWT._validate_exp at 0x00000196EA977670>
    └ <jwt.api_jwt.PyJWT object at 0x00000196EA9637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 306, in _validate_exp
    raise ExpiredSignatureError("Signature has expired")
          └ <class 'jwt.exceptions.ExpiredSignatureError'>

jwt.exceptions.ExpiredSignatureError: Signature has expired


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 396
               │     └ 3
               └ <function _main at 0x00000196E79F74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 396
           │    └ <function BaseProcess._bootstrap at 0x00000196E79035E0>
           └ <SpawnProcess name='SpawnProcess-5' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000196E7902C10>
    └ <SpawnProcess name='SpawnProcess-5' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000196E9928820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=5652 started>
    │    └ <function subprocess_started at 0x00000196E9910EE0>
    └ <SpawnProcess name='SpawnProcess-5' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=460, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000196E7A0DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=460, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000196E99100D0>
           │       │   └ <uvicorn.server.Server object at 0x00000196E7A0DEE0>
           │       └ <function run at 0x00000196E95AC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000196EAAA8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000196E95AD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000196E95AD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000196E95B04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000196E951C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x00000196EA536640>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x00000196EA536640>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x00000196EA536640>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x00000196EA536640>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000196EA196250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000196EA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000196EA242FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000196EA196250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000196EA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000196EA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000196ED0B2940>
          └ <fastapi.applications.FastAPI object at 0x00000196EA242FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000196EA182160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000196ED0B28E0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000196ED0B2940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000196EA182160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000196ED0B2910>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000196ED0B28E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000196EA182160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000196EA536790>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000196ED03DD90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000196ED0B2910>
          └ <function wrap_app_handling_exceptions at 0x00000196EA6D8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0DC0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000196ED03DD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0DC0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000196ED03DD90>>
          └ <fastapi.routing.APIRouter object at 0x00000196ED03DD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0DC0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000196EA7BF040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0DC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000196EA445B80>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0DC0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000196EA536A00>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000196ED0B0D30>
          └ <function wrap_app_handling_exceptions at 0x00000196EA6D8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0A60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000196ED0B0D30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000196EA536A00>
                     └ <function get_request_handler.<locals>.app at 0x00000196EA445AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x00000196EA615550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x00000196ED083D00>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTYyNTMsImV...
                └ <function jwt_decode at 0x00000196ED05FA60>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 66, in jwt_decode
    raise Exception("登录状态已过期, 请重新登录")

Exception: 登录状态已过期, 请重新登录
2024-03-09 01:54:14.201 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x00000196EA9637F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x00000196EA977280>
              └ <jwt.api_jwt.PyJWT object at 0x00000196EA9637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 162, in decode_complete
    self._validate_claims(
    │    └ <function PyJWT._validate_claims at 0x00000196EA977430>
    └ <jwt.api_jwt.PyJWT object at 0x00000196EA9637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 248, in _validate_claims
    self._validate_exp(payload, now, leeway)
    │    │             │        │    └ 0
    │    │             │        └ 1709920454.14774
    │    │             └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
    │    └ <function PyJWT._validate_exp at 0x00000196EA977670>
    └ <jwt.api_jwt.PyJWT object at 0x00000196EA9637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 306, in _validate_exp
    raise ExpiredSignatureError("Signature has expired")
          └ <class 'jwt.exceptions.ExpiredSignatureError'>

jwt.exceptions.ExpiredSignatureError: Signature has expired


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 396
               │     └ 3
               └ <function _main at 0x00000196E79F74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 396
           │    └ <function BaseProcess._bootstrap at 0x00000196E79035E0>
           └ <SpawnProcess name='SpawnProcess-5' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000196E7902C10>
    └ <SpawnProcess name='SpawnProcess-5' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000196E9928820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=5652 started>
    │    └ <function subprocess_started at 0x00000196E9910EE0>
    └ <SpawnProcess name='SpawnProcess-5' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=460, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000196E7A0DEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=460, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000196E99100D0>
           │       │   └ <uvicorn.server.Server object at 0x00000196E7A0DEE0>
           │       └ <function run at 0x00000196E95AC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000196EAAA8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000196E95AD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000196E95AD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000196E95B04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000196E951C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x00000196EA536640>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x00000196EA536640>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x00000196EA536640>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x00000196EA536640>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000196EA196250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000196EA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000196EA242FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000196EA196250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000196EA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000196EA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000196ED0B2940>
          └ <fastapi.applications.FastAPI object at 0x00000196EA242FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000196EA182160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000196ED0B28E0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000196ED0B2940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000196EA182160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000196ED0B2910>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000196ED0B28E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000196EA182160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000196EA536790>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000196ED03DD90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000196ED0B2910>
          └ <function wrap_app_handling_exceptions at 0x00000196EA6D8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0DC0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000196ED03DD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0DC0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000196ED03DD90>>
          └ <fastapi.routing.APIRouter object at 0x00000196ED03DD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0DC0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000196EA7BF040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0DC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000196EA445B80>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0DC0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000196EA536A00>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000196ED0B0D30>
          └ <function wrap_app_handling_exceptions at 0x00000196EA6D8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000196ED0B0A60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000196ED0B0D30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000196EA536A00>
                     └ <function get_request_handler.<locals>.app at 0x00000196EA445AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x00000196EA615550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x00000196ED083D00>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTYyNTMsImV...
                └ <function jwt_decode at 0x00000196ED05FA60>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 66, in jwt_decode
    raise Exception("登录状态已过期, 请重新登录")

Exception: 登录状态已过期, 请重新登录
2024-03-09 01:54:17.337 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x000001C0B7E78280>
              └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 162, in decode_complete
    self._validate_claims(
    │    └ <function PyJWT._validate_claims at 0x000001C0B7E78430>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 248, in _validate_claims
    self._validate_exp(payload, now, leeway)
    │    │             │        │    └ 0
    │    │             │        └ 1709920457.335285
    │    │             └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
    │    └ <function PyJWT._validate_exp at 0x000001C0B7E78670>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 306, in _validate_exp
    raise ExpiredSignatureError("Signature has expired")
          └ <class 'jwt.exceptions.ExpiredSignatureError'>

jwt.exceptions.ExpiredSignatureError: Signature has expired


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 180
               │     └ 3
               └ <function _main at 0x000001C0B4EE74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 180
           │    └ <function BaseProcess._bootstrap at 0x000001C0B4DF35E0>
           └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C0B4DF2C10>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C0B6E28820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    └ <function subprocess_started at 0x000001C0B6E13EE0>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C0B4EFDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C0B6E130D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C0B4EFDEE0>
           │       └ <function run at 0x000001C0B6AAC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C0B7FA9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C0B6AAD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C0B6AAD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C0B6AB04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C0B6A1C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0B7A26640>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001C0B7A26640>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001C0B7A26640>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0B7A26640>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0B7...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0B7...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0B7...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>
          └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0B7682160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0B7682160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0B7682160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C0B7A26790>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACDC0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACDC0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>>
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACDC0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C0B7B96040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACDC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C0B7C8AB80>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACDC0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C0B7A26A00>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA5ACD30>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACA60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA5ACD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C0B7A26A00>
                     └ <function get_request_handler.<locals>.app at 0x000001C0B7C8AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001C0B7B15550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001C0BA583D00>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTYyNTMsImV...
                └ <function jwt_decode at 0x000001C0BA560A60>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 66, in jwt_decode
    raise Exception("登录状态已过期, 请重新登录")

Exception: 登录状态已过期, 请重新登录
2024-03-09 01:54:17.374 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x000001C0B7E78280>
              └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 162, in decode_complete
    self._validate_claims(
    │    └ <function PyJWT._validate_claims at 0x000001C0B7E78430>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 248, in _validate_claims
    self._validate_exp(payload, now, leeway)
    │    │             │        │    └ 0
    │    │             │        └ 1709920457.335285
    │    │             └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
    │    └ <function PyJWT._validate_exp at 0x000001C0B7E78670>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 306, in _validate_exp
    raise ExpiredSignatureError("Signature has expired")
          └ <class 'jwt.exceptions.ExpiredSignatureError'>

jwt.exceptions.ExpiredSignatureError: Signature has expired


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 180
               │     └ 3
               └ <function _main at 0x000001C0B4EE74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 180
           │    └ <function BaseProcess._bootstrap at 0x000001C0B4DF35E0>
           └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C0B4DF2C10>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C0B6E28820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    └ <function subprocess_started at 0x000001C0B6E13EE0>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C0B4EFDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C0B6E130D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C0B4EFDEE0>
           │       └ <function run at 0x000001C0B6AAC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C0B7FA9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C0B6AAD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C0B6AAD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C0B6AB04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C0B6A1C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0B7A26640>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001C0B7A26640>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001C0B7A26640>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0B7A26640>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0B7...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0B7...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0B7...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>
          └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0B7682160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0B7682160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0B7682160>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C0B7A26790>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACDC0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACDC0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>>
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACDC0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C0B7B96040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACDC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C0B7C8AB80>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACDC0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C0B7A26A00>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA5ACD30>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5ACA60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA5ACD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C0B7A26A00>
                     └ <function get_request_handler.<locals>.app at 0x000001C0B7C8AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001C0B7B15550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001C0BA583D00>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTYyNTMsImV...
                └ <function jwt_decode at 0x000001C0BA560A60>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 66, in jwt_decode
    raise Exception("登录状态已过期, 请重新登录")

Exception: 登录状态已过期, 请重新登录
2024-03-09 01:54:22.892 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jws.py", line 257, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    │   └ <method 'rsplit' of 'bytes' objects>
                                    └ b'121'

ValueError: not enough values to unpack (expected 2, got 1)


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x000001C0B7E78280>
              └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 151, in decode_complete
    decoded = api_jws.decode_complete(
              │       └ <bound method PyJWS.decode_complete of <jwt.api_jws.PyJWS object at 0x000001C0B7E59070>>
              └ <module 'jwt.api_jws' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\api_jws.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jws.py", line 198, in decode_complete
    payload, signing_input, header, signature = self._load(jwt)
                                                │    │     └ '121'
                                                │    └ <function PyJWS._load at 0x000001C0B7E52B80>
                                                └ <jwt.api_jws.PyJWS object at 0x000001C0B7E59070>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jws.py", line 260, in _load
    raise DecodeError("Not enough segments") from err
          └ <class 'jwt.exceptions.DecodeError'>

jwt.exceptions.DecodeError: Not enough segments


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 180
               │     └ 3
               └ <function _main at 0x000001C0B4EE74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 180
           │    └ <function BaseProcess._bootstrap at 0x000001C0B4DF35E0>
           └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C0B4DF2C10>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C0B6E28820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    └ <function subprocess_started at 0x000001C0B6E13EE0>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C0B4EFDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C0B6E130D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C0B4EFDEE0>
           │       └ <function run at 0x000001C0B6AAC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C0B7FA9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C0B6AAD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C0B6AAD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C0B6AB04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C0B6A1C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA73C4F0>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001C0BA73C4F0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001C0BA73C4F0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA73C4F0>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>
          └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA5C1040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA5C1040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA5C1040>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C0BA73C5B0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5C1820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5C1820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>>
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5C1820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C0B7B96040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5C1820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C0B7C8AB80>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5C1820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C0BA73C760>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732670>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA7325E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C0BA73C760>
                     └ <function get_request_handler.<locals>.app at 0x000001C0B7C8AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001C0B7B15550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': '121'}
                   └ <app.apis.Permission object at 0x000001C0BA583D00>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ '121'
                └ <function jwt_decode at 0x000001C0BA560A60>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 68, in jwt_decode
    raise Exception("Token不合法, 请重新登录")

Exception: Token不合法, 请重新登录
2024-03-09 01:54:22.919 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jws.py", line 257, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    │   └ <method 'rsplit' of 'bytes' objects>
                                    └ b'121'

ValueError: not enough values to unpack (expected 2, got 1)


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x000001C0B7E78280>
              └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 151, in decode_complete
    decoded = api_jws.decode_complete(
              │       └ <bound method PyJWS.decode_complete of <jwt.api_jws.PyJWS object at 0x000001C0B7E59070>>
              └ <module 'jwt.api_jws' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\api_jws.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jws.py", line 198, in decode_complete
    payload, signing_input, header, signature = self._load(jwt)
                                                │    │     └ '121'
                                                │    └ <function PyJWS._load at 0x000001C0B7E52B80>
                                                └ <jwt.api_jws.PyJWS object at 0x000001C0B7E59070>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jws.py", line 260, in _load
    raise DecodeError("Not enough segments") from err
          └ <class 'jwt.exceptions.DecodeError'>

jwt.exceptions.DecodeError: Not enough segments


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 180
               │     └ 3
               └ <function _main at 0x000001C0B4EE74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 180
           │    └ <function BaseProcess._bootstrap at 0x000001C0B4DF35E0>
           └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C0B4DF2C10>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C0B6E28820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    └ <function subprocess_started at 0x000001C0B6E13EE0>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C0B4EFDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C0B6E130D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C0B4EFDEE0>
           │       └ <function run at 0x000001C0B6AAC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C0B7FA9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C0B6AAD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C0B6AAD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C0B6AB04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C0B6A1C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA73C4F0>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001C0BA73C4F0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001C0BA73C4F0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA73C4F0>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>
          └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA5C1040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA5C1040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA5C1040>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C0BA73C5B0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5C1820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5C1820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>>
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5C1820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C0B7B96040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5C1820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C0B7C8AB80>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA5C1820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C0BA73C760>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732670>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA7325E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C0BA73C760>
                     └ <function get_request_handler.<locals>.app at 0x000001C0B7C8AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001C0B7B15550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': '121'}
                   └ <app.apis.Permission object at 0x000001C0BA583D00>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ '121'
                └ <function jwt_decode at 0x000001C0BA560A60>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 68, in jwt_decode
    raise Exception("Token不合法, 请重新登录")

Exception: Token不合法, 请重新登录
2024-03-09 01:54:25.581 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x000001C0B7E78280>
              └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 162, in decode_complete
    self._validate_claims(
    │    └ <function PyJWT._validate_claims at 0x000001C0B7E78430>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 248, in _validate_claims
    self._validate_exp(payload, now, leeway)
    │    │             │        │    └ 0
    │    │             │        └ 1709920465.568024
    │    │             └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
    │    └ <function PyJWT._validate_exp at 0x000001C0B7E78670>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 306, in _validate_exp
    raise ExpiredSignatureError("Signature has expired")
          └ <class 'jwt.exceptions.ExpiredSignatureError'>

jwt.exceptions.ExpiredSignatureError: Signature has expired


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 180
               │     └ 3
               └ <function _main at 0x000001C0B4EE74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 180
           │    └ <function BaseProcess._bootstrap at 0x000001C0B4DF35E0>
           └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C0B4DF2C10>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C0B6E28820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    └ <function subprocess_started at 0x000001C0B6E13EE0>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C0B4EFDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C0B6E130D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C0B4EFDEE0>
           │       └ <function run at 0x000001C0B6AAC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C0B7FA9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C0B6AAD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C0B6AAD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C0B6AB04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C0B6A1C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74A1C0>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74A1C0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74A1C0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74A1C0>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>
          └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732EE0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C0BA74A280>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732E50>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732E50>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>>
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732E50>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C0B7B96040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732E50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C0B7C8AB80>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732E50>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C0BA74A430>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732D30>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732D30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C0BA74A430>
                     └ <function get_request_handler.<locals>.app at 0x000001C0B7C8AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001C0B7B15550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001C0BA583D00>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTYyNTMsImV...
                └ <function jwt_decode at 0x000001C0BA560A60>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 66, in jwt_decode
    raise Exception("登录状态已过期, 请重新登录")

Exception: 登录状态已过期, 请重新登录
2024-03-09 01:54:25.609 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x000001C0B7E78280>
              └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 162, in decode_complete
    self._validate_claims(
    │    └ <function PyJWT._validate_claims at 0x000001C0B7E78430>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 248, in _validate_claims
    self._validate_exp(payload, now, leeway)
    │    │             │        │    └ 0
    │    │             │        └ 1709920465.568024
    │    │             └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
    │    └ <function PyJWT._validate_exp at 0x000001C0B7E78670>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 306, in _validate_exp
    raise ExpiredSignatureError("Signature has expired")
          └ <class 'jwt.exceptions.ExpiredSignatureError'>

jwt.exceptions.ExpiredSignatureError: Signature has expired


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 180
               │     └ 3
               └ <function _main at 0x000001C0B4EE74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 180
           │    └ <function BaseProcess._bootstrap at 0x000001C0B4DF35E0>
           └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C0B4DF2C10>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C0B6E28820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    └ <function subprocess_started at 0x000001C0B6E13EE0>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C0B4EFDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C0B6E130D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C0B4EFDEE0>
           │       └ <function run at 0x000001C0B6AAC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C0B7FA9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C0B6AAD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C0B6AAD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C0B6AB04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C0B6A1C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74A1C0>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74A1C0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74A1C0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74A1C0>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>
          └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732EE0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C0BA74A280>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732E50>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732E50>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>>
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732E50>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C0B7B96040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732E50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C0B7C8AB80>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732E50>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C0BA74A430>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732D30>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732D30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C0BA74A430>
                     └ <function get_request_handler.<locals>.app at 0x000001C0B7C8AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001C0B7B15550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001C0BA583D00>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTYyNTMsImV...
                └ <function jwt_decode at 0x000001C0BA560A60>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 66, in jwt_decode
    raise Exception("登录状态已过期, 请重新登录")

Exception: 登录状态已过期, 请重新登录
2024-03-09 01:55:39.510 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x000001C0B7E78280>
              └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 162, in decode_complete
    self._validate_claims(
    │    └ <function PyJWT._validate_claims at 0x000001C0B7E78430>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 248, in _validate_claims
    self._validate_exp(payload, now, leeway)
    │    │             │        │    └ 0
    │    │             │        └ 1709920539.506754
    │    │             └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
    │    └ <function PyJWT._validate_exp at 0x000001C0B7E78670>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 306, in _validate_exp
    raise ExpiredSignatureError("Signature has expired")
          └ <class 'jwt.exceptions.ExpiredSignatureError'>

jwt.exceptions.ExpiredSignatureError: Signature has expired


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 180
               │     └ 3
               └ <function _main at 0x000001C0B4EE74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 180
           │    └ <function BaseProcess._bootstrap at 0x000001C0B4DF35E0>
           └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C0B4DF2C10>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C0B6E28820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    └ <function subprocess_started at 0x000001C0B6E13EE0>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C0B4EFDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C0B6E130D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C0B4EFDEE0>
           │       └ <function run at 0x000001C0B6AAC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C0B7FA9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C0B6AAD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C0B6AAD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C0B6AB04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C0B6A1C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74AE20>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74AE20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74AE20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74AE20>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>
          └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732F70>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C0BA74AEE0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732550>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732550>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>>
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732550>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C0B7B96040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C0B7C8AB80>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732550>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C0BA74C0D0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732820>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA74B040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C0BA74C0D0>
                     └ <function get_request_handler.<locals>.app at 0x000001C0B7C8AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001C0B7B15550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001C0BA583D00>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTYyNTMsImV...
                └ <function jwt_decode at 0x000001C0BA560A60>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 66, in jwt_decode
    raise Exception("登录状态已过期, 请重新登录")

Exception: 登录状态已过期, 请重新登录
2024-03-09 01:55:39.539 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 61, in jwt_decode
    return jwt.decode(
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>>
           └ <module 'jwt' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\jwt\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x000001C0B7E78280>
              └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 162, in decode_complete
    self._validate_claims(
    │    └ <function PyJWT._validate_claims at 0x000001C0B7E78430>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 248, in _validate_claims
    self._validate_exp(payload, now, leeway)
    │    │             │        │    └ 0
    │    │             │        └ 1709920539.506754
    │    │             └ {'jti': '202403090044346618', 'iss': 'wieszheng', 'iat': 1709916253, 'exp': 1709918053, 'id': 'd5a8fa2f-5450-42a5-802c-d72d7a...
    │    └ <function PyJWT._validate_exp at 0x000001C0B7E78670>
    └ <jwt.api_jwt.PyJWT object at 0x000001C0B7E637F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\jwt\api_jwt.py", line 306, in _validate_exp
    raise ExpiredSignatureError("Signature has expired")
          └ <class 'jwt.exceptions.ExpiredSignatureError'>

jwt.exceptions.ExpiredSignatureError: Signature has expired


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 180
               │     └ 3
               └ <function _main at 0x000001C0B4EE74C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 180
           │    └ <function BaseProcess._bootstrap at 0x000001C0B4DF35E0>
           └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C0B4DF2C10>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C0B6E28820>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>
    │    └ <function subprocess_started at 0x000001C0B6E13EE0>
    └ <SpawnProcess name='SpawnProcess-6' parent=5652 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C0B4EFDEE0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C0B6E130D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C0B4EFDEE0>
           │       └ <function run at 0x000001C0B6AAC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C0B7FA9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C0B6AAD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C0B6AAD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C0B6AB04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C0B6A1C0D0>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74AE20>()>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74AE20>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74AE20>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001C0BA74AE20>()>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C0B7697250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C0BA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>
          └ <fastapi.applications.FastAPI object at 0x000001C0B7741FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C0BA5B18E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C0BA5B1940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C0BA732F70>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C0BA74AEE0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C0BA5B1760>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732550>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732550>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>>
          └ <fastapi.routing.APIRouter object at 0x000001C0BA53ED90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732550>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C0B7B96040>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C0B7C8AB80>
          └ APIRoute(path='/api/v1/users/me', name='register', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA732550>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C0BA74C0D0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732820>
          └ <function wrap_app_handling_exceptions at 0x000001C0B7BDDA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C0BA74B040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C0BA732820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C0BA74C0D0>
                     └ <function get_request_handler.<locals>.app at 0x000001C0B7C8AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x000001C0B7B15550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5M...
                   └ <app.apis.Permission object at 0x000001C0BA583D00>

  File "E:\ProgramCode\python\brisk\app\apis\__init__.py", line 55, in __call__
    user_info = jwt_decode(token)
                │          └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDI0MDMwOTAwNDQzNDY2MTgiLCJpc3MiOiJ3aWVzemhlbmciLCJpYXQiOjE3MDk5MTYyNTMsImV...
                └ <function jwt_decode at 0x000001C0BA560A60>

  File "E:\ProgramCode\python\brisk\app\utils\jwt_.py", line 66, in jwt_decode
    raise Exception("登录状态已过期, 请重新登录")

Exception: 登录状态已过期, 请重新登录
2024-03-09 13:04:32.702 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 13:04:32.705 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 13:09:51.717 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 13:09:51.718 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 13:20:30.736 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 13:20:30.737 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 13:41:49.751 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 13:41:49.752 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 14:11:48.771 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 14:11:48.772 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 14:41:47.788 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 14:41:47.790 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 15:11:46.835 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 15:11:46.837 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 15:41:45.847 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 15:41:45.848 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 16:11:44.865 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 16:11:44.866 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 16:41:43.889 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 16:41:43.892 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 17:11:43.419 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 17:11:43.420 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 17:41:42.438 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 17:41:42.439 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:11:41.455 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:11:41.456 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:39:22.766 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:39:22.767 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:39:22.768 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:39:22.770 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:39:24.426 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:39:24.428 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:39:24.429 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:39:24.430 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:41:40.470 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:41:40.471 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:41:43.885 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:41:43.886 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:41:48.662 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 18:41:48.666 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 19:11:39.832 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 19:11:39.833 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 19:41:38.858 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 19:41:38.863 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 20:11:37.883 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 20:11:37.887 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 20:41:36.903 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 20:41:36.903 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 20:45:33.734 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 20:45:33.740 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 20:56:53.613 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 20:56:53.614 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 21:11:36.466 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 21:11:36.468 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 21:41:35.486 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 21:41:35.489 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 22:11:34.508 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 22:11:34.510 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 22:14:55.474 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 400
               │     └ 3
               └ <function _main at 0x00000225258294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 400
           │    └ <function BaseProcess._bootstrap at 0x00000225257085E0>
           └ <SpawnProcess name='SpawnProcess-3' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000022525713C10>
    └ <SpawnProcess name='SpawnProcess-3' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002252583E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=17920 started>
    │    └ <function subprocess_started at 0x0000022527753EE0>
    └ <SpawnProcess name='SpawnProcess-3' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002252583E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000225277530D0>
           │       │   └ <uvicorn.server.Server object at 0x000002252583E460>
           │       └ <function run at 0x00000225273EC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000225288E8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000225273ED9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000225273ED940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000225273F04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002252735E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002252AEE65E0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000002252AEE65E0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000002252AEE65E0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002252AEE65E0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002252891DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002252A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022528082FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002252891DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002252A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002252A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002252AE96F40>
          └ <fastapi.applications.FastAPI object at 0x0000022528082FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022527D049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002252AE96F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002252AE96F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022527D049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002252AE96EB0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002252AE96F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022527D049D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002252AEAFDC0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002252AE1FD60>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002252AE96EB0>
          └ <function wrap_app_handling_exceptions at 0x00000225284DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CA60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002252AE1FD60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CA60>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002252AE1FD60>>
          └ <fastapi.routing.APIRouter object at 0x000002252AE1FD60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CA60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000225284B0D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CA60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002252842C940>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CA60>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002252AEE64F0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002252842C0D0>
          └ <function wrap_app_handling_exceptions at 0x00000225284DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CE50>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002252842C0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002252AEE64F0>
                     └ <function get_request_handler.<locals>.app at 0x000002252842C8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000225284BB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002252AEE6730>}
                 │         └ <function page at 0x00000225282FE040>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000022528419400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 66, in page
    users = await UserCRUD.get(db,id=1)
                  │        │   └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002252AEE6730>
                  │        └ <staticmethod object at 0x000002252AE2BD60>
                  └ <class 'app.crud.auth.user.UserCRUD'>

TypeError: get() missing 1 required positional argument: 'schema_to_select'
2024-03-09 22:14:55.571 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 400
               │     └ 3
               └ <function _main at 0x00000225258294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 400
           │    └ <function BaseProcess._bootstrap at 0x00000225257085E0>
           └ <SpawnProcess name='SpawnProcess-3' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000022525713C10>
    └ <SpawnProcess name='SpawnProcess-3' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002252583E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=17920 started>
    │    └ <function subprocess_started at 0x0000022527753EE0>
    └ <SpawnProcess name='SpawnProcess-3' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002252583E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000225277530D0>
           │       │   └ <uvicorn.server.Server object at 0x000002252583E460>
           │       └ <function run at 0x00000225273EC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000225288E8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000225273ED9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000225273ED940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000225273F04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002252735E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002252AEE65E0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000002252AEE65E0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000002252AEE65E0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002252AEE65E0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002252891DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002252A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022528082FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002252891DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002252A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002252A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002252AE96F40>
          └ <fastapi.applications.FastAPI object at 0x0000022528082FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022527D049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002252AE96F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002252AE96F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022527D049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002252AE96EB0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002252AE96F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022527D049D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002252AEAFDC0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002252AE1FD60>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002252AE96EB0>
          └ <function wrap_app_handling_exceptions at 0x00000225284DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CA60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002252AE1FD60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CA60>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002252AE1FD60>>
          └ <fastapi.routing.APIRouter object at 0x000002252AE1FD60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CA60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000225284B0D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CA60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002252842C940>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CA60>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002252AEE64F0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002252842C0D0>
          └ <function wrap_app_handling_exceptions at 0x00000225284DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002252842CE50>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002252842C0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002252AEE64F0>
                     └ <function get_request_handler.<locals>.app at 0x000002252842C8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000225284BB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002252AEE6730>}
                 │         └ <function page at 0x00000225282FE040>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000022528419400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 66, in page
    users = await UserCRUD.get(db,id=1)
                  │        │   └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002252AEE6730>
                  │        └ <staticmethod object at 0x000002252AE2BD60>
                  └ <class 'app.crud.auth.user.UserCRUD'>

TypeError: get() missing 1 required positional argument: 'schema_to_select'
2024-03-09 22:27:34.527 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x0000027C767C94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x0000027C766985E0>
           └ <SpawnProcess name='SpawnProcess-7' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000027C766A3C10>
    └ <SpawnProcess name='SpawnProcess-7' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000027C767DE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=17920 started>
    │    └ <function subprocess_started at 0x0000027C786F3EE0>
    └ <SpawnProcess name='SpawnProcess-7' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=396, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000027C767DE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=396, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000027C786F30D0>
           │       │   └ <uvicorn.server.Server object at 0x0000027C767DE460>
           │       └ <function run at 0x0000027C7838C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000027C79888340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000027C7838D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000027C7838D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000027C783914C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000027C782FE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000027C7BEDCB50>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000027C7BEDCB50>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000027C7BEDCB50>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000027C7BEDCB50>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027C798BAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027C7B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000027C79022FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027C798BAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027C7B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027C7B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000027C7BE4C220>
          └ <fastapi.applications.FastAPI object at 0x0000027C79022FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027C78CA49D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027C7BE4C130>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000027C7BE4C220>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027C78CA49D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000027C7BE38F70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027C7BE4C130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027C78CA49D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000027C7BEBAF70>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000027C7BDBEA30>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000027C7BE38F70>
          └ <function wrap_app_handling_exceptions at 0x0000027C7949D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7929C820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000027C7BDBEA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7929C820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000027C7BDBEA30>>
          └ <fastapi.routing.APIRouter object at 0x0000027C7BDBEA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7929C820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000027C7944BD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7929C820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000027C793AD820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7929C820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000027C7BE4CB80>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000027C793ADCA0>
          └ <function wrap_app_handling_exceptions at 0x0000027C7949D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7921B1F0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000027C793ADCA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000027C7BE4CB80>
                     └ <function get_request_handler.<locals>.app at 0x0000027C793AD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000027C7944A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000027C7BE4CA30>}
                 │         └ <function page at 0x0000027C7BE27EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000027C793B73D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 67, in page
    return SuccessExtra(data=data, total=total)
           │                 │           └ 6
           │                 └ [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user.User object at 0x0000027C7BEE30A0>}...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user....
    │           │    └ <function JSONResponse.render at 0x0000027C79572820>
    │           └ <app.utils.responses.SuccessExtra object at 0x0000027C7BE87340>
    └ <app.utils.responses.SuccessExtra object at 0x0000027C7BE87340>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x0000027C78452DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user....
             │    └ <function JSONEncoder.iterencode at 0x0000027C78452D30>
             └ <json.encoder.JSONEncoder object at 0x0000027C7BEBAE50>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user....
           └ <_json.Encoder object at 0x0000027C7BEE5820>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type User is not JSON serializable
2024-03-09 22:27:34.625 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x0000027C767C94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x0000027C766985E0>
           └ <SpawnProcess name='SpawnProcess-7' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000027C766A3C10>
    └ <SpawnProcess name='SpawnProcess-7' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000027C767DE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=17920 started>
    │    └ <function subprocess_started at 0x0000027C786F3EE0>
    └ <SpawnProcess name='SpawnProcess-7' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=396, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000027C767DE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=396, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000027C786F30D0>
           │       │   └ <uvicorn.server.Server object at 0x0000027C767DE460>
           │       └ <function run at 0x0000027C7838C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000027C79888340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000027C7838D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000027C7838D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000027C783914C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000027C782FE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000027C7BEDCB50>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000027C7BEDCB50>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000027C7BEDCB50>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000027C7BEDCB50>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027C798BAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027C7B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000027C79022FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027C798BAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027C7B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027C7B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000027C7BE4C220>
          └ <fastapi.applications.FastAPI object at 0x0000027C79022FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027C78CA49D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027C7BE4C130>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000027C7BE4C220>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027C78CA49D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000027C7BE38F70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027C7BE4C130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027C78CA49D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000027C7BEBAF70>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000027C7BDBEA30>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000027C7BE38F70>
          └ <function wrap_app_handling_exceptions at 0x0000027C7949D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7929C820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000027C7BDBEA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7929C820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000027C7BDBEA30>>
          └ <fastapi.routing.APIRouter object at 0x0000027C7BDBEA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7929C820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000027C7944BD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7929C820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000027C793AD820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7929C820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000027C7BE4CB80>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000027C793ADCA0>
          └ <function wrap_app_handling_exceptions at 0x0000027C7949D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000027C7921B1F0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000027C793ADCA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000027C7BE4CB80>
                     └ <function get_request_handler.<locals>.app at 0x0000027C793AD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000027C7944A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000027C7BE4CA30>}
                 │         └ <function page at 0x0000027C7BE27EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000027C793B73D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 67, in page
    return SuccessExtra(data=data, total=total)
           │                 │           └ 6
           │                 └ [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user.User object at 0x0000027C7BEE30A0>}...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user....
    │           │    └ <function JSONResponse.render at 0x0000027C79572820>
    │           └ <app.utils.responses.SuccessExtra object at 0x0000027C7BE87340>
    └ <app.utils.responses.SuccessExtra object at 0x0000027C7BE87340>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x0000027C78452DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user....
             │    └ <function JSONEncoder.iterencode at 0x0000027C78452D30>
             └ <json.encoder.JSONEncoder object at 0x0000027C7BEBAE50>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000027C7BE87490>}, {'User': <app.models.user....
           └ <_json.Encoder object at 0x0000027C7BEE5820>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type User is not JSON serializable
2024-03-09 22:31:05.139 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 404
               │     └ 3
               └ <function _main at 0x0000020292A294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 404
           │    └ <function BaseProcess._bootstrap at 0x00000202929285E0>
           └ <SpawnProcess name='SpawnProcess-8' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000020292933C10>
    └ <SpawnProcess name='SpawnProcess-8' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000020292A3E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-8' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-8' parent=17920 started>
    │    └ <function subprocess_started at 0x0000020294944EE0>
    └ <SpawnProcess name='SpawnProcess-8' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000020292A3E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000202949440D0>
           │       │   └ <uvicorn.server.Server object at 0x0000020292A3E460>
           │       └ <function run at 0x00000202945DC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000020295ADB340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000202945DD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000202945DD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000202945E04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002029454E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000202981116A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000202981116A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000202981116A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000202981116A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000020295B13AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020298...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000020295272FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000020295B13AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020298...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020298...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020298098250>
          └ <fastapi.applications.FastAPI object at 0x0000020295272FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020294EF39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000202980981F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020298098250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020294EF39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020298085EE0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000202980981F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020294EF39D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000202980D7040>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002029800FA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020298085EE0>
          └ <function wrap_app_handling_exceptions at 0x00000202956EE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FD9D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002029800FA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FD9D0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002029800FA00>>
          └ <fastapi.routing.APIRouter object at 0x000002029800FA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FD9D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002029569FD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FD9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000202955FD820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FD9D0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000202980D72B0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000202955FD940>
          └ <function wrap_app_handling_exceptions at 0x00000202956EE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FDDC0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000202955FD940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000202980D72B0>
                     └ <function get_request_handler.<locals>.app at 0x00000202955FD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000202956928B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000202980D7640>}
                 │         └ <function page at 0x0000020298076EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000020295608400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=data, total=total)
           │                 │           └ 6
           │                 └ [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user.User object at 0x0000020298111A90>}...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user....
    │           │    └ <function JSONResponse.render at 0x00000202957B3820>
    │           └ <app.utils.responses.SuccessExtra object at 0x00000202980D7E20>
    └ <app.utils.responses.SuccessExtra object at 0x00000202980D7E20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x00000202946A1DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user....
             │    └ <function JSONEncoder.iterencode at 0x00000202946A1D30>
             └ <json.encoder.JSONEncoder object at 0x00000202980D7DF0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user....
           └ <_json.Encoder object at 0x00000202980E7D60>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type User is not JSON serializable
2024-03-09 22:31:05.176 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 404
               │     └ 3
               └ <function _main at 0x0000020292A294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 404
           │    └ <function BaseProcess._bootstrap at 0x00000202929285E0>
           └ <SpawnProcess name='SpawnProcess-8' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000020292933C10>
    └ <SpawnProcess name='SpawnProcess-8' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000020292A3E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-8' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-8' parent=17920 started>
    │    └ <function subprocess_started at 0x0000020294944EE0>
    └ <SpawnProcess name='SpawnProcess-8' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000020292A3E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000202949440D0>
           │       │   └ <uvicorn.server.Server object at 0x0000020292A3E460>
           │       └ <function run at 0x00000202945DC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000020295ADB340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000202945DD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000202945DD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000202945E04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002029454E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000202981116A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000202981116A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000202981116A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000202981116A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000020295B13AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020298...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000020295272FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000020295B13AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020298...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020298...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020298098250>
          └ <fastapi.applications.FastAPI object at 0x0000020295272FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020294EF39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000202980981F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020298098250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020294EF39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020298085EE0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000202980981F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020294EF39D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000202980D7040>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002029800FA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020298085EE0>
          └ <function wrap_app_handling_exceptions at 0x00000202956EE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FD9D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002029800FA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FD9D0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002029800FA00>>
          └ <fastapi.routing.APIRouter object at 0x000002029800FA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FD9D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002029569FD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FD9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000202955FD820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FD9D0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000202980D72B0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000202955FD940>
          └ <function wrap_app_handling_exceptions at 0x00000202956EE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000202955FDDC0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000202955FD940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000202980D72B0>
                     └ <function get_request_handler.<locals>.app at 0x00000202955FD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000202956928B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000202980D7640>}
                 │         └ <function page at 0x0000020298076EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000020295608400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=data, total=total)
           │                 │           └ 6
           │                 └ [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user.User object at 0x0000020298111A90>}...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user....
    │           │    └ <function JSONResponse.render at 0x00000202957B3820>
    │           └ <app.utils.responses.SuccessExtra object at 0x00000202980D7E20>
    └ <app.utils.responses.SuccessExtra object at 0x00000202980D7E20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x00000202946A1DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user....
             │    └ <function JSONEncoder.iterencode at 0x00000202946A1D30>
             └ <json.encoder.JSONEncoder object at 0x00000202980D7DF0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000020298111A60>}, {'User': <app.models.user....
           └ <_json.Encoder object at 0x00000202980E7D60>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type User is not JSON serializable
2024-03-09 22:31:31.484 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 364
               │     └ 3
               └ <function _main at 0x000001F964D994C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 364
           │    └ <function BaseProcess._bootstrap at 0x000001F964C885E0>
           └ <SpawnProcess name='SpawnProcess-9' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F964C93C10>
    └ <SpawnProcess name='SpawnProcess-9' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F964DAE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=17920 started>
    │    └ <function subprocess_started at 0x000001F966CC4EE0>
    └ <SpawnProcess name='SpawnProcess-9' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=396, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F964DAE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=396, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001F966CC40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001F964DAE460>
           │       └ <function run at 0x000001F96695C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F967E58340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F96695D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F96695D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F9669604C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F9668CE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001F96A4A16A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001F96A4A16A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001F96A4A16A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001F96A4A16A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F967E8FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F96A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F9675F2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F967E8FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F96A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F96A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F96A4281F0>
          └ <fastapi.applications.FastAPI object at 0x000001F9675F2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F9672739D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F96A415EB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F96A4281F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F9672739D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F96A415FA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F96A415EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F9672739D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001F96A467040>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001F96A39FA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F96A415FA0>
          └ <function wrap_app_handling_exceptions at 0x000001F967A4B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799C9D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001F96A39FA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799C9D0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001F96A39FA00>>
          └ <fastapi.routing.APIRouter object at 0x000001F96A39FA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799C9D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001F967A25D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799C9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001F96799C820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799C9D0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001F96A4672B0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001F96799C940>
          └ <function wrap_app_handling_exceptions at 0x000001F967A4B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799CCA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001F96799C940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F96A4672B0>
                     └ <function get_request_handler.<locals>.app at 0x000001F96799C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001F967A268B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001F96A467640>}
                 │         └ <function page at 0x000001F96A406EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001F967985400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=list_user, total=total)
           │                 │                └ 6
           │                 └ [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user.User object at 0x000001F96A4A1A90>}...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user....
    │           │    └ <function JSONResponse.render at 0x000001F967B34820>
    │           └ <app.utils.responses.SuccessExtra object at 0x000001F96A467E20>
    └ <app.utils.responses.SuccessExtra object at 0x000001F96A467E20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x000001F966A22DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user....
             │    └ <function JSONEncoder.iterencode at 0x000001F966A22D30>
             └ <json.encoder.JSONEncoder object at 0x000001F96A467DF0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user....
           └ <_json.Encoder object at 0x000001F96A477CA0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type User is not JSON serializable
2024-03-09 22:31:31.519 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 364
               │     └ 3
               └ <function _main at 0x000001F964D994C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 364
           │    └ <function BaseProcess._bootstrap at 0x000001F964C885E0>
           └ <SpawnProcess name='SpawnProcess-9' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F964C93C10>
    └ <SpawnProcess name='SpawnProcess-9' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F964DAE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=17920 started>
    │    └ <function subprocess_started at 0x000001F966CC4EE0>
    └ <SpawnProcess name='SpawnProcess-9' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=396, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F964DAE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=396, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001F966CC40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001F964DAE460>
           │       └ <function run at 0x000001F96695C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F967E58340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F96695D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F96695D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F9669604C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F9668CE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001F96A4A16A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001F96A4A16A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001F96A4A16A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001F96A4A16A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F967E8FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F96A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F9675F2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F967E8FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F96A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F96A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F96A4281F0>
          └ <fastapi.applications.FastAPI object at 0x000001F9675F2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F9672739D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F96A415EB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F96A4281F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F9672739D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F96A415FA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F96A415EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F9672739D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001F96A467040>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001F96A39FA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F96A415FA0>
          └ <function wrap_app_handling_exceptions at 0x000001F967A4B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799C9D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001F96A39FA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799C9D0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001F96A39FA00>>
          └ <fastapi.routing.APIRouter object at 0x000001F96A39FA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799C9D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001F967A25D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799C9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001F96799C820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799C9D0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001F96A4672B0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001F96799C940>
          └ <function wrap_app_handling_exceptions at 0x000001F967A4B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F96799CCA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001F96799C940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F96A4672B0>
                     └ <function get_request_handler.<locals>.app at 0x000001F96799C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001F967A268B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001F96A467640>}
                 │         └ <function page at 0x000001F96A406EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001F967985400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=list_user, total=total)
           │                 │                └ 6
           │                 └ [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user.User object at 0x000001F96A4A1A90>}...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user....
    │           │    └ <function JSONResponse.render at 0x000001F967B34820>
    │           └ <app.utils.responses.SuccessExtra object at 0x000001F96A467E20>
    └ <app.utils.responses.SuccessExtra object at 0x000001F96A467E20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x000001F966A22DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user....
             │    └ <function JSONEncoder.iterencode at 0x000001F966A22D30>
             └ <json.encoder.JSONEncoder object at 0x000001F96A467DF0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x000001F96A4A1A60>}, {'User': <app.models.user....
           └ <_json.Encoder object at 0x000001F96A477CA0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type User is not JSON serializable
2024-03-09 22:31:52.587 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 408
               │     └ 3
               └ <function _main at 0x00000281533D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 408
           │    └ <function BaseProcess._bootstrap at 0x00000281532A85E0>
           └ <SpawnProcess name='SpawnProcess-10' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000281532B3C10>
    └ <SpawnProcess name='SpawnProcess-10' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000281533EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=17920 started>
    │    └ <function subprocess_started at 0x0000028155304EE0>
    └ <SpawnProcess name='SpawnProcess-10' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000281533EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000281553040D0>
           │       │   └ <uvicorn.server.Server object at 0x00000281533EE460>
           │       └ <function run at 0x0000028154F9C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000028156499340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000028154F9D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000028154F9D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000028154FA04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000028154F0E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000028158AD2490>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000028158AD2490>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000028158AD2490>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000028158AD2490>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000281564CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028158...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000028155C32FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000281564CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028158...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028158...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028158A46A30>
          └ <fastapi.applications.FastAPI object at 0x0000028155C32FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000281558B39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028158A46F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028158A46A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000281558B39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028158A46FA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028158A46F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000281558B39D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000028158A60E20>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000281589CFA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028158A46FA0>
          └ <function wrap_app_handling_exceptions at 0x0000028156084790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000281589CFA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0040>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000281589CFA00>>
          └ <fastapi.routing.APIRouter object at 0x00000281589CFA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002815605DD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000028155FC0820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0040>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000028158A60FA0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000028155FC08B0>
          └ <function wrap_app_handling_exceptions at 0x0000028156084790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000028155FC08B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000028158A60FA0>
                     └ <function get_request_handler.<locals>.app at 0x0000028155FC0790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002815606B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000028158A97430>}
                 │         └ <function page at 0x0000028158A36EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000028155FC5400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 69, in page
    return SuccessExtra(data=list_user, total=total)
           │                 │                └ 6
           │                 └ [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user.User object at 0x0000028158AD2880>}...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user....
    │           │    └ <function JSONResponse.render at 0x0000028156171820>
    │           └ <app.utils.responses.SuccessExtra object at 0x0000028158A97D60>
    └ <app.utils.responses.SuccessExtra object at 0x0000028158A97D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x0000028155061DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user....
             │    └ <function JSONEncoder.iterencode at 0x0000028155061D30>
             └ <json.encoder.JSONEncoder object at 0x0000028158A97C70>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user....
           └ <_json.Encoder object at 0x0000028158AD4700>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type User is not JSON serializable
2024-03-09 22:31:52.627 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 408
               │     └ 3
               └ <function _main at 0x00000281533D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 408
           │    └ <function BaseProcess._bootstrap at 0x00000281532A85E0>
           └ <SpawnProcess name='SpawnProcess-10' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000281532B3C10>
    └ <SpawnProcess name='SpawnProcess-10' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000281533EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-10' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-10' parent=17920 started>
    │    └ <function subprocess_started at 0x0000028155304EE0>
    └ <SpawnProcess name='SpawnProcess-10' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000281533EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000281553040D0>
           │       │   └ <uvicorn.server.Server object at 0x00000281533EE460>
           │       └ <function run at 0x0000028154F9C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000028156499340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000028154F9D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000028154F9D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000028154FA04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000028154F0E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000028158AD2490>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000028158AD2490>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000028158AD2490>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000028158AD2490>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000281564CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028158...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000028155C32FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000281564CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028158...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028158...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028158A46A30>
          └ <fastapi.applications.FastAPI object at 0x0000028155C32FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000281558B39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028158A46F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028158A46A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000281558B39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028158A46FA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028158A46F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000281558B39D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000028158A60E20>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000281589CFA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028158A46FA0>
          └ <function wrap_app_handling_exceptions at 0x0000028156084790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000281589CFA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0040>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000281589CFA00>>
          └ <fastapi.routing.APIRouter object at 0x00000281589CFA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002815605DD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000028155FC0820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0040>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000028158A60FA0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000028155FC08B0>
          └ <function wrap_app_handling_exceptions at 0x0000028156084790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028155FC0C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000028155FC08B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000028158A60FA0>
                     └ <function get_request_handler.<locals>.app at 0x0000028155FC0790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002815606B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000028158A97430>}
                 │         └ <function page at 0x0000028158A36EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000028155FC5400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 69, in page
    return SuccessExtra(data=list_user, total=total)
           │                 │                └ 6
           │                 └ [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user.User object at 0x0000028158AD2880>}...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user....

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user....
    │           │    └ <function JSONResponse.render at 0x0000028156171820>
    │           └ <app.utils.responses.SuccessExtra object at 0x0000028158A97D60>
    └ <app.utils.responses.SuccessExtra object at 0x0000028158A97D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x0000028155061DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user....
             │    └ <function JSONEncoder.iterencode at 0x0000028155061D30>
             └ <json.encoder.JSONEncoder object at 0x0000028158A97C70>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'User': <app.models.user.User object at 0x0000028158AD2850>}, {'User': <app.models.user....
           └ <_json.Encoder object at 0x0000028158AD4700>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type User is not JSON serializable
2024-03-09 22:41:33.524 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 22:41:33.526 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 22:53:52.162 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x000001C5690594C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x000001C568F585E0>
           └ <SpawnProcess name='SpawnProcess-17' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C568F63C10>
    └ <SpawnProcess name='SpawnProcess-17' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C56906E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17920 started>
    │    └ <function subprocess_started at 0x000001C56AF73EE0>
    └ <SpawnProcess name='SpawnProcess-17' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=824, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C56906E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=824, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C56AF730D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C56906E460>
           │       └ <function run at 0x000001C56AC0C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C56C109340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C56AC0D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C56AC0D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C56AC104C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C56AB7E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C56E73F610>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001C56E73F610>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001C56E73F610>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C56E73F610>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C56C13FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C56E...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C56B8A2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C56C13FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C56E...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C56E...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C56E6D3250>
          └ <fastapi.applications.FastAPI object at 0x000001C56B8A2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C56BC498B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C56E6C7EB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C56E6D3250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C56BC498B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C56E6C7FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C56E6C7EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C56BC498B0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C56E6D3D90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C56E64EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C56E6C7FD0>
          └ <function wrap_app_handling_exceptions at 0x000001C56BD1E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56BC49940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C56E64EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56BC49940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C56E64EA00>>
          └ <fastapi.routing.APIRouter object at 0x000001C56E64EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56BC49940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C56BCCBD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56BC49940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C56BC49820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56BC49940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C56E6D3F70>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C56BC499D0>
          └ <function wrap_app_handling_exceptions at 0x000001C56BD1E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56E6B69D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C56BC499D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C56E6D3F70>
                     └ <function get_request_handler.<locals>.app at 0x000001C56BC49790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001C56BCC28B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001C56E6F3430>}
                 │         └ <function page at 0x000001C56E6B6EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001C56BC36400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=list_user, total=total)
           │                 │                └ 5
           │                 └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
    │           │    └ <function JSONResponse.render at 0x000001C56BDE4820>
    │           └ <app.utils.responses.SuccessExtra object at 0x000001C56E6D3070>
    └ <app.utils.responses.SuccessExtra object at 0x000001C56E6D3070>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x000001C56ACD1DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
             │    └ <function JSONEncoder.iterencode at 0x000001C56ACD1D30>
             └ <json.encoder.JSONEncoder object at 0x000001C56E7147C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
           └ <_json.Encoder object at 0x000001C56E747D00>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type datetime is not JSON serializable
2024-03-09 22:53:52.209 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x000001C5690594C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x000001C568F585E0>
           └ <SpawnProcess name='SpawnProcess-17' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C568F63C10>
    └ <SpawnProcess name='SpawnProcess-17' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C56906E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=17920 started>
    │    └ <function subprocess_started at 0x000001C56AF73EE0>
    └ <SpawnProcess name='SpawnProcess-17' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=824, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C56906E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=824, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C56AF730D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C56906E460>
           │       └ <function run at 0x000001C56AC0C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C56C109340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C56AC0D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C56AC0D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C56AC104C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C56AB7E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C56E73F610>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001C56E73F610>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001C56E73F610>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C56E73F610>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C56C13FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C56E...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C56B8A2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C56C13FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C56E...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C56E...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C56E6D3250>
          └ <fastapi.applications.FastAPI object at 0x000001C56B8A2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C56BC498B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C56E6C7EB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C56E6D3250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C56BC498B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C56E6C7FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C56E6C7EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C56BC498B0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C56E6D3D90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C56E64EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C56E6C7FD0>
          └ <function wrap_app_handling_exceptions at 0x000001C56BD1E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56BC49940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C56E64EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56BC49940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C56E64EA00>>
          └ <fastapi.routing.APIRouter object at 0x000001C56E64EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56BC49940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C56BCCBD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56BC49940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C56BC49820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56BC49940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C56E6D3F70>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C56BC499D0>
          └ <function wrap_app_handling_exceptions at 0x000001C56BD1E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C56E6B69D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C56BC499D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C56E6D3F70>
                     └ <function get_request_handler.<locals>.app at 0x000001C56BC49790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001C56BCC28B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001C56E6F3430>}
                 │         └ <function page at 0x000001C56E6B6EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001C56BC36400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=list_user, total=total)
           │                 │                └ 5
           │                 └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
    │           │    └ <function JSONResponse.render at 0x000001C56BDE4820>
    │           └ <app.utils.responses.SuccessExtra object at 0x000001C56E6D3070>
    └ <app.utils.responses.SuccessExtra object at 0x000001C56E6D3070>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x000001C56ACD1DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
             │    └ <function JSONEncoder.iterencode at 0x000001C56ACD1D30>
             └ <json.encoder.JSONEncoder object at 0x000001C56E7147C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
           └ <_json.Encoder object at 0x000001C56E747D00>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type datetime is not JSON serializable
2024-03-09 22:54:32.314 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 388
               │     └ 3
               └ <function _main at 0x000001BF8FAD94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 388
           │    └ <function BaseProcess._bootstrap at 0x000001BF8F8D45E0>
           └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001BF8F8D3C10>
    └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001BF8FAEE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>
    │    └ <function subprocess_started at 0x000001BF91A03EE0>
    └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=784, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001BF8FAEE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=784, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001BF91A030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001BF8FAEE460>
           │       └ <function run at 0x000001BF9169C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001BF92B98340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001BF9169D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001BF9169D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001BF916A04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001BF9160E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C42B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C42B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C42B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C42B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BF92BCFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001BF92332FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BF92BCFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BF95147E50>
          └ <fastapi.applications.FastAPI object at 0x000001BF92332FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF91FB39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BF95147F40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BF95147E50>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF91FB39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BF95147FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BF95147F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF91FB39D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001BF95162DC0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BF95147FD0>
          └ <function wrap_app_handling_exceptions at 0x000001BF927AD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DB040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DB040>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001BF950CEA00>>
          └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DB040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001BF9275BD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DB040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001BF926DB820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DB040>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001BF95162FD0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001BF926DB8B0>
          └ <function wrap_app_handling_exceptions at 0x000001BF927AD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DBC10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001BF926DB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001BF95162FD0>
                     └ <function get_request_handler.<locals>.app at 0x000001BF926DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001BF9275A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001BF95197400>}
                 │         └ <function page at 0x000001BF95136EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001BF926CA3D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=data, total=total)
           │                 │           └ 5
           │                 └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
    │           │    └ <function JSONResponse.render at 0x000001BF92882820>
    │           └ <app.utils.responses.SuccessExtra object at 0x000001BF951AAFD0>
    └ <app.utils.responses.SuccessExtra object at 0x000001BF951AAFD0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x000001BF91761DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
             │    └ <function JSONEncoder.iterencode at 0x000001BF91761D30>
             └ <json.encoder.JSONEncoder object at 0x000001BF95197BB0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
           └ <_json.Encoder object at 0x000001BF951C2B20>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type datetime is not JSON serializable
2024-03-09 22:54:32.371 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 388
               │     └ 3
               └ <function _main at 0x000001BF8FAD94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 388
           │    └ <function BaseProcess._bootstrap at 0x000001BF8F8D45E0>
           └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001BF8F8D3C10>
    └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001BF8FAEE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>
    │    └ <function subprocess_started at 0x000001BF91A03EE0>
    └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=784, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001BF8FAEE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=784, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001BF91A030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001BF8FAEE460>
           │       └ <function run at 0x000001BF9169C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001BF92B98340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001BF9169D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001BF9169D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001BF916A04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001BF9160E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C42B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C42B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C42B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C42B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BF92BCFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001BF92332FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BF92BCFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BF95147E50>
          └ <fastapi.applications.FastAPI object at 0x000001BF92332FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF91FB39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BF95147F40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BF95147E50>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF91FB39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BF95147FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BF95147F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF91FB39D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001BF95162DC0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BF95147FD0>
          └ <function wrap_app_handling_exceptions at 0x000001BF927AD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DB040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DB040>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001BF950CEA00>>
          └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DB040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001BF9275BD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DB040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001BF926DB820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DB040>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001BF95162FD0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001BF926DB8B0>
          └ <function wrap_app_handling_exceptions at 0x000001BF927AD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF926DBC10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001BF926DB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001BF95162FD0>
                     └ <function get_request_handler.<locals>.app at 0x000001BF926DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001BF9275A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001BF95197400>}
                 │         └ <function page at 0x000001BF95136EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001BF926CA3D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=data, total=total)
           │                 │           └ 5
           │                 └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
    │           │    └ <function JSONResponse.render at 0x000001BF92882820>
    │           └ <app.utils.responses.SuccessExtra object at 0x000001BF951AAFD0>
    └ <app.utils.responses.SuccessExtra object at 0x000001BF951AAFD0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x000001BF91761DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
             │    └ <function JSONEncoder.iterencode at 0x000001BF91761D30>
             └ <json.encoder.JSONEncoder object at 0x000001BF95197BB0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
           └ <_json.Encoder object at 0x000001BF951C2B20>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type datetime is not JSON serializable
2024-03-09 22:55:18.763 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 388
               │     └ 3
               └ <function _main at 0x000001BF8FAD94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 388
           │    └ <function BaseProcess._bootstrap at 0x000001BF8F8D45E0>
           └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001BF8F8D3C10>
    └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001BF8FAEE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>
    │    └ <function subprocess_started at 0x000001BF91A03EE0>
    └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001BF8FAEE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>]
           │       │   │    └ <function Server.serve at 0x000001BF91A030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001BF8FAEE460>
           │       └ <function run at 0x000001BF9169C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001BF92B98340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001BF9169D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001BF9169D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001BF916A04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001BF9160E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C4370>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C4370>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C4370>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C4370>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BF92BCFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001BF92332FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BF92BCFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BF95147E50>
          └ <fastapi.applications.FastAPI object at 0x000001BF92332FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF926DB1F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BF95147F40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BF95147E50>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF926DB1F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BF95147FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BF95147F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF926DB1F0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001BF951C4430>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BF95147FD0>
          └ <function wrap_app_handling_exceptions at 0x000001BF927AD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328C10>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001BF950CEA00>>
          └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328C10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001BF9275BD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001BF926DB820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328C10>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001BF951C4670>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001BF95328DC0>
          └ <function wrap_app_handling_exceptions at 0x000001BF927AD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001BF95328DC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001BF951C4670>
                     └ <function get_request_handler.<locals>.app at 0x000001BF926DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001BF9275A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001BF951C4A60>}
                 │         └ <function page at 0x000001BF95136EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001BF926CA3D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=data, total=total)
           │                 │           └ 5
           │                 └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
    │           │    └ <function JSONResponse.render at 0x000001BF92882820>
    │           └ <app.utils.responses.SuccessExtra object at 0x000001BF951AA3D0>
    └ <app.utils.responses.SuccessExtra object at 0x000001BF951AA3D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x000001BF91761DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
             │    └ <function JSONEncoder.iterencode at 0x000001BF91761D30>
             └ <json.encoder.JSONEncoder object at 0x000001BF951C4C70>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
           └ <_json.Encoder object at 0x000001BF9533ACA0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type datetime is not JSON serializable
2024-03-09 22:55:18.791 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 388
               │     └ 3
               └ <function _main at 0x000001BF8FAD94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 388
           │    └ <function BaseProcess._bootstrap at 0x000001BF8F8D45E0>
           └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001BF8F8D3C10>
    └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001BF8FAEE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>
    │    └ <function subprocess_started at 0x000001BF91A03EE0>
    └ <SpawnProcess name='SpawnProcess-18' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001BF8FAEE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>]
           │       │   │    └ <function Server.serve at 0x000001BF91A030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001BF8FAEE460>
           │       └ <function run at 0x000001BF9169C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001BF92B98340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001BF9169D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001BF9169D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001BF916A04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001BF9160E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C4370>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C4370>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C4370>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BF951C4370>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BF92BCFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001BF92332FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BF92BCFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BF95...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BF95147E50>
          └ <fastapi.applications.FastAPI object at 0x000001BF92332FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF926DB1F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BF95147F40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BF95147E50>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF926DB1F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BF95147FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BF95147F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BF926DB1F0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001BF951C4430>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BF95147FD0>
          └ <function wrap_app_handling_exceptions at 0x000001BF927AD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328C10>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001BF950CEA00>>
          └ <fastapi.routing.APIRouter object at 0x000001BF950CEA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328C10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001BF9275BD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001BF926DB820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328C10>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001BF951C4670>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001BF95328DC0>
          └ <function wrap_app_handling_exceptions at 0x000001BF927AD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BF95328CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001BF95328DC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001BF951C4670>
                     └ <function get_request_handler.<locals>.app at 0x000001BF926DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001BF9275A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001BF951C4A60>}
                 │         └ <function page at 0x000001BF95136EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001BF926CA3D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=data, total=total)
           │                 │           └ 5
           │                 └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
    │           │    └ <function JSONResponse.render at 0x000001BF92882820>
    │           └ <app.utils.responses.SuccessExtra object at 0x000001BF951AA3D0>
    └ <app.utils.responses.SuccessExtra object at 0x000001BF951AA3D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x000001BF91761DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
             │    └ <function JSONEncoder.iterencode at 0x000001BF91761D30>
             └ <json.encoder.JSONEncoder object at 0x000001BF951C4C70>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email'...
           └ <_json.Encoder object at 0x000001BF9533ACA0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type datetime is not JSON serializable
2024-03-09 22:58:53.245 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x000001DBCA0A84C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x000001DBC9F885E0>
           └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001DBC9F93C10>
    └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001DBCA0BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>
    │    └ <function subprocess_started at 0x000001DBCBFD3EE0>
    └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001DBCA0BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001DBCBFD30D0>
           │       │   └ <uvicorn.server.Server object at 0x000001DBCA0BE460>
           │       └ <function run at 0x000001DBCBC6C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001DBCD168340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001DBCBC6D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001DBCBC6D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001DBCBC704C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001DBCBBDE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF7656A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF7656A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF7656A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF7656A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DBCD19DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001DBCC902FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DBCD19DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DBCF727250>
          └ <fastapi.applications.FastAPI object at 0x000001DBCC902FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCCCAA8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DBCF718F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DBCF727250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCCCAA8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DBCF718EB0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DBCF718F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCCCAA8B0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001DBCF727D90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DBCF718EB0>
          └ <function wrap_app_handling_exceptions at 0x000001DBCCD7D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCAA940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCAA940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>>
          └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCAA940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001DBCCD28D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCAA940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001DBCCCAA820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCAA940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001DBCF727F70>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001DBCCCAA9D0>
          └ <function wrap_app_handling_exceptions at 0x000001DBCCD7D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCF7089D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001DBCCCAA9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001DBCF727F70>
                     └ <function get_request_handler.<locals>.app at 0x000001DBCCCAA790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001DBCCD3A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001DBCF743430>}
                 │         └ <function page at 0x000001DBCF708EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001DBCCC99400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: list_user, total: total}
            │     │          │      └ 0
            │     │          └ 0
            │     └ []
            └ []

TypeError: unhashable type: 'list'
2024-03-09 22:58:53.275 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x000001DBCA0A84C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x000001DBC9F885E0>
           └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001DBC9F93C10>
    └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001DBCA0BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>
    │    └ <function subprocess_started at 0x000001DBCBFD3EE0>
    └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001DBCA0BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001DBCBFD30D0>
           │       │   └ <uvicorn.server.Server object at 0x000001DBCA0BE460>
           │       └ <function run at 0x000001DBCBC6C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001DBCD168340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001DBCBC6D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001DBCBC6D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001DBCBC704C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001DBCBBDE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF7656A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF7656A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF7656A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF7656A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DBCD19DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001DBCC902FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DBCD19DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DBCF727250>
          └ <fastapi.applications.FastAPI object at 0x000001DBCC902FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCCCAA8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DBCF718F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DBCF727250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCCCAA8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DBCF718EB0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DBCF718F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCCCAA8B0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001DBCF727D90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DBCF718EB0>
          └ <function wrap_app_handling_exceptions at 0x000001DBCCD7D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCAA940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCAA940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>>
          └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCAA940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001DBCCD28D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCAA940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001DBCCCAA820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCAA940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001DBCF727F70>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001DBCCCAA9D0>
          └ <function wrap_app_handling_exceptions at 0x000001DBCCD7D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCF7089D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001DBCCCAA9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001DBCF727F70>
                     └ <function get_request_handler.<locals>.app at 0x000001DBCCCAA790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001DBCCD3A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001DBCF743430>}
                 │         └ <function page at 0x000001DBCF708EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001DBCCC99400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: list_user, total: total}
            │     │          │      └ 0
            │     │          └ 0
            │     └ []
            └ []

TypeError: unhashable type: 'list'
2024-03-09 22:58:58.105 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x000001DBCA0A84C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x000001DBC9F885E0>
           └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001DBC9F93C10>
    └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001DBCA0BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>
    │    └ <function subprocess_started at 0x000001DBCBFD3EE0>
    └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001DBCA0BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001DBCBFD30D0>
           │       │   └ <uvicorn.server.Server object at 0x000001DBCA0BE460>
           │       └ <function run at 0x000001DBCBC6C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001DBCD168340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001DBCBC6D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001DBCBC6D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001DBCBC704C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001DBCBBDE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF786490>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF786490>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF786490>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF786490>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DBCD19DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001DBCC902FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DBCD19DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DBCF727250>
          └ <fastapi.applications.FastAPI object at 0x000001DBCC902FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCC5849D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DBCF718F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DBCF727250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCC5849D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DBCF718EB0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DBCF718F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCC5849D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001DBCF786520>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DBCF718EB0>
          └ <function wrap_app_handling_exceptions at 0x000001DBCCD7D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCA0310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCA0310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>>
          └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCA0310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001DBCCD28D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCA0310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001DBCCCAA820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCA0310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001DBCF786730>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001DBCCAF4310>
          └ <function wrap_app_handling_exceptions at 0x000001DBCCD7D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCF8E9A60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001DBCCAF4310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001DBCF786730>
                     └ <function get_request_handler.<locals>.app at 0x000001DBCCCAA790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001DBCCD3A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001DBCF786BE0>}
                 │         └ <function page at 0x000001DBCF708EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001DBCCC99400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: list_user, total: total}
            │     │          │      └ 0
            │     │          └ 0
            │     └ []
            └ []

TypeError: unhashable type: 'list'
2024-03-09 22:58:58.124 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x000001DBCA0A84C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x000001DBC9F885E0>
           └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001DBC9F93C10>
    └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001DBCA0BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>
    │    └ <function subprocess_started at 0x000001DBCBFD3EE0>
    └ <SpawnProcess name='SpawnProcess-23' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001DBCA0BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001DBCBFD30D0>
           │       │   └ <uvicorn.server.Server object at 0x000001DBCA0BE460>
           │       └ <function run at 0x000001DBCBC6C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001DBCD168340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001DBCBC6D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001DBCBC6D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001DBCBC704C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001DBCBBDE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF786490>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF786490>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF786490>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DBCF786490>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DBCD19DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001DBCC902FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DBCD19DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DBCF...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DBCF727250>
          └ <fastapi.applications.FastAPI object at 0x000001DBCC902FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCC5849D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DBCF718F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DBCF727250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCC5849D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DBCF718EB0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DBCF718F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DBCC5849D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001DBCF786520>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DBCF718EB0>
          └ <function wrap_app_handling_exceptions at 0x000001DBCCD7D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCA0310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCA0310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>>
          └ <fastapi.routing.APIRouter object at 0x000001DBCF69DA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCA0310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001DBCCD28D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCA0310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001DBCCCAA820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCCCA0310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001DBCF786730>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001DBCCAF4310>
          └ <function wrap_app_handling_exceptions at 0x000001DBCCD7D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DBCF8E9A60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001DBCCAF4310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001DBCF786730>
                     └ <function get_request_handler.<locals>.app at 0x000001DBCCCAA790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001DBCCD3A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001DBCF786BE0>}
                 │         └ <function page at 0x000001DBCF708EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001DBCCC99400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: list_user, total: total}
            │     │          │      └ 0
            │     │          └ 0
            │     └ []
            └ []

TypeError: unhashable type: 'list'
2024-03-09 22:59:22.838 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x0000025AD2B294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x0000025AD2A085E0>
           └ <SpawnProcess name='SpawnProcess-24' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000025AD2A13C10>
    └ <SpawnProcess name='SpawnProcess-24' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000025AD2B3E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-24' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-24' parent=17920 started>
    │    └ <function subprocess_started at 0x0000025AD4A54EE0>
    └ <SpawnProcess name='SpawnProcess-24' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=452, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000025AD2B3E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=452, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000025AD4A540D0>
           │       │   └ <uvicorn.server.Server object at 0x0000025AD2B3E460>
           │       └ <function run at 0x0000025AD46EC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000025AD5BEB340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000025AD46ED9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000025AD46ED940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000025AD46F04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000025AD465E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000025AD81D8D90>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000025AD81D8D90>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000025AD81D8D90>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000025AD81D8D90>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025AD5C1EAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025AD8...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000025AD5382FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025AD5C1EAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025AD8...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025AD8...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025AD8195A60>
          └ <fastapi.applications.FastAPI object at 0x0000025AD5382FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025AD570DC10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025AD8195F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025AD8195A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025AD570DC10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025AD8195FA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025AD8195F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025AD570DC10>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000025AD81B1BB0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000025AD816B310>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025AD8195FA0>
          └ <function wrap_app_handling_exceptions at 0x0000025AD57D4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000025AD816B310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D8B0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000025AD816B310>>
          └ <fastapi.routing.APIRouter object at 0x0000025AD816B310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D8B0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000025AD57ADD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000025AD570D820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D8B0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000025AD81D8250>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000025AD570D040>
          └ <function wrap_app_handling_exceptions at 0x0000025AD57D4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000025AD570D040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000025AD81D8250>
                     └ <function get_request_handler.<locals>.app at 0x0000025AD570D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000025AD57B78B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000025AD81D8610>}
                 │         └ <function page at 0x0000025AD8186EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000025AD5718400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: str(list_user), total: total}
            │         │           │      └ 0
            │         │           └ 0
            │         └ []
            └ []

TypeError: unhashable type: 'list'
2024-03-09 22:59:22.890 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x0000025AD2B294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x0000025AD2A085E0>
           └ <SpawnProcess name='SpawnProcess-24' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000025AD2A13C10>
    └ <SpawnProcess name='SpawnProcess-24' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000025AD2B3E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-24' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-24' parent=17920 started>
    │    └ <function subprocess_started at 0x0000025AD4A54EE0>
    └ <SpawnProcess name='SpawnProcess-24' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=452, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000025AD2B3E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=452, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000025AD4A540D0>
           │       │   └ <uvicorn.server.Server object at 0x0000025AD2B3E460>
           │       └ <function run at 0x0000025AD46EC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000025AD5BEB340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000025AD46ED9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000025AD46ED940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000025AD46F04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000025AD465E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000025AD81D8D90>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000025AD81D8D90>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000025AD81D8D90>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000025AD81D8D90>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025AD5C1EAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025AD8...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000025AD5382FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025AD5C1EAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025AD8...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025AD8...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025AD8195A60>
          └ <fastapi.applications.FastAPI object at 0x0000025AD5382FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025AD570DC10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025AD8195F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025AD8195A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025AD570DC10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025AD8195FA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025AD8195F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025AD570DC10>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000025AD81B1BB0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000025AD816B310>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025AD8195FA0>
          └ <function wrap_app_handling_exceptions at 0x0000025AD57D4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000025AD816B310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D8B0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000025AD816B310>>
          └ <fastapi.routing.APIRouter object at 0x0000025AD816B310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D8B0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000025AD57ADD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000025AD570D820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D8B0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000025AD81D8250>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000025AD570D040>
          └ <function wrap_app_handling_exceptions at 0x0000025AD57D4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025AD570D940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000025AD570D040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000025AD81D8250>
                     └ <function get_request_handler.<locals>.app at 0x0000025AD570D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000025AD57B78B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000025AD81D8610>}
                 │         └ <function page at 0x0000025AD8186EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000025AD5718400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: str(list_user), total: total}
            │         │           │      └ 0
            │         │           └ 0
            │         └ []
            └ []

TypeError: unhashable type: 'list'
2024-03-09 22:59:54.755 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x000002A40D9594C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x000002A40D7485E0>
           └ <SpawnProcess name='SpawnProcess-25' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002A40D753C10>
    └ <SpawnProcess name='SpawnProcess-25' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002A40D96E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-25' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-25' parent=17920 started>
    │    └ <function subprocess_started at 0x000002A40F885EE0>
    └ <SpawnProcess name='SpawnProcess-25' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=584, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002A40D96E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=584, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002A40F8850D0>
           │       │   └ <uvicorn.server.Server object at 0x000002A40D96E460>
           │       └ <function run at 0x000002A40F51C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002A410A18340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002A40F51D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002A40F51D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002A40F5204C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002A40F48E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002A413003EB0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000002A413003EB0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000002A413003EB0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002A413003EB0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A410A4AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A412...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002A4101B2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A410A4AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A412...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A412...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A412FE7250>
          └ <fastapi.applications.FastAPI object at 0x000002A4101B2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A41055C8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A412FD7EB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A412FE7250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A41055C8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A412FD7FA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A412FD7EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A41055C8B0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002A412FE7D90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002A412F5DA30>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A412FD7FA0>
          └ <function wrap_app_handling_exceptions at 0x000002A41060B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A41055C940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002A412F5DA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A41055C940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002A412F5DA30>>
          └ <fastapi.routing.APIRouter object at 0x000002A412F5DA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A41055C940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002A4105E3D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A41055C940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002A41055C820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A41055C940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002A412FE7F70>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002A41055C9D0>
          └ <function wrap_app_handling_exceptions at 0x000002A41060B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A412FC89D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002A41055C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002A412FE7F70>
                     └ <function get_request_handler.<locals>.app at 0x000002A41055C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002A4105E78B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002A413003430>}
                 │         └ <function page at 0x000002A412FC8EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002A410545400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data, total: total}
            │     │     │      └ 5
            │     │     └ 5
            │     └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 22:59:54.798 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x000002A40D9594C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x000002A40D7485E0>
           └ <SpawnProcess name='SpawnProcess-25' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002A40D753C10>
    └ <SpawnProcess name='SpawnProcess-25' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002A40D96E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-25' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-25' parent=17920 started>
    │    └ <function subprocess_started at 0x000002A40F885EE0>
    └ <SpawnProcess name='SpawnProcess-25' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=584, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002A40D96E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=584, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002A40F8850D0>
           │       │   └ <uvicorn.server.Server object at 0x000002A40D96E460>
           │       └ <function run at 0x000002A40F51C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002A410A18340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002A40F51D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002A40F51D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002A40F5204C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002A40F48E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002A413003EB0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000002A413003EB0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000002A413003EB0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002A413003EB0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A410A4AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A412...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002A4101B2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002A410A4AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A412...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A412...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A412FE7250>
          └ <fastapi.applications.FastAPI object at 0x000002A4101B2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A41055C8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A412FD7EB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002A412FE7250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A41055C8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A412FD7FA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002A412FD7EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002A41055C8B0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002A412FE7D90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002A412F5DA30>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002A412FD7FA0>
          └ <function wrap_app_handling_exceptions at 0x000002A41060B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A41055C940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002A412F5DA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A41055C940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002A412F5DA30>>
          └ <fastapi.routing.APIRouter object at 0x000002A412F5DA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A41055C940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002A4105E3D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A41055C940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002A41055C820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A41055C940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002A412FE7F70>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002A41055C9D0>
          └ <function wrap_app_handling_exceptions at 0x000002A41060B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002A412FC89D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002A41055C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002A412FE7F70>
                     └ <function get_request_handler.<locals>.app at 0x000002A41055C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002A4105E78B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002A413003430>}
                 │         └ <function page at 0x000002A412FC8EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002A410545400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data, total: total}
            │     │     │      └ 5
            │     │     └ 5
            │     └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 23:00:15.015 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 404
               │     └ 3
               └ <function _main at 0x00000235AAE394C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 404
           │    └ <function BaseProcess._bootstrap at 0x00000235AAD285E0>
           └ <SpawnProcess name='SpawnProcess-26' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000235AAD33C10>
    └ <SpawnProcess name='SpawnProcess-26' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000235AAE4E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-26' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-26' parent=17920 started>
    │    └ <function subprocess_started at 0x00000235ACD63EE0>
    └ <SpawnProcess name='SpawnProcess-26' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=488, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000235AAE4E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=488, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000235ACD630D0>
           │       │   └ <uvicorn.server.Server object at 0x00000235AAE4E460>
           │       └ <function run at 0x00000235AC9FC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000235ADEF6340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000235AC9FD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000235AC9FD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000235ACA004C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000235AC96E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000235B04B73A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000235B04B73A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000235B04B73A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000235B04B73A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000235ADF2DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235B0...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000235AD692FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000235ADF2DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235B0...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235B0...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000235B04B72B0>
          └ <fastapi.applications.FastAPI object at 0x00000235AD692FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235ADA1C8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000235B04A7F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000235B04B72B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235ADA1C8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000235B04A7EB0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000235B04A7F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235ADA1C8B0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000235B04B7E20>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000235B042EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000235B04A7EB0>
          └ <function wrap_app_handling_exceptions at 0x00000235ADAE4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235ADA1C940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000235B042EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235ADA1C940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000235B042EA00>>
          └ <fastapi.routing.APIRouter object at 0x00000235B042EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235ADA1C940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000235ADABDD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235ADA1C940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000235ADA1C820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235ADA1C940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000235B04B7190>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000235ADA1C9D0>
          └ <function wrap_app_handling_exceptions at 0x00000235ADAE4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235B04969D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000235ADA1C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000235B04B7190>
                     └ <function get_request_handler.<locals>.app at 0x00000235ADA1C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000235ADACB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000235B04D3430>}
                 │         └ <function page at 0x00000235B0496EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000235ADA26400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: str(data), total: total}
            │         │      │      └ 5
            │         │      └ 5
            │         └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 23:00:15.050 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 404
               │     └ 3
               └ <function _main at 0x00000235AAE394C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 404
           │    └ <function BaseProcess._bootstrap at 0x00000235AAD285E0>
           └ <SpawnProcess name='SpawnProcess-26' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000235AAD33C10>
    └ <SpawnProcess name='SpawnProcess-26' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000235AAE4E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-26' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-26' parent=17920 started>
    │    └ <function subprocess_started at 0x00000235ACD63EE0>
    └ <SpawnProcess name='SpawnProcess-26' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=488, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000235AAE4E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=488, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000235ACD630D0>
           │       │   └ <uvicorn.server.Server object at 0x00000235AAE4E460>
           │       └ <function run at 0x00000235AC9FC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000235ADEF6340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000235AC9FD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000235AC9FD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000235ACA004C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000235AC96E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000235B04B73A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000235B04B73A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000235B04B73A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000235B04B73A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000235ADF2DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235B0...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000235AD692FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000235ADF2DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235B0...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235B0...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000235B04B72B0>
          └ <fastapi.applications.FastAPI object at 0x00000235AD692FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235ADA1C8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000235B04A7F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000235B04B72B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235ADA1C8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000235B04A7EB0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000235B04A7F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235ADA1C8B0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000235B04B7E20>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000235B042EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000235B04A7EB0>
          └ <function wrap_app_handling_exceptions at 0x00000235ADAE4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235ADA1C940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000235B042EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235ADA1C940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000235B042EA00>>
          └ <fastapi.routing.APIRouter object at 0x00000235B042EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235ADA1C940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000235ADABDD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235ADA1C940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000235ADA1C820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235ADA1C940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000235B04B7190>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000235ADA1C9D0>
          └ <function wrap_app_handling_exceptions at 0x00000235ADAE4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000235B04969D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000235ADA1C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000235B04B7190>
                     └ <function get_request_handler.<locals>.app at 0x00000235ADA1C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000235ADACB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000235B04D3430>}
                 │         └ <function page at 0x00000235B0496EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000235ADA26400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: str(data), total: total}
            │         │      │      └ 5
            │         │      └ 5
            │         └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 23:01:08.048 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 380
               │     └ 3
               └ <function _main at 0x00000204A50594C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 380
           │    └ <function BaseProcess._bootstrap at 0x00000204A4F385E0>
           └ <SpawnProcess name='SpawnProcess-27' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000204A4F43C10>
    └ <SpawnProcess name='SpawnProcess-27' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000204A506E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-27' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-27' parent=17920 started>
    │    └ <function subprocess_started at 0x00000204A6F84EE0>
    └ <SpawnProcess name='SpawnProcess-27' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000204A506E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000204A6F840D0>
           │       │   └ <uvicorn.server.Server object at 0x00000204A506E460>
           │       └ <function run at 0x00000204A6C1C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000204A8118340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000204A6C1D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000204A6C1D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000204A6C214C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000204A6B8E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000204AA6C8DF0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000204AA6C8DF0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000204AA6C8DF0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000204AA6C8DF0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000204A814DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000204AA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000204A78B2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000204A814DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000204AA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000204AA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000204AA6C8A30>
          └ <fastapi.applications.FastAPI object at 0x00000204A78B2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000204A7C3C9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000204AA6C8F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000204AA6C8A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000204A7C3C9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000204AA6C8F70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000204AA6C8F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000204A7C3C9D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000204AA6E2B80>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000204AA64EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000204AA6C8F70>
          └ <function wrap_app_handling_exceptions at 0x00000204A7D0B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000204AA64EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C8B0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000204AA64EA00>>
          └ <fastapi.routing.APIRouter object at 0x00000204AA64EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C8B0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000204A7CDBD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000204A7C3C820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C8B0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000204AA6E2DF0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000204A7C3C040>
          └ <function wrap_app_handling_exceptions at 0x00000204A7D0B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000204A7C3C040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000204AA6E2DF0>
                     └ <function get_request_handler.<locals>.app at 0x00000204A7C3C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000204A7CEA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000204AA6F2220>}
                 │         └ <function page at 0x00000204AA6B6EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000204A7C49400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data[0], total: total}
            │     │        │      └ 5
            │     │        └ 5
            │     └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 23:01:08.093 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 380
               │     └ 3
               └ <function _main at 0x00000204A50594C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 380
           │    └ <function BaseProcess._bootstrap at 0x00000204A4F385E0>
           └ <SpawnProcess name='SpawnProcess-27' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000204A4F43C10>
    └ <SpawnProcess name='SpawnProcess-27' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000204A506E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-27' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-27' parent=17920 started>
    │    └ <function subprocess_started at 0x00000204A6F84EE0>
    └ <SpawnProcess name='SpawnProcess-27' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000204A506E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000204A6F840D0>
           │       │   └ <uvicorn.server.Server object at 0x00000204A506E460>
           │       └ <function run at 0x00000204A6C1C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000204A8118340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000204A6C1D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000204A6C1D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000204A6C214C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000204A6B8E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000204AA6C8DF0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000204AA6C8DF0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000204AA6C8DF0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000204AA6C8DF0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000204A814DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000204AA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000204A78B2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000204A814DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000204AA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000204AA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000204AA6C8A30>
          └ <fastapi.applications.FastAPI object at 0x00000204A78B2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000204A7C3C9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000204AA6C8F10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000204AA6C8A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000204A7C3C9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000204AA6C8F70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000204AA6C8F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000204A7C3C9D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000204AA6E2B80>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000204AA64EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000204AA6C8F70>
          └ <function wrap_app_handling_exceptions at 0x00000204A7D0B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000204AA64EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C8B0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000204AA64EA00>>
          └ <fastapi.routing.APIRouter object at 0x00000204AA64EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C8B0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000204A7CDBD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000204A7C3C820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C8B0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000204AA6E2DF0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000204A7C3C040>
          └ <function wrap_app_handling_exceptions at 0x00000204A7D0B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000204A7C3C940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000204A7C3C040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000204AA6E2DF0>
                     └ <function get_request_handler.<locals>.app at 0x00000204A7C3C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000204A7CEA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000204AA6F2220>}
                 │         └ <function page at 0x00000204AA6B6EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000204A7C49400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data[0], total: total}
            │     │        │      └ 5
            │     │        └ 5
            │     └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 23:01:24.503 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 380
               │     └ 3
               └ <function _main at 0x000001A4FA8A94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 380
           │    └ <function BaseProcess._bootstrap at 0x000001A4FA7A85E0>
           └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4FA7B3C10>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4FA8BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    └ <function subprocess_started at 0x000001A4FC7C4EE0>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4FA8BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001A4FC7C40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001A4FA8BE460>
           │       └ <function run at 0x000001A4FC45C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4FD957340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4FC45D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4FC45D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4FC4604C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4FC3CE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF853D0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF853D0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF853D0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF853D0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>
          └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FCD749D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FCD749D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FCD749D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001A4FFF1CFD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD4809D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD4809D0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>>
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD4809D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001A4FD525D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD4809D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001A4FD480820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD4809D0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001A4FFF57280>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001A4FD480940>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD480CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001A4FD480940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A4FFF57280>
                     └ <function get_request_handler.<locals>.app at 0x000001A4FD480790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4FD5268B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001A4FFF57610>}
                 │         └ <function page at 0x000001A4FFEF6EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4FD4883D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data[0], total: total}
            │     │        │      └ 5
            │     │        └ 5
            │     └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 23:01:24.541 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 380
               │     └ 3
               └ <function _main at 0x000001A4FA8A94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 380
           │    └ <function BaseProcess._bootstrap at 0x000001A4FA7A85E0>
           └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4FA7B3C10>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4FA8BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    └ <function subprocess_started at 0x000001A4FC7C4EE0>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4FA8BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001A4FC7C40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001A4FA8BE460>
           │       └ <function run at 0x000001A4FC45C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4FD957340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4FC45D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4FC45D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4FC4604C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4FC3CE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF853D0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF853D0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF853D0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF853D0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>
          └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FCD749D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FCD749D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FCD749D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001A4FFF1CFD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD4809D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD4809D0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>>
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD4809D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001A4FD525D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD4809D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001A4FD480820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD4809D0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001A4FFF57280>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001A4FD480940>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4FD480CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001A4FD480940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A4FFF57280>
                     └ <function get_request_handler.<locals>.app at 0x000001A4FD480790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4FD5268B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001A4FFF57610>}
                 │         └ <function page at 0x000001A4FFEF6EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4FD4883D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data[0], total: total}
            │     │        │      └ 5
            │     │        └ 5
            │     └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 23:01:26.181 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 380
               │     └ 3
               └ <function _main at 0x000001A4FA8A94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 380
           │    └ <function BaseProcess._bootstrap at 0x000001A4FA7A85E0>
           └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4FA7B3C10>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4FA8BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    └ <function subprocess_started at 0x000001A4FC7C4EE0>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4FA8BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001A4FC7C40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001A4FA8BE460>
           │       └ <function run at 0x000001A4FC45C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4FD957340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4FC45D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4FC45D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4FC4604C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4FC3CE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF855B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF855B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF855B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF855B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>
          └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FFEF6790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FFEF6790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FFEF6790>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001A4FFF85670>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>>
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001A4FD525D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001A4FD480820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001A4FFF858B0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001A4800E9820>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E98B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001A4800E9820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A4FFF858B0>
                     └ <function get_request_handler.<locals>.app at 0x000001A4FD480790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4FD5268B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001A4FFF85D60>}
                 │         └ <function page at 0x000001A4FFEF6EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4FD4883D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data[0], total: total}
            │     │        │      └ 5
            │     │        └ 5
            │     └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 23:01:26.208 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 380
               │     └ 3
               └ <function _main at 0x000001A4FA8A94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 380
           │    └ <function BaseProcess._bootstrap at 0x000001A4FA7A85E0>
           └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4FA7B3C10>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4FA8BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    └ <function subprocess_started at 0x000001A4FC7C4EE0>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4FA8BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001A4FC7C40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001A4FA8BE460>
           │       └ <function run at 0x000001A4FC45C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4FD957340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4FC45D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4FC45D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4FC4604C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4FC3CE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF855B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF855B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF855B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A4FFF855B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>
          └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FFEF6790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FFEF6790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4FFEF6790>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001A4FFF85670>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>>
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001A4FD525D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001A4FD480820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001A4FFF858B0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001A4800E9820>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E98B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001A4800E9820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A4FFF858B0>
                     └ <function get_request_handler.<locals>.app at 0x000001A4FD480790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4FD5268B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001A4FFF85D60>}
                 │         └ <function page at 0x000001A4FFEF6EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4FD4883D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data[0], total: total}
            │     │        │      └ 5
            │     │        └ 5
            │     └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 23:01:27.063 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 380
               │     └ 3
               └ <function _main at 0x000001A4FA8A94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 380
           │    └ <function BaseProcess._bootstrap at 0x000001A4FA7A85E0>
           └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4FA7B3C10>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4FA8BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    └ <function subprocess_started at 0x000001A4FC7C4EE0>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4FA8BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001A4FC7C40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001A4FA8BE460>
           │       └ <function run at 0x000001A4FC45C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4FD957340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4FC45D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4FC45D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4FC4604C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4FC3CE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A48010FAC0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001A48010FAC0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001A48010FAC0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A48010FAC0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>
          └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4800E9A60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4800E9A60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4800E9A60>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001A4FFF6DC70>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9C10>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>>
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9C10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001A4FD525D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001A4FD480820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9C10>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001A48010F190>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001A4800E9E50>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9B80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001A4800E9E50>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A48010F190>
                     └ <function get_request_handler.<locals>.app at 0x000001A4FD480790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4FD5268B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001A48010F910>}
                 │         └ <function page at 0x000001A4FFEF6EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4FD4883D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data[0], total: total}
            │     │        │      └ 5
            │     │        └ 5
            │     └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 23:01:27.091 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 380
               │     └ 3
               └ <function _main at 0x000001A4FA8A94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 380
           │    └ <function BaseProcess._bootstrap at 0x000001A4FA7A85E0>
           └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4FA7B3C10>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4FA8BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>
    │    └ <function subprocess_started at 0x000001A4FC7C4EE0>
    └ <SpawnProcess name='SpawnProcess-28' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4FA8BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=728, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001A4FC7C40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001A4FA8BE460>
           │       └ <function run at 0x000001A4FC45C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4FD957340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4FC45D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4FC45D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4FC4604C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4FC3CE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A48010FAC0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001A48010FAC0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001A48010FAC0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001A48010FAC0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4FD98CAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4FF...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>
          └ <fastapi.applications.FastAPI object at 0x000001A4FD0F2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4800E9A60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4FFF1C220>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4800E9A60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4FFF05EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4800E9A60>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001A4FFF6DC70>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4FFF05FD0>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9C10>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>>
          └ <fastapi.routing.APIRouter object at 0x000001A4FFE8EA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9C10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001A4FD525D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001A4FD480820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9C10>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001A48010F190>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001A4800E9E50>
          └ <function wrap_app_handling_exceptions at 0x000001A4FD54B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001A4800E9B80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001A4800E9E50>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A48010F190>
                     └ <function get_request_handler.<locals>.app at 0x000001A4FD480790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4FD5268B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001A48010F910>}
                 │         └ <function page at 0x000001A4FFEF6EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4FD4883D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data[0], total: total}
            │     │        │      └ 5
            │     │        └ 5
            │     └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...
            └ [{'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': ...

TypeError: unhashable type: 'list'
2024-03-09 23:02:02.677 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x0000023ABD6E94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x0000023ABD5C85E0>
           └ <SpawnProcess name='SpawnProcess-29' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000023ABD5D3C10>
    └ <SpawnProcess name='SpawnProcess-29' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000023ABD6FE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-29' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-29' parent=17920 started>
    │    └ <function subprocess_started at 0x0000023ABF613EE0>
    └ <SpawnProcess name='SpawnProcess-29' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000023ABD6FE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000023ABF6130D0>
           │       │   └ <uvicorn.server.Server object at 0x0000023ABD6FE460>
           │       └ <function run at 0x0000023ABF2AC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000023AC07A8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000023ABF2AD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000023ABF2AD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000023ABF2B04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000023ABF21E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000023AC2D57E80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000023AC2D57E80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000023AC2D57E80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000023AC2D57E80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023AC07DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023AC2...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000023ABFF42FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023AC07DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023AC2...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023AC2...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023AC2D682B0>
          └ <fastapi.applications.FastAPI object at 0x0000023ABFF42FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023AC02EC8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023AC2D57EB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023AC2D682B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023AC02EC8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023AC2D57FA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023AC2D57EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023AC02EC8B0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000023AC2D68DF0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000023AC2CDDA30>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023AC2D57FA0>
          └ <function wrap_app_handling_exceptions at 0x0000023AC039B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC02EC940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000023AC2CDDA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC02EC940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000023AC2CDDA30>>
          └ <fastapi.routing.APIRouter object at 0x0000023AC2CDDA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC02EC940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000023AC0373D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC02EC940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000023AC02EC820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC02EC940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000023AC2D68FD0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000023AC02EC9D0>
          └ <function wrap_app_handling_exceptions at 0x0000023AC039B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC2D479D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000023AC02EC9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000023AC2D68FD0>
                     └ <function get_request_handler.<locals>.app at 0x0000023AC02EC790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000023AC03768B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000023AC2D83430>}
                 │         └ <function page at 0x0000023AC2D47EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000023AC02CE400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data, total: total}
            │     │     │      └ 5
            │     │     └ 5
            │     └ {'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': '...
            └ {'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': '...

TypeError: unhashable type: 'dict'
2024-03-09 23:02:02.722 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x0000023ABD6E94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x0000023ABD5C85E0>
           └ <SpawnProcess name='SpawnProcess-29' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000023ABD5D3C10>
    └ <SpawnProcess name='SpawnProcess-29' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000023ABD6FE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-29' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-29' parent=17920 started>
    │    └ <function subprocess_started at 0x0000023ABF613EE0>
    └ <SpawnProcess name='SpawnProcess-29' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000023ABD6FE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000023ABF6130D0>
           │       │   └ <uvicorn.server.Server object at 0x0000023ABD6FE460>
           │       └ <function run at 0x0000023ABF2AC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000023AC07A8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000023ABF2AD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000023ABF2AD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000023ABF2B04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000023ABF21E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000023AC2D57E80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000023AC2D57E80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000023AC2D57E80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000023AC2D57E80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023AC07DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023AC2...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000023ABFF42FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023AC07DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023AC2...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023AC2...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023AC2D682B0>
          └ <fastapi.applications.FastAPI object at 0x0000023ABFF42FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023AC02EC8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023AC2D57EB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023AC2D682B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023AC02EC8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023AC2D57FA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023AC2D57EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023AC02EC8B0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000023AC2D68DF0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000023AC2CDDA30>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023AC2D57FA0>
          └ <function wrap_app_handling_exceptions at 0x0000023AC039B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC02EC940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000023AC2CDDA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC02EC940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000023AC2CDDA30>>
          └ <fastapi.routing.APIRouter object at 0x0000023AC2CDDA30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC02EC940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000023AC0373D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC02EC940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000023AC02EC820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC02EC940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000023AC2D68FD0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000023AC02EC9D0>
          └ <function wrap_app_handling_exceptions at 0x0000023AC039B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000023AC2D479D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000023AC02EC9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000023AC2D68FD0>
                     └ <function get_request_handler.<locals>.app at 0x0000023AC02EC790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000023AC03768B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000023AC2D83430>}
                 │         └ <function page at 0x0000023AC2D47EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000023AC02CE400>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return {data: data, total: total}
            │     │     │      └ 5
            │     │     └ 5
            │     └ {'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': '...
            └ {'id': '3eb8a2ac-b727-4362-a765-7a164bf81056', 'username': 'xiaoj', 'name': '员工', 'email': 'xiaoj@example.com', 'password': '...

TypeError: unhashable type: 'dict'
2024-03-09 23:11:33.159 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 23:11:33.161 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 23:12:11.534 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 396
               │     └ 3
               └ <function _main at 0x00000296322294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 396
           │    └ <function BaseProcess._bootstrap at 0x00000296321285E0>
           └ <SpawnProcess name='SpawnProcess-33' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000029632133C10>
    └ <SpawnProcess name='SpawnProcess-33' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002963223E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-33' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-33' parent=17920 started>
    │    └ <function subprocess_started at 0x0000029634153EE0>
    └ <SpawnProcess name='SpawnProcess-33' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002963223E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000296341530D0>
           │       │   └ <uvicorn.server.Server object at 0x000002963223E460>
           │       └ <function run at 0x0000029633DEC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000296352E8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000029633DED9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000029633DED940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000029633DF14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000029633D5E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002963791F550>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000002963791F550>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000002963791F550>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002963791F550>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002963531FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029637...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000029634A82FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002963531FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029637...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029637...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000296378AC1F0>
          └ <fastapi.applications.FastAPI object at 0x0000029634A82FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000296347049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000296378AC190>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000296378AC1F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000296347049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000296378AC1C0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000296378AC190>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000296347049D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000296378ACFD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002963781E700>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000296378AC1C0>
          └ <function wrap_app_handling_exceptions at 0x0000029634EFD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0C9D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002963781E700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0C9D0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002963781E700>>
          └ <fastapi.routing.APIRouter object at 0x000002963781E700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0C9D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000029634EABD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0C9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000029634E0C820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0C9D0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000296378E6250>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000029634E0C940>
          └ <function wrap_app_handling_exceptions at 0x0000029634EFD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0CCA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000029634E0C940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000296378E6250>
                     └ <function get_request_handler.<locals>.app at 0x0000029634E0C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000029634EAA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000296378E65E0>}
                 │         └ <function page at 0x0000029637887EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000029634E123A0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 66, in page
    data, total = await UserCRUD.page_list_users(db)
                        │        │               └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000296378E65E0>
                        │        └ <staticmethod object at 0x00000296377E4220>
                        └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 84, in page_list_users
    return data.scalars().all(), len(result.scalars().all())
           │                         │      └ <function Result.scalars at 0x0000029637267DC0>
           │                         └ <sqlalchemy.engine.result.ChunkedIteratorResult object at 0x0000029637921EC0>
           └ <sqlalchemy.sql.selectable.Select object at 0x000002963791F460>

AttributeError: 'Select' object has no attribute 'scalars'
2024-03-09 23:12:11.562 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 396
               │     └ 3
               └ <function _main at 0x00000296322294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 396
           │    └ <function BaseProcess._bootstrap at 0x00000296321285E0>
           └ <SpawnProcess name='SpawnProcess-33' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000029632133C10>
    └ <SpawnProcess name='SpawnProcess-33' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002963223E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-33' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-33' parent=17920 started>
    │    └ <function subprocess_started at 0x0000029634153EE0>
    └ <SpawnProcess name='SpawnProcess-33' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002963223E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000296341530D0>
           │       │   └ <uvicorn.server.Server object at 0x000002963223E460>
           │       └ <function run at 0x0000029633DEC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000296352E8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000029633DED9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000029633DED940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000029633DF14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000029633D5E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002963791F550>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000002963791F550>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000002963791F550>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002963791F550>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002963531FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029637...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000029634A82FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002963531FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029637...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029637...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000296378AC1F0>
          └ <fastapi.applications.FastAPI object at 0x0000029634A82FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000296347049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000296378AC190>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000296378AC1F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000296347049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000296378AC1C0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000296378AC190>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000296347049D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000296378ACFD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002963781E700>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000296378AC1C0>
          └ <function wrap_app_handling_exceptions at 0x0000029634EFD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0C9D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002963781E700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0C9D0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002963781E700>>
          └ <fastapi.routing.APIRouter object at 0x000002963781E700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0C9D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000029634EABD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0C9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000029634E0C820>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0C9D0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000296378E6250>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000029634E0C940>
          └ <function wrap_app_handling_exceptions at 0x0000029634EFD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000029634E0CCA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000029634E0C940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000296378E6250>
                     └ <function get_request_handler.<locals>.app at 0x0000029634E0C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000029634EAA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000296378E65E0>}
                 │         └ <function page at 0x0000029637887EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000029634E123A0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 66, in page
    data, total = await UserCRUD.page_list_users(db)
                        │        │               └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000296378E65E0>
                        │        └ <staticmethod object at 0x00000296377E4220>
                        └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 84, in page_list_users
    return data.scalars().all(), len(result.scalars().all())
           │                         │      └ <function Result.scalars at 0x0000029637267DC0>
           │                         └ <sqlalchemy.engine.result.ChunkedIteratorResult object at 0x0000029637921EC0>
           └ <sqlalchemy.sql.selectable.Select object at 0x000002963791F460>

AttributeError: 'Select' object has no attribute 'scalars'
2024-03-09 23:13:48.138 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x00000279DC7A94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x00000279DC6885E0>
           └ <SpawnProcess name='SpawnProcess-34' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000279DC693C10>
    └ <SpawnProcess name='SpawnProcess-34' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000279DC7BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-34' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-34' parent=17920 started>
    │    └ <function subprocess_started at 0x00000279DE6D3EE0>
    └ <SpawnProcess name='SpawnProcess-34' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000279DC7BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000279DE6D30D0>
           │       │   └ <uvicorn.server.Server object at 0x00000279DC7BE460>
           │       └ <function run at 0x00000279DE36C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000279DF866340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000279DE36D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000279DE36D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000279DE3714C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000279DE2DE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000279E1E8E6A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000279E1E8E6A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000279E1E8E6A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000279E1E8E6A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000279DF89DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000279E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000279DF002FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000279DF89DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000279E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000279E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000279E1E1AE20>
          └ <fastapi.applications.FastAPI object at 0x00000279DF002FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000279DEC849D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000279E1E1AB20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000279E1E1AE20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000279DEC849D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000279E1E1AC40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000279E1E1AB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000279DEC849D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000279E1E36C10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000279E1D9D700>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000279E1E1AC40>
          └ <function wrap_app_handling_exceptions at 0x00000279DF454790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279DF3ACB80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000279E1D9D700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279DF3ACB80>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000279E1D9D700>>
          └ <fastapi.routing.APIRouter object at 0x00000279E1D9D700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279DF3ACB80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000279DF42DD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279DF3ACB80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000279DF3AC5E0>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279DF3ACB80>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000279E1E36E80>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000279E1E07C10>
          └ <function wrap_app_handling_exceptions at 0x00000279DF454790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279E1E07B80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000279E1E07C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000279E1E36E80>
                     └ <function get_request_handler.<locals>.app at 0x00000279DF3AC550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000279DF43B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000279E1E66250>}
                 │         └ <function page at 0x00000279E1E073A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000279DF398220>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=data, total=total)
           │                 │           └ 6
           │                 └ [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00000279E1EA15B0>, <app.models.user.U...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00...
    │           │    └ <function JSONResponse.render at 0x00000279DF54E820>
    │           └ <app.utils.responses.SuccessExtra object at 0x00000279E165F0D0>
    └ <app.utils.responses.SuccessExtra object at 0x00000279E165F0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x00000279DE432DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00...
             │    └ <function JSONEncoder.iterencode at 0x00000279DE432D30>
             └ <json.encoder.JSONEncoder object at 0x00000279E1E667F0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00...
           └ <_json.Encoder object at 0x00000279E1E9F160>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type User is not JSON serializable
2024-03-09 23:13:48.185 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x00000279DC7A94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x00000279DC6885E0>
           └ <SpawnProcess name='SpawnProcess-34' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000279DC693C10>
    └ <SpawnProcess name='SpawnProcess-34' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000279DC7BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-34' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-34' parent=17920 started>
    │    └ <function subprocess_started at 0x00000279DE6D3EE0>
    └ <SpawnProcess name='SpawnProcess-34' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000279DC7BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000279DE6D30D0>
           │       │   └ <uvicorn.server.Server object at 0x00000279DC7BE460>
           │       └ <function run at 0x00000279DE36C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000279DF866340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000279DE36D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000279DE36D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000279DE3714C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000279DE2DE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000279E1E8E6A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000279E1E8E6A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000279E1E8E6A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000279E1E8E6A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000279DF89DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000279E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000279DF002FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000279DF89DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000279E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000279E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000279E1E1AE20>
          └ <fastapi.applications.FastAPI object at 0x00000279DF002FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000279DEC849D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000279E1E1AB20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000279E1E1AE20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000279DEC849D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000279E1E1AC40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000279E1E1AB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000279DEC849D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000279E1E36C10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000279E1D9D700>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000279E1E1AC40>
          └ <function wrap_app_handling_exceptions at 0x00000279DF454790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279DF3ACB80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000279E1D9D700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279DF3ACB80>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000279E1D9D700>>
          └ <fastapi.routing.APIRouter object at 0x00000279E1D9D700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279DF3ACB80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000279DF42DD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279DF3ACB80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000279DF3AC5E0>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279DF3ACB80>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000279E1E36E80>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000279E1E07C10>
          └ <function wrap_app_handling_exceptions at 0x00000279DF454790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000279E1E07B80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000279E1E07C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000279E1E36E80>
                     └ <function get_request_handler.<locals>.app at 0x00000279DF3AC550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000279DF43B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000279E1E66250>}
                 │         └ <function page at 0x00000279E1E073A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000279DF398220>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 68, in page
    return SuccessExtra(data=data, total=total)
           │                 │           └ 6
           │                 └ [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00000279E1EA15B0>, <app.models.user.U...
           └ <class 'app.utils.responses.SuccessExtra'>

  File "E:\ProgramCode\python\brisk\app\utils\responses.py", line 143, in __init__
    super().__init__(content=content, status_code=code)
                             │                    └ 200
                             └ {'code': 200, 'msg': None, 'data': [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 183, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 200
                     └ {'code': 200, 'msg': None, 'data': [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 200, 'msg': None, 'data': [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00...
    │           │    └ <function JSONResponse.render at 0x00000279DF54E820>
    │           └ <app.utils.responses.SuccessExtra object at 0x00000279E165F0D0>
    └ <app.utils.responses.SuccessExtra object at 0x00000279E165F0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\responses.py", line 186, in render
    return json.dumps(
           │    └ <function dumps at 0x00000279DE432DC0>
           └ <module 'json' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\json\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\__init__.py", line 234, in dumps
    return cls(
           └ <class 'json.encoder.JSONEncoder'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 200, 'msg': None, 'data': [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00...
             │    └ <function JSONEncoder.iterencode at 0x00000279DE432D30>
             └ <json.encoder.JSONEncoder object at 0x00000279E1E667F0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 200, 'msg': None, 'data': [<app.models.user.User object at 0x00000279E1EA1070>, <app.models.user.User object at 0x00...
           └ <_json.Encoder object at 0x00000279E1E9F160>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type User is not JSON serializable
2024-03-09 23:17:52.243 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001DCA1AC8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001DCA1B07790>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (0, -2, 2)
    │      │       └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001DCA1F39B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (0, -2, 2)
           │    │      │    │              └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA1F39CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA212B940>
           └ <_AsyncIoGreenlet object at 0x000001DCA20BC9C0 (otid=0x000001DCA03B4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA212B940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (0, -2, 2)
                   │    │               └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
          │    └ <function Cursor._query at 0x000001DCA1FD7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000001DCA2...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
          │    └ <function Connection.query at 0x000001DCA1FE30D0>
          └ <aiomysql.connection.Connection object at 0x000001DCA20AFAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001DCA1FE3820>
          └ <aiomysql.connection.Connection object at 0x000001DCA20AFAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001DCA1FE4430>
          └ <aiomysql.connection.MySQLResult object at 0x000001DCA21285E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001DCA21285E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001DCA1FB4790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001DCA21366A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001DCA21366A0>
    │   └ <function raise_mysql_exception at 0x000001DCA1F621F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to...
          │          └ 1064
          └ <class 'pymysql.err.ProgrammingError'>

pymysql.err.ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-2, 2' at line 4")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x000001DC9CA294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x000001DC9C8185E0>
           └ <SpawnProcess name='SpawnProcess-39' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001DC9C823C10>
    └ <SpawnProcess name='SpawnProcess-39' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001DC9CA3E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-39' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-39' parent=17920 started>
    │    └ <function subprocess_started at 0x000001DC9E953EE0>
    └ <SpawnProcess name='SpawnProcess-39' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=752, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001DC9CA3E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=752, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001DC9E9530D0>
           │       │   └ <uvicorn.server.Server object at 0x000001DC9CA3E460>
           │       └ <function run at 0x000001DC9E5EC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001DC9FAE8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001DC9E5ED9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001DC9E5ED940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001DC9E5F04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001DC9E55E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DCA2136850>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001DCA2136850>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001DCA2136850>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DCA2136850>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DC9FB1DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DCA2...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001DC9F282FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DC9FB1DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DCA2...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DCA2...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DC9F621E80>
          └ <fastapi.applications.FastAPI object at 0x000001DC9F282FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DC9EF049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DC9F6218E0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DC9F621E80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DC9EF049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DC9F621F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DC9F6218E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DC9EF049D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001DCA20D8220>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001DCA202D700>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DC9F621F40>
          └ <function wrap_app_handling_exceptions at 0x000001DC9F6D4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001DCA202D700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001DCA202D700>>
          └ <fastapi.routing.APIRouter object at 0x000001DCA202D700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001DC9F6ADD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001DC9F62C8B0>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001DCA20D85B0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001DC9F62C940>
          └ <function wrap_app_handling_exceptions at 0x000001DC9F6D4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CA60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001DC9F62C940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001DCA20D85B0>
                     └ <function get_request_handler.<locals>.app at 0x000001DC9F62C820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001DC9F6BB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001DCA20D8910>, 'pageNum': 0, 'pageSize': 2}
                 │         └ <function page at 0x000001DCA2096EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001DC9F618220>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 67, in page
    data, total = await UserCRUD.page_list_users(db, pageNum, pageSize)
                        │        │               │   │        └ 2
                        │        │               │   └ 0
                        │        │               └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001DCA20D8910>
                        │        └ <staticmethod object at 0x000001DCA1FDCF70>
                        └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 81, in page_list_users
    data = await async_session.execute(select(User).where(*search).offset((pageNum - 1) * pageSize).limit(pageSize))
                 │             │       │      │            │               │              │               └ 2
                 │             │       │      │            │               │              └ 2
                 │             │       │      │            │               └ 0
                 │             │       │      │            └ [<sqlalchemy.sql.elements.BinaryExpression object at 0x000001DCA20D8C40>]
                 │             │       │      └ <class 'app.models.user.User'>
                 │             │       └ <function select at 0x000001DCA19985E0>
                 │             └ <function AsyncSession.execute at 0x000001DCA1EB3160>
                 └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001DCA20D8910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x000001DCA0542CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000001DCA20BC9C0 (otid=0x000001DCA03B4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000001DCA1DD8700>
           └ <sqlalchemy.orm.session.Session object at 0x000001DCA20D8970>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod object at 0x000001DCA1C5E370>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000001DCA1A04940>
             └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x000001DCA2128E20>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001DCA1A04C10>
           └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001DCA1A04DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001DCA1A04E50>
           └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001DCA1A070D0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError(1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version ...
          │                    │              └ (<class 'pymysql.err.ProgrammingError'>, ProgrammingError(1064, "You have an error in your SQL syntax; check the manual that ...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(pymysql.err.ProgrammingError) (1064, "You have an error in your SQL syntax; check the manual that correspo...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001DCA1AC8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001DCA1B07790>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (0, -2, 2)
    │      │       └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001DCA1F39B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (0, -2, 2)
           │    │      │    │              └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA1F39CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA212B940>
           └ <_AsyncIoGreenlet object at 0x000001DCA20BC9C0 (otid=0x000001DCA03B4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA212B940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (0, -2, 2)
                   │    │               └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
          │    └ <function Cursor._query at 0x000001DCA1FD7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000001DCA2...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
          │    └ <function Connection.query at 0x000001DCA1FE30D0>
          └ <aiomysql.connection.Connection object at 0x000001DCA20AFAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001DCA1FE3820>
          └ <aiomysql.connection.Connection object at 0x000001DCA20AFAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001DCA1FE4430>
          └ <aiomysql.connection.MySQLResult object at 0x000001DCA21285E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001DCA21285E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001DCA1FB4790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001DCA21366A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001DCA21366A0>
    │   └ <function raise_mysql_exception at 0x000001DCA1F621F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to...
          │          └ 1064
          └ <class 'pymysql.err.ProgrammingError'>

sqlalchemy.exc.ProgrammingError: (pymysql.err.ProgrammingError) (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-2, 2' at line 4")
[SQL: SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, brisk_users.phone, brisk_users.created_at, brisk_users.updated_at, brisk_users.deleted_at, brisk_users.update_user, brisk_users.last_login_at, brisk_users.avatar, brisk_users.is_valid 
FROM brisk_users 
WHERE brisk_users.deleted_at = %s 
 LIMIT %s, %s]
[parameters: (0, -2, 2)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2024-03-09 23:17:52.539 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001DCA1AC8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001DCA1B07790>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (0, -2, 2)
    │      │       └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001DCA1F39B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (0, -2, 2)
           │    │      │    │              └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA1F39CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA212B940>
           └ <_AsyncIoGreenlet object at 0x000001DCA20BC9C0 (otid=0x000001DCA03B4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA212B940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (0, -2, 2)
                   │    │               └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
          │    └ <function Cursor._query at 0x000001DCA1FD7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000001DCA2...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
          │    └ <function Connection.query at 0x000001DCA1FE30D0>
          └ <aiomysql.connection.Connection object at 0x000001DCA20AFAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001DCA1FE3820>
          └ <aiomysql.connection.Connection object at 0x000001DCA20AFAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001DCA1FE4430>
          └ <aiomysql.connection.MySQLResult object at 0x000001DCA21285E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001DCA21285E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001DCA1FB4790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001DCA21366A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001DCA21366A0>
    │   └ <function raise_mysql_exception at 0x000001DCA1F621F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to...
          │          └ 1064
          └ <class 'pymysql.err.ProgrammingError'>

pymysql.err.ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-2, 2' at line 4")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x000001DC9CA294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x000001DC9C8185E0>
           └ <SpawnProcess name='SpawnProcess-39' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001DC9C823C10>
    └ <SpawnProcess name='SpawnProcess-39' parent=17920 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001DC9CA3E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-39' parent=17920 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-39' parent=17920 started>
    │    └ <function subprocess_started at 0x000001DC9E953EE0>
    └ <SpawnProcess name='SpawnProcess-39' parent=17920 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=752, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001DC9CA3E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=752, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001DC9E9530D0>
           │       │   └ <uvicorn.server.Server object at 0x000001DC9CA3E460>
           │       └ <function run at 0x000001DC9E5EC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001DC9FAE8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001DC9E5ED9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001DC9E5ED940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001DC9E5F04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001DC9E55E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DCA2136850>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001DCA2136850>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001DCA2136850>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001DCA2136850>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DC9FB1DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DCA2...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001DC9F282FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DC9FB1DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DCA2...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DCA2...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DC9F621E80>
          └ <fastapi.applications.FastAPI object at 0x000001DC9F282FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DC9EF049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DC9F6218E0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DC9F621E80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DC9EF049D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DC9F621F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DC9F6218E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DC9EF049D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001DCA20D8220>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001DCA202D700>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DC9F621F40>
          └ <function wrap_app_handling_exceptions at 0x000001DC9F6D4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001DCA202D700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001DCA202D700>>
          └ <fastapi.routing.APIRouter object at 0x000001DCA202D700>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001DC9F6ADD30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001DC9F62C8B0>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001DCA20D85B0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001DC9F62C940>
          └ <function wrap_app_handling_exceptions at 0x000001DC9F6D4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001DC9F62CA60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001DC9F62C940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001DCA20D85B0>
                     └ <function get_request_handler.<locals>.app at 0x000001DC9F62C820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001DC9F6BB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001DCA20D8910>, 'pageNum': 0, 'pageSize': 2}
                 │         └ <function page at 0x000001DCA2096EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001DC9F618220>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 67, in page
    data, total = await UserCRUD.page_list_users(db, pageNum, pageSize)
                        │        │               │   │        └ 2
                        │        │               │   └ 0
                        │        │               └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001DCA20D8910>
                        │        └ <staticmethod object at 0x000001DCA1FDCF70>
                        └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 81, in page_list_users
    data = await async_session.execute(select(User).where(*search).offset((pageNum - 1) * pageSize).limit(pageSize))
                 │             │       │      │            │               │              │               └ 2
                 │             │       │      │            │               │              └ 2
                 │             │       │      │            │               └ 0
                 │             │       │      │            └ [<sqlalchemy.sql.elements.BinaryExpression object at 0x000001DCA20D8C40>]
                 │             │       │      └ <class 'app.models.user.User'>
                 │             │       └ <function select at 0x000001DCA19985E0>
                 │             └ <function AsyncSession.execute at 0x000001DCA1EB3160>
                 └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001DCA20D8910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x000001DCA0542CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000001DCA20BC9C0 (otid=0x000001DCA03B4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000001DCA1DD8700>
           └ <sqlalchemy.orm.session.Session object at 0x000001DCA20D8970>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod object at 0x000001DCA1C5E370>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000001DCA1A04940>
             └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x000001DCA2128E20>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001DCA1A04C10>
           └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001DCA1A04DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001DCA1A04E50>
           └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001DCA1A070D0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError(1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version ...
          │                    │              └ (<class 'pymysql.err.ProgrammingError'>, ProgrammingError(1064, "You have an error in your SQL syntax; check the manual that ...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(pymysql.err.ProgrammingError) (1064, "You have an error in your SQL syntax; check the manual that correspo...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001DCA1AC8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001DCA1B07790>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DCA20D8A90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (0, -2, 2)
    │      │       └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001DCA1F39B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (0, -2, 2)
           │    │      │    │              └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA1F39CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA212B940>
           └ <_AsyncIoGreenlet object at 0x000001DCA20BC9C0 (otid=0x000001DCA03B4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001DCA212B940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (0, -2, 2)
                   │    │               └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001DCA2127B30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
          │    └ <function Cursor._query at 0x000001DCA1FD7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000001DCA2...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ 'SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, ...
          │    └ <function Connection.query at 0x000001DCA1FE30D0>
          └ <aiomysql.connection.Connection object at 0x000001DCA20AFAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001DCA1FE3820>
          └ <aiomysql.connection.Connection object at 0x000001DCA20AFAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001DCA1FE4430>
          └ <aiomysql.connection.MySQLResult object at 0x000001DCA21285E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001DCA21285E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001DCA1FB4790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001DCA21366A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001DCA21366A0>
    │   └ <function raise_mysql_exception at 0x000001DCA1F621F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to...
          │          └ 1064
          └ <class 'pymysql.err.ProgrammingError'>

sqlalchemy.exc.ProgrammingError: (pymysql.err.ProgrammingError) (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-2, 2' at line 4")
[SQL: SELECT brisk_users.id, brisk_users.username, brisk_users.name, brisk_users.email, brisk_users.password, brisk_users.`role`, brisk_users.phone, brisk_users.created_at, brisk_users.updated_at, brisk_users.deleted_at, brisk_users.update_user, brisk_users.last_login_at, brisk_users.avatar, brisk_users.is_valid 
FROM brisk_users 
WHERE brisk_users.deleted_at = %s 
 LIMIT %s, %s]
[parameters: (0, -2, 2)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2024-03-09 23:36:57.376 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x0000021D2DB194C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x0000021D2D9185E0>
           └ <SpawnProcess name='SpawnProcess-4' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000021D2D923C10>
    └ <SpawnProcess name='SpawnProcess-4' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000021D2DB2E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=10336 started>
    │    └ <function subprocess_started at 0x0000021D2FA43EE0>
    └ <SpawnProcess name='SpawnProcess-4' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=520, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000021D2DB2E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=520, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000021D2FA430D0>
           │       │   └ <uvicorn.server.Server object at 0x0000021D2DB2E460>
           │       └ <function run at 0x0000021D2F6DC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000021D30BD8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000021D2F6DD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000021D2F6DD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000021D2F6E04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000021D2F64E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000021D331B7D60>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000021D331B7D60>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000021D331B7D60>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000021D331B7D60>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021D30C0FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021D33...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000021D30372FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021D30C0FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021D33...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021D33...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021D33195610>
          └ <fastapi.applications.FastAPI object at 0x0000021D30372FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021D2FFF39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021D3070BB20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021D33195610>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021D2FFF39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021D3070BA60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021D3070BB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021D2FFF39D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000021D331B7940>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000021D33128040>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021D3070BA60>
          └ <function wrap_app_handling_exceptions at 0x0000021D307CB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D307009D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000021D33128040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D307009D0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000021D33128040>>
          └ <fastapi.routing.APIRouter object at 0x0000021D33128040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D307009D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000021D307A5D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D307009D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000021D307140D0>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D307009D0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000021D331B79D0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000021D30700CA0>
          └ <function wrap_app_handling_exceptions at 0x0000021D307CB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D30700B80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000021D30700CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000021D331B79D0>
                     └ <function get_request_handler.<locals>.app at 0x0000021D30714040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000021D307A68B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000021D331B7A30>, 'pageNum': 0, 'pageSize': 0}
                 │         └ <function page at 0x0000021D305741F0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000021D30712130>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 64, in page
    data, total = await UserCRUD.page_list_users(db, pageNum, pageSize)
                        │        │               │   │        └ 0
                        │        │               │   └ 0
                        │        │               └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000021D331B7A30>
                        │        └ <staticmethod object at 0x0000021D330D21F0>
                        └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 77, in page_list_users
    raise ValueError("输入数值必须大于0")

ValueError: 输入数值必须大于0
2024-03-09 23:36:57.511 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x0000021D2DB194C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x0000021D2D9185E0>
           └ <SpawnProcess name='SpawnProcess-4' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000021D2D923C10>
    └ <SpawnProcess name='SpawnProcess-4' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000021D2DB2E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=10336 started>
    │    └ <function subprocess_started at 0x0000021D2FA43EE0>
    └ <SpawnProcess name='SpawnProcess-4' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=520, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000021D2DB2E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=520, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000021D2FA430D0>
           │       │   └ <uvicorn.server.Server object at 0x0000021D2DB2E460>
           │       └ <function run at 0x0000021D2F6DC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000021D30BD8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000021D2F6DD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000021D2F6DD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000021D2F6E04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000021D2F64E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000021D331B7D60>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000021D331B7D60>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000021D331B7D60>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000021D331B7D60>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021D30C0FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021D33...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000021D30372FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021D30C0FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021D33...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021D33...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021D33195610>
          └ <fastapi.applications.FastAPI object at 0x0000021D30372FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021D2FFF39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021D3070BB20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021D33195610>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021D2FFF39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021D3070BA60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021D3070BB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021D2FFF39D0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000021D331B7940>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000021D33128040>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021D3070BA60>
          └ <function wrap_app_handling_exceptions at 0x0000021D307CB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D307009D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000021D33128040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D307009D0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000021D33128040>>
          └ <fastapi.routing.APIRouter object at 0x0000021D33128040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D307009D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000021D307A5D30>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D307009D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000021D307140D0>
          └ APIRoute(path='/api/v1/users/page', name='page', methods=['GET'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D307009D0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000021D331B79D0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000021D30700CA0>
          └ <function wrap_app_handling_exceptions at 0x0000021D307CB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021D30700B80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000021D30700CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000021D331B79D0>
                     └ <function get_request_handler.<locals>.app at 0x0000021D30714040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000021D307A68B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000021D331B7A30>, 'pageNum': 0, 'pageSize': 0}
                 │         └ <function page at 0x0000021D305741F0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000021D30712130>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 64, in page
    data, total = await UserCRUD.page_list_users(db, pageNum, pageSize)
                        │        │               │   │        └ 0
                        │        │               │   └ 0
                        │        │               └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000021D331B7A30>
                        │        └ <staticmethod object at 0x0000021D330D21F0>
                        └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 77, in page_list_users
    raise ValueError("输入数值必须大于0")

ValueError: 输入数值必须大于0
2024-03-09 23:41:32.171 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-09 23:41:32.171 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 00:05:23.261 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x0000022ED0AB94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x0000022ED09A85E0>
           └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000022ED09B3C10>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000022ED0ACE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    └ <function subprocess_started at 0x0000022ED29E3EE0>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000022ED0ACE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000022ED29E30D0>
           │       │   └ <uvicorn.server.Server object at 0x0000022ED0ACE460>
           │       └ <function run at 0x0000022ED267C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000022ED3B76340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022ED267D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022ED267D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022ED26804C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022ED25EE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED613CEE0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED613CEE0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED613CEE0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED613CEE0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>
          └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED2F949D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '149', 'sec-ch-ua': '"Chromium";v="122", "Not...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED2F949D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000022ED39CBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000022ED6166C10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6131CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6131CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>>
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6131CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000022ED3745D30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6131CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000022ED6127670>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6131CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000022ED6155040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED6131820>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED61319D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED6131820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000022ED6155040>
                     └ <function get_request_handler.<locals>.app at 0x0000022ED61275E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000022ED37428B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED6155940>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000022ED610B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000022ED36B1D30>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED6155940>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='string', name='string', username='string', phone='string', role=0, email='user@example.com', is_valid=True)
          │        └ <staticmethod object at 0x0000022ED60CB640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:05:23.304 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x0000022ED0AB94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x0000022ED09A85E0>
           └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000022ED09B3C10>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000022ED0ACE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    └ <function subprocess_started at 0x0000022ED29E3EE0>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000022ED0ACE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000022ED29E30D0>
           │       │   └ <uvicorn.server.Server object at 0x0000022ED0ACE460>
           │       └ <function run at 0x0000022ED267C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000022ED3B76340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022ED267D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022ED267D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022ED26804C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022ED25EE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED613CEE0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED613CEE0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED613CEE0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED613CEE0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>
          └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED2F949D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '149', 'sec-ch-ua': '"Chromium";v="122", "Not...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED2F949D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000022ED39CBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000022ED6166C10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6131CA0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6131CA0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>>
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6131CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000022ED3745D30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6131CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000022ED6127670>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6131CA0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000022ED6155040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED6131820>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED61319D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED6131820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000022ED6155040>
                     └ <function get_request_handler.<locals>.app at 0x0000022ED61275E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000022ED37428B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED6155940>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000022ED610B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000022ED36B1D30>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED6155940>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='string', name='string', username='string', phone='string', role=0, email='user@example.com', is_valid=True)
          │        └ <staticmethod object at 0x0000022ED60CB640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:06:56.927 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x0000022ED0AB94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x0000022ED09A85E0>
           └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000022ED09B3C10>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000022ED0ACE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    └ <function subprocess_started at 0x0000022ED29E3EE0>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000022ED0ACE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000022ED29E30D0>
           │       │   └ <uvicorn.server.Server object at 0x0000022ED0ACE460>
           │       └ <function run at 0x0000022ED267C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000022ED3B76340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022ED267D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022ED267D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022ED26804C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022ED25EE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6155B20>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6155B20>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6155B20>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6155B20>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>
          └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED6478040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Chromium";v="122", "Not...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED6478040>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000022ED39CBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000022ED61E6B20>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478160>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478160>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>>
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478160>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000022ED3745D30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000022ED6127670>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478160>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000022ED61E6970>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED64781F0>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478280>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED64781F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000022ED61E6970>
                     └ <function get_request_handler.<locals>.app at 0x0000022ED61275E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000022ED37428B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED61E6FD0>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000022ED610B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000022ED36B1D30>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED61E6FD0>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username='string', phone='string', role=0, email='us...
          │        └ <staticmethod object at 0x0000022ED60CB640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:06:56.948 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x0000022ED0AB94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x0000022ED09A85E0>
           └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000022ED09B3C10>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000022ED0ACE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    └ <function subprocess_started at 0x0000022ED29E3EE0>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000022ED0ACE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000022ED29E30D0>
           │       │   └ <uvicorn.server.Server object at 0x0000022ED0ACE460>
           │       └ <function run at 0x0000022ED267C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000022ED3B76340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022ED267D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022ED267D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022ED26804C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022ED25EE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6155B20>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6155B20>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6155B20>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6155B20>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>
          └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED6478040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Chromium";v="122", "Not...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED6478040>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000022ED39CBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000022ED61E6B20>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478160>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478160>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>>
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478160>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000022ED3745D30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000022ED6127670>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478160>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000022ED61E6970>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED64781F0>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED6478280>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED64781F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000022ED61E6970>
                     └ <function get_request_handler.<locals>.app at 0x0000022ED61275E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000022ED37428B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED61E6FD0>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000022ED610B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000022ED36B1D30>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED61E6FD0>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username='string', phone='string', role=0, email='us...
          │        └ <staticmethod object at 0x0000022ED60CB640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:07:59.496 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x0000022ED0AB94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x0000022ED09A85E0>
           └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000022ED09B3C10>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000022ED0ACE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    └ <function subprocess_started at 0x0000022ED29E3EE0>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000022ED0ACE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000022ED29E30D0>
           │       │   └ <uvicorn.server.Server object at 0x0000022ED0ACE460>
           │       └ <function run at 0x0000022ED267C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000022ED3B76340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022ED267D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022ED267D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022ED26804C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022ED25EE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6490F10>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6490F10>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6490F10>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6490F10>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>
          └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED6478790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED6478790>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000022ED39CBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000022ED6490280>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64785E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64785E0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>>
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64785E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000022ED3745D30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64785E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000022ED6127670>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64785E0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000022ED64903D0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED6478940>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64788B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED6478940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000022ED64903D0>
                     └ <function get_request_handler.<locals>.app at 0x0000022ED61275E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000022ED37428B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED6490A00>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000022ED610B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000022ED36B1D30>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED6490A00>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x0000022ED60CB640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:07:59.518 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x0000022ED0AB94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x0000022ED09A85E0>
           └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000022ED09B3C10>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000022ED0ACE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>
    │    └ <function subprocess_started at 0x0000022ED29E3EE0>
    └ <SpawnProcess name='SpawnProcess-14' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000022ED0ACE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=420, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000022ED29E30D0>
           │       │   └ <uvicorn.server.Server object at 0x0000022ED0ACE460>
           │       └ <function run at 0x0000022ED267C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000022ED3B76340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022ED267D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022ED267D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022ED26804C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022ED25EE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6490F10>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6490F10>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6490F10>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000022ED6490F10>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022ED3BACAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022ED6...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>
          └ <fastapi.applications.FastAPI object at 0x0000022ED3312FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED6478790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022ED613C550>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022ED6478790>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000022ED39CBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022ED613C790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000022ED6490280>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022ED613C880>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64785E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64785E0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>>
          └ <fastapi.routing.APIRouter object at 0x0000022ED39C47F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64785E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000022ED3745D30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64785E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000022ED6127670>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64785E0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000022ED64903D0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED6478940>
          └ <function wrap_app_handling_exceptions at 0x0000022ED376B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022ED64788B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000022ED6478940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000022ED64903D0>
                     └ <function get_request_handler.<locals>.app at 0x0000022ED61275E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000022ED37428B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED6490A00>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000022ED610B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000022ED36B1D30>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000022ED6490A00>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x0000022ED60CB640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:09:38.660 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 372
               │     └ 3
               └ <function _main at 0x000001E6168D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 372
           │    └ <function BaseProcess._bootstrap at 0x000001E6167C85E0>
           └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E6167D3C10>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E6168EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    └ <function subprocess_started at 0x000001E618803EE0>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E6168EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001E6188030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001E6168EE460>
           │       └ <function run at 0x000001E61849C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E619999340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E61849D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E61849D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E6184A14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E61840E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BF85FD0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BF85FD0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BF85FD0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BF85FD0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>
          └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61BF47C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61BF47C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001E6197EBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001E61BF85850>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001E61BF17F40>>
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001E61955DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001E61BF474C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001E61BF85AC0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001E61BF5A670>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001E61BF5A670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E61BF85AC0>
                     └ <function get_request_handler.<locals>.app at 0x000001E61BF47430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E61956B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E61BF85E80>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000001E61BF2B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E6194C2C40>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E61BF85E80>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000001E61BEEA640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:09:38.694 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 372
               │     └ 3
               └ <function _main at 0x000001E6168D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 372
           │    └ <function BaseProcess._bootstrap at 0x000001E6167C85E0>
           └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E6167D3C10>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E6168EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    └ <function subprocess_started at 0x000001E618803EE0>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E6168EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001E6188030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001E6168EE460>
           │       └ <function run at 0x000001E61849C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E619999340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E61849D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E61849D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E6184A14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E61840E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BF85FD0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BF85FD0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BF85FD0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BF85FD0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>
          └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61BF47C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61BF47C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001E6197EBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001E61BF85850>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001E61BF17F40>>
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001E61955DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001E61BF474C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001E61BF85AC0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001E61BF5A670>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF5A8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001E61BF5A670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E61BF85AC0>
                     └ <function get_request_handler.<locals>.app at 0x000001E61BF47430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E61956B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E61BF85E80>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000001E61BF2B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E6194C2C40>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E61BF85E80>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000001E61BEEA640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:10:42.093 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 372
               │     └ 3
               └ <function _main at 0x000001E6168D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 372
           │    └ <function BaseProcess._bootstrap at 0x000001E6167C85E0>
           └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E6167D3C10>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E6168EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    └ <function subprocess_started at 0x000001E618803EE0>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E6168EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001E6188030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001E6168EE460>
           │       └ <function run at 0x000001E61849C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E619999340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E61849D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E61849D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E6184A14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E61840E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BFD9F40>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BFD9F40>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BFD9F40>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BFD9F40>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>
          └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61BF5AA60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61BF5AA60>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001E6197EBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001E61BFD9940>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E6194C0160>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E6194C0160>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001E61BF17F40>>
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E6194C0160>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001E61955DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E6194C0160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001E61BF474C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E6194C0160>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001E61BFD9C10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001E61BF47F70>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF47EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001E61BF47F70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E61BFD9C10>
                     └ <function get_request_handler.<locals>.app at 0x000001E61BF47430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E61956B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E6194C2A60>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000001E61BF2B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E6194C2C40>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E6194C2A60>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000001E61BEEA640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:10:42.115 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 372
               │     └ 3
               └ <function _main at 0x000001E6168D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 372
           │    └ <function BaseProcess._bootstrap at 0x000001E6167C85E0>
           └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E6167D3C10>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E6168EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    └ <function subprocess_started at 0x000001E618803EE0>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E6168EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001E6188030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001E6168EE460>
           │       └ <function run at 0x000001E61849C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E619999340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E61849D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E61849D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E6184A14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E61840E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BFD9F40>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BFD9F40>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BFD9F40>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61BFD9F40>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>
          └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61BF5AA60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61BF5AA60>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001E6197EBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001E61BFD9940>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E6194C0160>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E6194C0160>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001E61BF17F40>>
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E6194C0160>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001E61955DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E6194C0160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001E61BF474C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E6194C0160>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001E61BFD9C10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001E61BF47F70>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61BF47EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001E61BF47F70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E61BFD9C10>
                     └ <function get_request_handler.<locals>.app at 0x000001E61BF47430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E61956B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E6194C2A60>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000001E61BF2B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E6194C2C40>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E6194C2A60>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000001E61BEEA640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:10:43.659 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 372
               │     └ 3
               └ <function _main at 0x000001E6168D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 372
           │    └ <function BaseProcess._bootstrap at 0x000001E6167C85E0>
           └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E6167D3C10>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E6168EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    └ <function subprocess_started at 0x000001E618803EE0>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E6168EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001E6188030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001E6168EE460>
           │       └ <function run at 0x000001E61849C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E619999340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E61849D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E61849D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E6184A14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E61840E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61C15DE80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001E61C15DE80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001E61C15DE80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61C15DE80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61C...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61C...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61C...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>
          └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61C134DC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61C134DC0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001E6197EBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001E61C15D160>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134C10>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001E61BF17F40>>
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134C10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001E61955DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001E61BF474C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134C10>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001E61C15D280>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001E61C134E50>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001E61C134E50>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E61C15D280>
                     └ <function get_request_handler.<locals>.app at 0x000001E61BF47430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E61956B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E61C15D8E0>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000001E61BF2B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E6194C2C40>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E61C15D8E0>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000001E61BEEA640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:10:43.695 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 372
               │     └ 3
               └ <function _main at 0x000001E6168D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 372
           │    └ <function BaseProcess._bootstrap at 0x000001E6167C85E0>
           └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E6167D3C10>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E6168EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>
    │    └ <function subprocess_started at 0x000001E618803EE0>
    └ <SpawnProcess name='SpawnProcess-15' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E6168EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=732, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001E6188030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001E6168EE460>
           │       └ <function run at 0x000001E61849C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E619999340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E61849D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E61849D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E6184A14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E61840E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61C15DE80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001E61C15DE80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001E61C15DE80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001E61C15DE80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61C...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E6199CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61C...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E61C...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>
          └ <fastapi.applications.FastAPI object at 0x000001E619132FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61C134DC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E61BF5D910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E61C134DC0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001E6197EBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E61BF5D7F0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001E61C15D160>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E61BF5D760>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134C10>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134C10>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001E61BF17F40>>
          └ <fastapi.routing.APIRouter object at 0x000001E61BF17F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134C10>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001E61955DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001E61BF474C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134C10>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001E61C15D280>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001E61C134E50>
          └ <function wrap_app_handling_exceptions at 0x000001E619584790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001E61C134EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001E61C134E50>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E61C15D280>
                     └ <function get_request_handler.<locals>.app at 0x000001E61BF47430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E61956B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E61C15D8E0>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000001E61BF2B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E6194C2C40>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 77, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E61C15D8E0>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000001E61BEEA640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:11:31.194 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 00:11:31.194 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 00:12:01.651 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 376
               │     └ 3
               └ <function _main at 0x000001C6C25794C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 376
           │    └ <function BaseProcess._bootstrap at 0x000001C6C24585E0>
           └ <SpawnProcess name='SpawnProcess-16' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C6C2463C10>
    └ <SpawnProcess name='SpawnProcess-16' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C6C258E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-16' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-16' parent=10336 started>
    │    └ <function subprocess_started at 0x000001C6C44A3EE0>
    └ <SpawnProcess name='SpawnProcess-16' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=676, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C6C258E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=676, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C6C44A30D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C6C258E460>
           │       └ <function run at 0x000001C6C413C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C6C5638340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C6C413D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C6C413D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C6C41404C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C6C40AE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C6C7C5A8B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001C6C7C5A8B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001C6C7C5A8B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C6C7C5A8B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C6C566FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C6C7...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C6C4DD2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C6C566FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C6C7...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C6C7...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C6C7C0DAC0>
          └ <fastapi.applications.FastAPI object at 0x000001C6C4DD2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C6C7BF6EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C6C7C0DA00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C6C7C0DAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C6C7BF6EE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001C6C548BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C6C7C0DA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C6C7C0DA00...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C6C7C0D850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C6C7C0DA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C6C7C0DA00...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C6C7C2E9A0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C6C7BC6F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C6C7C0D850>
          └ <function wrap_app_handling_exceptions at 0x000001C6C5224790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08AF0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C6C7BC6F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08AF0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C6C7BC6F40>>
          └ <fastapi.routing.APIRouter object at 0x000001C6C7BC6F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08AF0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C6C51FDD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08AF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C6C7BF6430>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08AF0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C6C7C2EC10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C6C7C08A60>
          └ <function wrap_app_handling_exceptions at 0x000001C6C5224790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08B80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C6C7C08A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C6C7C2EC10>
                     └ <function get_request_handler.<locals>.app at 0x000001C6C7BF63A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001C6C520B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001C6C7C2EFD0>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000001C6C7BDA4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001C6C5172BB0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001C6C7C2EFD0>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000001C6C7B9A640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:12:01.684 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 376
               │     └ 3
               └ <function _main at 0x000001C6C25794C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 376
           │    └ <function BaseProcess._bootstrap at 0x000001C6C24585E0>
           └ <SpawnProcess name='SpawnProcess-16' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C6C2463C10>
    └ <SpawnProcess name='SpawnProcess-16' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C6C258E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-16' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-16' parent=10336 started>
    │    └ <function subprocess_started at 0x000001C6C44A3EE0>
    └ <SpawnProcess name='SpawnProcess-16' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=676, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C6C258E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=676, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C6C44A30D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C6C258E460>
           │       └ <function run at 0x000001C6C413C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C6C5638340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C6C413D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C6C413D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C6C41404C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C6C40AE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C6C7C5A8B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001C6C7C5A8B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001C6C7C5A8B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C6C7C5A8B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C6C566FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C6C7...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C6C4DD2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C6C566FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C6C7...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C6C7...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C6C7C0DAC0>
          └ <fastapi.applications.FastAPI object at 0x000001C6C4DD2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C6C7BF6EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C6C7C0DA00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C6C7C0DAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C6C7BF6EE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001C6C548BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C6C7C0DA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C6C7C0DA00...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C6C7C0D850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C6C7C0DA00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C6C7C0DA00...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C6C7C2E9A0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C6C7BC6F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C6C7C0D850>
          └ <function wrap_app_handling_exceptions at 0x000001C6C5224790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08AF0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C6C7BC6F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08AF0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C6C7BC6F40>>
          └ <fastapi.routing.APIRouter object at 0x000001C6C7BC6F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08AF0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C6C51FDD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08AF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C6C7BF6430>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08AF0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C6C7C2EC10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C6C7C08A60>
          └ <function wrap_app_handling_exceptions at 0x000001C6C5224790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C6C7C08B80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C6C7C08A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C6C7C2EC10>
                     └ <function get_request_handler.<locals>.app at 0x000001C6C7BF63A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001C6C520B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001C6C7C2EFD0>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000001C6C7BDA4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001C6C5172BB0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.id, db)
          │        │           │            │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001C6C7C2EFD0>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000001C6C7B9A640>
          └ <class 'app.crud.auth.user.UserCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:13:19.721 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 372
               │     └ 3
               └ <function _main at 0x00000186614794C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 372
           │    └ <function BaseProcess._bootstrap at 0x00000186613785E0>
           └ <SpawnProcess name='SpawnProcess-17' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000018661383C10>
    └ <SpawnProcess name='SpawnProcess-17' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001866148E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=10336 started>
    │    └ <function subprocess_started at 0x0000018663393EE0>
    └ <SpawnProcess name='SpawnProcess-17' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001866148E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000186633930D0>
           │       │   └ <uvicorn.server.Server object at 0x000001866148E460>
           │       └ <function run at 0x000001866302C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000018664528340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001866302D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001866302D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000186630304C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000018662F9E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000018666B669D0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000018666B669D0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000018666B669D0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000018666B669D0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001866455DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018666...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000018663CC2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001866455DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018666...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018666...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000018666AEDAC0>
          └ <fastapi.applications.FastAPI object at 0x0000018663CC2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018666AD6EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018666AED940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000018666AEDAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018666AD6EE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001866437BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018666AED940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000018666AED940...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000018666AED850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018666AED940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000018666AED940...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000018666B0E9A0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000018666AA7F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000018666AED850>
          └ <function wrap_app_handling_exceptions at 0x0000018664129790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8AF0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000018666AA7F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8AF0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000018666AA7F40>>
          └ <fastapi.routing.APIRouter object at 0x0000018666AA7F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8AF0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000186640F0D30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8AF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000018666AD6430>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8AF0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000018666B0EC10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000018666AE8A60>
          └ <function wrap_app_handling_exceptions at 0x0000018664129790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8B80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000018666AE8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000018666B0EC10>
                     └ <function get_request_handler.<locals>.app at 0x0000018666AD63A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000186640EC8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000018666B0EFD0>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000018666ABA4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000018664054BB0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000018666B0EFD0>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x0000018666A7A640>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 94, in update_user
    if "updated_at" in update_data.keys():
                       └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pydantic\main.py", line 767, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')

AttributeError: 'UserUpdateForm' object has no attribute 'keys'
2024-03-10 00:13:19.765 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 372
               │     └ 3
               └ <function _main at 0x00000186614794C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 372
           │    └ <function BaseProcess._bootstrap at 0x00000186613785E0>
           └ <SpawnProcess name='SpawnProcess-17' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000018661383C10>
    └ <SpawnProcess name='SpawnProcess-17' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001866148E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=10336 started>
    │    └ <function subprocess_started at 0x0000018663393EE0>
    └ <SpawnProcess name='SpawnProcess-17' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001866148E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000186633930D0>
           │       │   └ <uvicorn.server.Server object at 0x000001866148E460>
           │       └ <function run at 0x000001866302C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000018664528340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001866302D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001866302D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000186630304C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000018662F9E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000018666B669D0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000018666B669D0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000018666B669D0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000018666B669D0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001866455DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018666...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000018663CC2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001866455DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018666...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018666...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000018666AEDAC0>
          └ <fastapi.applications.FastAPI object at 0x0000018663CC2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018666AD6EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018666AED940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000018666AEDAC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018666AD6EE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001866437BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018666AED940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000018666AED940...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000018666AED850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018666AED940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000018666AED940...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000018666B0E9A0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000018666AA7F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000018666AED850>
          └ <function wrap_app_handling_exceptions at 0x0000018664129790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8AF0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000018666AA7F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8AF0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000018666AA7F40>>
          └ <fastapi.routing.APIRouter object at 0x0000018666AA7F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8AF0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000186640F0D30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8AF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000018666AD6430>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8AF0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000018666B0EC10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000018666AE8A60>
          └ <function wrap_app_handling_exceptions at 0x0000018664129790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018666AE8B80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000018666AE8A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000018666B0EC10>
                     └ <function get_request_handler.<locals>.app at 0x0000018666AD63A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000186640EC8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000018666B0EFD0>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000018666ABA4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000018664054BB0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000018666B0EFD0>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x0000018666A7A640>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 94, in update_user
    if "updated_at" in update_data.keys():
                       └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pydantic\main.py", line 767, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')

AttributeError: 'UserUpdateForm' object has no attribute 'keys'
2024-03-10 00:14:07.275 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 312
               │     └ 3
               └ <function _main at 0x000001B2A64F94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 312
           │    └ <function BaseProcess._bootstrap at 0x000001B2A62D85E0>
           └ <SpawnProcess name='SpawnProcess-18' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B2A62E3C10>
    └ <SpawnProcess name='SpawnProcess-18' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B2A650E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=10336 started>
    │    └ <function subprocess_started at 0x000001B2A8424EE0>
    └ <SpawnProcess name='SpawnProcess-18' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=744, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B2A650E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=744, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001B2A84240D0>
           │       │   └ <uvicorn.server.Server object at 0x000001B2A650E460>
           │       └ <function run at 0x000001B2A80BC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B2A95B8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B2A80BD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B2A80BD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B2A80C14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B2A802E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001B2ABBFAA60>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001B2ABBFAA60>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001B2ABBFAA60>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001B2ABBFAA60>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B2A95EFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B2AB...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B2A8D52FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B2A95EFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B2AB...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B2AB...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B2ABB7E910>
          └ <fastapi.applications.FastAPI object at 0x000001B2A8D52FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B2ABB66C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B2ABB7E7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B2ABB7E910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B2ABB66C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001B2A940BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B2ABB7E7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B2ABB7E7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B2ABB7E760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B2ABB7E7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B2ABB7E7F0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001B2ABBA5850>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001B2ABB37F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B2ABB7E760>
          └ <function wrap_app_handling_exceptions at 0x000001B2A91CE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001B2ABB37F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001B2ABB37F40>>
          └ <fastapi.routing.APIRouter object at 0x000001B2ABB37F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001B2A917FD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001B2ABB664C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001B2ABBA5AC0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001B2ABB7A670>
          └ <function wrap_app_handling_exceptions at 0x000001B2A91CE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001B2ABB7A670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B2ABBA5AC0>
                     └ <function get_request_handler.<locals>.app at 0x000001B2ABB66430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001B2A91728B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001B2ABBA5E80>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000001B2ABB4B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001B2A90E2C40>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001B2ABBA5E80>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000001B2ABB0A640>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 95, in update_user
    update_data["updated_at"] = datetime.now()
    │                           │        └ <method 'now' of 'datetime.datetime' objects>
    │                           └ <class 'datetime.datetime'>
    └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...

TypeError: 'UserUpdateForm' object does not support item assignment
2024-03-10 00:14:07.330 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 312
               │     └ 3
               └ <function _main at 0x000001B2A64F94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 312
           │    └ <function BaseProcess._bootstrap at 0x000001B2A62D85E0>
           └ <SpawnProcess name='SpawnProcess-18' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B2A62E3C10>
    └ <SpawnProcess name='SpawnProcess-18' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B2A650E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=10336 started>
    │    └ <function subprocess_started at 0x000001B2A8424EE0>
    └ <SpawnProcess name='SpawnProcess-18' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=744, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B2A650E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=744, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001B2A84240D0>
           │       │   └ <uvicorn.server.Server object at 0x000001B2A650E460>
           │       └ <function run at 0x000001B2A80BC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B2A95B8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B2A80BD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B2A80BD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B2A80C14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B2A802E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001B2ABBFAA60>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001B2ABBFAA60>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001B2ABBFAA60>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001B2ABBFAA60>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B2A95EFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B2AB...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B2A8D52FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B2A95EFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B2AB...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B2AB...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B2ABB7E910>
          └ <fastapi.applications.FastAPI object at 0x000001B2A8D52FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B2ABB66C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B2ABB7E7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B2ABB7E910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B2ABB66C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001B2A940BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B2ABB7E7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B2ABB7E7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B2ABB7E760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B2ABB7E7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B2ABB7E7F0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001B2ABBA5850>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001B2ABB37F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B2ABB7E760>
          └ <function wrap_app_handling_exceptions at 0x000001B2A91CE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001B2ABB37F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001B2ABB37F40>>
          └ <fastapi.routing.APIRouter object at 0x000001B2ABB37F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001B2A917FD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001B2ABB664C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001B2ABBA5AC0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001B2ABB7A670>
          └ <function wrap_app_handling_exceptions at 0x000001B2A91CE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B2ABB7A8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001B2ABB7A670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B2ABBA5AC0>
                     └ <function get_request_handler.<locals>.app at 0x000001B2ABB66430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001B2A91728B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001B2ABBA5E80>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000001B2ABB4B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001B2A90E2C40>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001B2ABBA5E80>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000001B2ABB0A640>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 95, in update_user
    update_data["updated_at"] = datetime.now()
    │                           │        └ <method 'now' of 'datetime.datetime' objects>
    │                           └ <class 'datetime.datetime'>
    └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...

TypeError: 'UserUpdateForm' object does not support item assignment
2024-03-10 00:15:04.539 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000026459858EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000026459897790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
    │      │       └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000026459CC9B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
           │    │      │    │              └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459CC9CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459ECE740>
           └ <_AsyncIoGreenlet object at 0x0000026459EDAEC0 (otid=0x0000026458153030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459ECE740>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
                   │    │               └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Cursor._query at 0x0000026459D67160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000026459...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Connection.query at 0x0000026459D730D0>
          └ <aiomysql.connection.Connection object at 0x0000026459E4DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000026459D73820>
          └ <aiomysql.connection.Connection object at 0x0000026459E4DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000026459D74430>
          └ <aiomysql.connection.MySQLResult object at 0x0000026459EC8D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000026459EC8D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000026459D43790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000026459E9E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000026459E9E280>
    │   └ <function raise_mysql_exception at 0x0000026459CF21F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'email' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'email' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 388
               │     └ 3
               └ <function _main at 0x00000264547C94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 388
           │    └ <function BaseProcess._bootstrap at 0x00000264546B85E0>
           └ <SpawnProcess name='SpawnProcess-19' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000264546C3C10>
    └ <SpawnProcess name='SpawnProcess-19' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000264547DE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-19' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-19' parent=10336 started>
    │    └ <function subprocess_started at 0x00000264566F3EE0>
    └ <SpawnProcess name='SpawnProcess-19' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=512, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000264547DE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=512, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000264566F30D0>
           │       │   └ <uvicorn.server.Server object at 0x00000264547DE460>
           │       └ <function run at 0x000002645638C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000264578CA340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002645638D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002645638D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000264563904C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000264562FE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000026459EECB20>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000026459EECB20>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000026459EECB20>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000026459EECB20>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000026457881AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026459...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000026457022FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000026457881AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026459...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026459...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000026459E4D910>
          └ <fastapi.applications.FastAPI object at 0x0000026457022FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000026459E36C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026459E4D7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000026459E4D910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000026459E36C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000264576DBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026459E4D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000026459E4D7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000026459E4D760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026459E4D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000026459E4D7F0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000026459E75850>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000026459E07F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000026459E4D760>
          └ <function wrap_app_handling_exceptions at 0x000002645749E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000026459E07F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000026459E07F40>>
          └ <fastapi.routing.APIRouter object at 0x0000026459E07F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002645744DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000026459E364C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000026459E75AC0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026459E4A670>
          └ <function wrap_app_handling_exceptions at 0x000002645749E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000026459E4A670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000026459E75AC0>
                     └ <function get_request_handler.<locals>.app at 0x0000026459E36430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000264574418B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000026459E75E80>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000026459E1B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000264573C1C40>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000026459E75E80>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x0000026459DDA640>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 99, in update_user
    await async_session.execute(stmt)
          │             │       └ <sqlalchemy.sql.dml.Update object at 0x0000026459EC8F10>
          │             └ <function AsyncSession.execute at 0x0000026459C41160>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000026459E75E80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x00000264582D3CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000026459EDAEC0 (otid=0x0000026458153030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x0000026459B65700>
           └ <sqlalchemy.orm.session.Session object at 0x0000026459E75EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod object at 0x0000026459B3D1C0>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMUpdate'>
                   └ typing.Any

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1617, in orm_execute_statement
    return super().orm_execute_statement(

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x0000026459794940>
             └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedUpdate object at 0x0000026459EC8730>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000026459794C10>
           └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000026459794DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000026459794E50>
           └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000264597960D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'email' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'email' cannot be null"), <traceback object at 0x00000264...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'email\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000026459858EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000026459897790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
    │      │       └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000026459CC9B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
           │    │      │    │              └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459CC9CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459ECE740>
           └ <_AsyncIoGreenlet object at 0x0000026459EDAEC0 (otid=0x0000026458153030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459ECE740>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
                   │    │               └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Cursor._query at 0x0000026459D67160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000026459...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Connection.query at 0x0000026459D730D0>
          └ <aiomysql.connection.Connection object at 0x0000026459E4DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000026459D73820>
          └ <aiomysql.connection.Connection object at 0x0000026459E4DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000026459D74430>
          └ <aiomysql.connection.MySQLResult object at 0x0000026459EC8D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000026459EC8D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000026459D43790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000026459E9E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000026459E9E280>
    │   └ <function raise_mysql_exception at 0x0000026459CF21F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'email' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'email' cannot be null")
[SQL: UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s]
[parameters: ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-03-10 00:15:04.779 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000026459858EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000026459897790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
    │      │       └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000026459CC9B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
           │    │      │    │              └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459CC9CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459ECE740>
           └ <_AsyncIoGreenlet object at 0x0000026459EDAEC0 (otid=0x0000026458153030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459ECE740>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
                   │    │               └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Cursor._query at 0x0000026459D67160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000026459...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Connection.query at 0x0000026459D730D0>
          └ <aiomysql.connection.Connection object at 0x0000026459E4DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000026459D73820>
          └ <aiomysql.connection.Connection object at 0x0000026459E4DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000026459D74430>
          └ <aiomysql.connection.MySQLResult object at 0x0000026459EC8D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000026459EC8D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000026459D43790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000026459E9E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000026459E9E280>
    │   └ <function raise_mysql_exception at 0x0000026459CF21F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'email' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'email' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 388
               │     └ 3
               └ <function _main at 0x00000264547C94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 388
           │    └ <function BaseProcess._bootstrap at 0x00000264546B85E0>
           └ <SpawnProcess name='SpawnProcess-19' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000264546C3C10>
    └ <SpawnProcess name='SpawnProcess-19' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000264547DE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-19' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-19' parent=10336 started>
    │    └ <function subprocess_started at 0x00000264566F3EE0>
    └ <SpawnProcess name='SpawnProcess-19' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=512, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000264547DE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=512, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000264566F30D0>
           │       │   └ <uvicorn.server.Server object at 0x00000264547DE460>
           │       └ <function run at 0x000002645638C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000264578CA340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002645638D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002645638D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000264563904C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000264562FE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000026459EECB20>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000026459EECB20>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000026459EECB20>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000026459EECB20>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000026457881AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026459...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000026457022FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000026457881AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026459...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026459...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000026459E4D910>
          └ <fastapi.applications.FastAPI object at 0x0000026457022FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000026459E36C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026459E4D7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000026459E4D910>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000026459E36C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000264576DBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026459E4D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000026459E4D7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000026459E4D760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026459E4D7F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000026459E4D7F0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000026459E75850>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000026459E07F40>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000026459E4D760>
          └ <function wrap_app_handling_exceptions at 0x000002645749E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000026459E07F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000026459E07F40>>
          └ <fastapi.routing.APIRouter object at 0x0000026459E07F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002645744DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000026459E364C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000026459E75AC0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026459E4A670>
          └ <function wrap_app_handling_exceptions at 0x000002645749E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026459E4A8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000026459E4A670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000026459E75AC0>
                     └ <function get_request_handler.<locals>.app at 0x0000026459E36430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000264574418B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000026459E75E80>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000026459E1B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000264573C1C40>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000026459E75E80>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x0000026459DDA640>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 99, in update_user
    await async_session.execute(stmt)
          │             │       └ <sqlalchemy.sql.dml.Update object at 0x0000026459EC8F10>
          │             └ <function AsyncSession.execute at 0x0000026459C41160>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000026459E75E80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x00000264582D3CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000026459EDAEC0 (otid=0x0000026458153030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x0000026459B65700>
           └ <sqlalchemy.orm.session.Session object at 0x0000026459E75EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod object at 0x0000026459B3D1C0>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMUpdate'>
                   └ typing.Any

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1617, in orm_execute_statement
    return super().orm_execute_statement(

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x0000026459794940>
             └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedUpdate object at 0x0000026459EC8730>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000026459794C10>
           └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000026459794DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000026459794E50>
           └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000264597960D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'email' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'email' cannot be null"), <traceback object at 0x00000264...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'email\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000026459858EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000026459897790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000026459E9EA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
    │      │       └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000026459CC9B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
           │    │      │    │              └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459CC9CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459ECE740>
           └ <_AsyncIoGreenlet object at 0x0000026459EDAEC0 (otid=0x0000026458153030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000026459ECE740>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
                   │    │               └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000026459EEE180>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Cursor._query at 0x0000026459D67160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000026459...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Connection.query at 0x0000026459D730D0>
          └ <aiomysql.connection.Connection object at 0x0000026459E4DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000026459D73820>
          └ <aiomysql.connection.Connection object at 0x0000026459E4DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000026459D74430>
          └ <aiomysql.connection.MySQLResult object at 0x0000026459EC8D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000026459EC8D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000026459D43790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000026459E9E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000026459E9E280>
    │   └ <function raise_mysql_exception at 0x0000026459CF21F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'email' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'email' cannot be null")
[SQL: UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s]
[parameters: ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-03-10 00:17:35.928 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002497F6A8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000002497F6E7790>
    └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
    │      │       └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000002497FB19B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
           │    │      │    │              └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FB19CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FD1E740>
           └ <_AsyncIoGreenlet object at 0x000002497FD2BF80 (otid=0x000002497DFA3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FD1E740>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
                   │    │               └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Cursor._query at 0x000002497FBB7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000002497F...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Connection.query at 0x000002497FBC30D0>
          └ <aiomysql.connection.Connection object at 0x000002497FC9DB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000002497FBC3820>
          └ <aiomysql.connection.Connection object at 0x000002497FC9DB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000002497FBC4430>
          └ <aiomysql.connection.MySQLResult object at 0x000002497FD19D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000002497FD19D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000002497FB93790>
    └ <pymysql.protocol.MysqlPacket object at 0x000002497FCEE2B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000002497FCEE2B0>
    │   └ <function raise_mysql_exception at 0x000002497FB421F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'email' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'email' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 288
               │     └ 3
               └ <function _main at 0x000002497A6194C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 288
           │    └ <function BaseProcess._bootstrap at 0x000002497A4F85E0>
           └ <SpawnProcess name='SpawnProcess-20' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002497A503C10>
    └ <SpawnProcess name='SpawnProcess-20' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002497A62E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-20' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-20' parent=10336 started>
    │    └ <function subprocess_started at 0x000002497C545EE0>
    └ <SpawnProcess name='SpawnProcess-20' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=460, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002497A62E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=460, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002497C5450D0>
           │       │   └ <uvicorn.server.Server object at 0x000002497A62E460>
           │       └ <function run at 0x000002497C1DC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002497D71A340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002497C1DD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002497C1DD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002497C1E04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002497C14E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002497FD48B20>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000002497FD48B20>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000002497FD48B20>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002497FD48B20>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002497D734AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002497F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002497CE72FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002497D734AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002497F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002497F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002497FC9D940>
          └ <fastapi.applications.FastAPI object at 0x000002497CE72FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002497FC88C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002497FC9D820>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002497FC9D940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002497FC88C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000002497D52BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002497FC9D820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002497FC9D820...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002497FC9D790>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002497FC9D820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002497FC9D820...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002497FCC5880>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002497FC56FD0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002497FC9D790>
          └ <function wrap_app_handling_exceptions at 0x000002497D2C4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002497FC56FD0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002497FC56FD0>>
          └ <fastapi.routing.APIRouter object at 0x000002497FC56FD0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002497D29DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002497FC884C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002497FCC5AF0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002497FC9A670>
          └ <function wrap_app_handling_exceptions at 0x000002497D2C4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002497FC9A670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002497FCC5AF0>
                     └ <function get_request_handler.<locals>.app at 0x000002497FC88430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002497D2AB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002497FCC5EB0>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000002497FC6B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002497D202C70>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002497FCC5EB0>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000002497FC2B670>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 99, in update_user
    await async_session.execute(stmt)
          │             │       └ <sqlalchemy.sql.dml.Update object at 0x000002497FD19F10>
          │             └ <function AsyncSession.execute at 0x000002497FA90160>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002497FCC5EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x000002497E122CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000002497FD2BF80 (otid=0x000002497DFA3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000002497F9B8700>
           └ <sqlalchemy.orm.session.Session object at 0x000002497FCC5F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod object at 0x000002497F98D1C0>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMUpdate'>
                   └ typing.Any

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1617, in orm_execute_statement
    return super().orm_execute_statement(

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000002497F5E4940>
             └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedUpdate object at 0x000002497FD19730>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000002497F5E4C10>
           └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000002497F5E4DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000002497F5E4E50>
           └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000002497F5E60D0>
    └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'email' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'email' cannot be null"), <traceback object at 0x00000249...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'email\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002497F6A8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000002497F6E7790>
    └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
    │      │       └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000002497FB19B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
           │    │      │    │              └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FB19CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FD1E740>
           └ <_AsyncIoGreenlet object at 0x000002497FD2BF80 (otid=0x000002497DFA3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FD1E740>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
                   │    │               └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Cursor._query at 0x000002497FBB7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000002497F...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Connection.query at 0x000002497FBC30D0>
          └ <aiomysql.connection.Connection object at 0x000002497FC9DB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000002497FBC3820>
          └ <aiomysql.connection.Connection object at 0x000002497FC9DB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000002497FBC4430>
          └ <aiomysql.connection.MySQLResult object at 0x000002497FD19D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000002497FD19D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000002497FB93790>
    └ <pymysql.protocol.MysqlPacket object at 0x000002497FCEE2B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000002497FCEE2B0>
    │   └ <function raise_mysql_exception at 0x000002497FB421F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'email' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'email' cannot be null")
[SQL: UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s]
[parameters: ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-03-10 00:17:36.015 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002497F6A8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000002497F6E7790>
    └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
    │      │       └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000002497FB19B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
           │    │      │    │              └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FB19CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FD1E740>
           └ <_AsyncIoGreenlet object at 0x000002497FD2BF80 (otid=0x000002497DFA3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FD1E740>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
                   │    │               └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Cursor._query at 0x000002497FBB7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000002497F...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Connection.query at 0x000002497FBC30D0>
          └ <aiomysql.connection.Connection object at 0x000002497FC9DB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000002497FBC3820>
          └ <aiomysql.connection.Connection object at 0x000002497FC9DB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000002497FBC4430>
          └ <aiomysql.connection.MySQLResult object at 0x000002497FD19D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000002497FD19D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000002497FB93790>
    └ <pymysql.protocol.MysqlPacket object at 0x000002497FCEE2B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000002497FCEE2B0>
    │   └ <function raise_mysql_exception at 0x000002497FB421F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'email' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'email' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 288
               │     └ 3
               └ <function _main at 0x000002497A6194C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 288
           │    └ <function BaseProcess._bootstrap at 0x000002497A4F85E0>
           └ <SpawnProcess name='SpawnProcess-20' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002497A503C10>
    └ <SpawnProcess name='SpawnProcess-20' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002497A62E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-20' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-20' parent=10336 started>
    │    └ <function subprocess_started at 0x000002497C545EE0>
    └ <SpawnProcess name='SpawnProcess-20' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=460, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002497A62E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=460, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002497C5450D0>
           │       │   └ <uvicorn.server.Server object at 0x000002497A62E460>
           │       └ <function run at 0x000002497C1DC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002497D71A340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002497C1DD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002497C1DD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002497C1E04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002497C14E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002497FD48B20>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000002497FD48B20>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000002497FD48B20>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002497FD48B20>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002497D734AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002497F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002497CE72FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002497D734AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002497F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002497F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002497FC9D940>
          └ <fastapi.applications.FastAPI object at 0x000002497CE72FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002497FC88C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002497FC9D820>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002497FC9D940>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002497FC88C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000002497D52BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002497FC9D820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002497FC9D820...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002497FC9D790>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002497FC9D820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002497FC9D820...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002497FCC5880>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002497FC56FD0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002497FC9D790>
          └ <function wrap_app_handling_exceptions at 0x000002497D2C4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002497FC56FD0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002497FC56FD0>>
          └ <fastapi.routing.APIRouter object at 0x000002497FC56FD0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002497D29DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002497FC884C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002497FCC5AF0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002497FC9A670>
          └ <function wrap_app_handling_exceptions at 0x000002497D2C4790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002497FC9A8B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002497FC9A670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002497FCC5AF0>
                     └ <function get_request_handler.<locals>.app at 0x000002497FC88430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002497D2AB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002497FCC5EB0>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x000002497FC6B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002497D202C70>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002497FCC5EB0>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x000002497FC2B670>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 99, in update_user
    await async_session.execute(stmt)
          │             │       └ <sqlalchemy.sql.dml.Update object at 0x000002497FD19F10>
          │             └ <function AsyncSession.execute at 0x000002497FA90160>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002497FCC5EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x000002497E122CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000002497FD2BF80 (otid=0x000002497DFA3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000002497F9B8700>
           └ <sqlalchemy.orm.session.Session object at 0x000002497FCC5F10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod object at 0x000002497F98D1C0>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMUpdate'>
                   └ typing.Any

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1617, in orm_execute_statement
    return super().orm_execute_statement(

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000002497F5E4940>
             └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedUpdate object at 0x000002497FD19730>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000002497F5E4C10>
           └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000002497F5E4DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000002497F5E4E50>
           └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000002497F5E60D0>
    └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'email' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'email' cannot be null"), <traceback object at 0x00000249...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'email\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002497F6A8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000002497F6E7790>
    └ <sqlalchemy.engine.base.Connection object at 0x000002497FCEE460>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
    │      │       └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000002497FB19B80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
           │    │      │    │              └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FB19CA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FD1E740>
           └ <_AsyncIoGreenlet object at 0x000002497FD2BF80 (otid=0x000002497DFA3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000002497FD1E740>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)
                   │    │               └ 'UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s'
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000002497FD1AF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Cursor._query at 0x000002497FBB7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000002497F...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "UPDATE brisk_users SET id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', username=NULL, name='string', email=NULL, `role`=NULL, pho...
          │    └ <function Connection.query at 0x000002497FBC30D0>
          └ <aiomysql.connection.Connection object at 0x000002497FC9DB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000002497FBC3820>
          └ <aiomysql.connection.Connection object at 0x000002497FC9DB20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000002497FBC4430>
          └ <aiomysql.connection.MySQLResult object at 0x000002497FD19D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000002497FD19D00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000002497FB93790>
    └ <pymysql.protocol.MysqlPacket object at 0x000002497FCEE2B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000002497FCEE2B0>
    │   └ <function raise_mysql_exception at 0x000002497FB421F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'email' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'email' cannot be null")
[SQL: UPDATE brisk_users SET id=%s, username=%s, name=%s, email=%s, `role`=%s, phone=%s, updated_at=now(), is_valid=%s]
[parameters: ('b9f67dc4-8e7b-4d6c-b576-9655b278eeef', None, 'string', None, None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-03-10 00:23:54.634 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 412
               │     └ 3
               └ <function _main at 0x00000222DC2F94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 412
           │    └ <function BaseProcess._bootstrap at 0x00000222DC1C85E0>
           └ <SpawnProcess name='SpawnProcess-22' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000222DC1D3C10>
    └ <SpawnProcess name='SpawnProcess-22' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000222DC30E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-22' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-22' parent=10336 started>
    │    └ <function subprocess_started at 0x00000222DE224EE0>
    └ <SpawnProcess name='SpawnProcess-22' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=556, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000222DC30E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=556, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000222DE2240D0>
           │       │   └ <uvicorn.server.Server object at 0x00000222DC30E460>
           │       └ <function run at 0x00000222DDEBC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000222DF3B9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000222DDEBD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000222DDEBD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000222DDEC14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000222DDE2E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000222E19F6AF0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000222E19F6AF0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000222E19F6AF0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000222E19F6AF0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000222DF3EFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000222E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000222DEB52FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000222DF3EFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000222E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000222E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000222E197C9D0>
          └ <fastapi.applications.FastAPI object at 0x00000222DEB52FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000222E1968C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000222E197C8B0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000222E197C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000222E1968C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000222DF20BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000222E197C8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000222E197C8B0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000222E197C820>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000222E197C8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000222E197C8B0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000222E199E910>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000222E191DD90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000222E197C820>
          └ <function wrap_app_handling_exceptions at 0x00000222DEFAB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E1979820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000222E191DD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E1979820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000222E191DD90>>
          └ <fastapi.routing.APIRouter object at 0x00000222E191DD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E1979820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000222DEF80D30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E1979820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000222E19684C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E1979820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000222E199EB80>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000222E1979670>
          └ <function wrap_app_handling_exceptions at 0x00000222DEFAB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E19798B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000222E1979670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000222E199EB80>
                     └ <function get_request_handler.<locals>.app at 0x00000222E1968430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000222DEF8B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000222E199EF40>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x00000222E194B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000222DEEE2D00>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000222E199EF40>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x00000222E1908700>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 103, in update_user
    stmt = update(User).where(and_(User.id == update_data.id)).values(update_data)
           │      │           │    │    │     │                       └ {'id': 'b9f67dc4-8e7b-4d6c-b576-9655b278eeef', 'name': 'string'}
           │      │           │    │    │     └ {'id': 'b9f67dc4-8e7b-4d6c-b576-9655b278eeef', 'name': 'string'}
           │      │           │    │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000222E18A84A0>
           │      │           │    └ <class 'app.models.user.User'>
           │      │           └ <function and_ at 0x00000222E1250F70>
           │      └ <class 'app.models.user.User'>
           └ <function update at 0x00000222E1250B80>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:23:54.667 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 412
               │     └ 3
               └ <function _main at 0x00000222DC2F94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 412
           │    └ <function BaseProcess._bootstrap at 0x00000222DC1C85E0>
           └ <SpawnProcess name='SpawnProcess-22' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000222DC1D3C10>
    └ <SpawnProcess name='SpawnProcess-22' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000222DC30E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-22' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-22' parent=10336 started>
    │    └ <function subprocess_started at 0x00000222DE224EE0>
    └ <SpawnProcess name='SpawnProcess-22' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=556, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000222DC30E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=556, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000222DE2240D0>
           │       │   └ <uvicorn.server.Server object at 0x00000222DC30E460>
           │       └ <function run at 0x00000222DDEBC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000222DF3B9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000222DDEBD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000222DDEBD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000222DDEC14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000222DDE2E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000222E19F6AF0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000222E19F6AF0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000222E19F6AF0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000222E19F6AF0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000222DF3EFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000222E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000222DEB52FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000222DF3EFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000222E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000222E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000222E197C9D0>
          └ <fastapi.applications.FastAPI object at 0x00000222DEB52FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000222E1968C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000222E197C8B0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000222E197C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000222E1968C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000222DF20BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000222E197C8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000222E197C8B0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000222E197C820>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000222E197C8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000222E197C8B0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000222E199E910>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000222E191DD90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000222E197C820>
          └ <function wrap_app_handling_exceptions at 0x00000222DEFAB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E1979820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000222E191DD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E1979820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000222E191DD90>>
          └ <fastapi.routing.APIRouter object at 0x00000222E191DD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E1979820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000222DEF80D30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E1979820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000222E19684C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E1979820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000222E199EB80>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000222E1979670>
          └ <function wrap_app_handling_exceptions at 0x00000222DEFAB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000222E19798B0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000222E1979670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000222E199EB80>
                     └ <function get_request_handler.<locals>.app at 0x00000222E1968430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000222DEF8B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000222E199EF40>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x00000222E194B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000222DEEE2D00>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000222E199EF40>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x00000222E1908700>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 103, in update_user
    stmt = update(User).where(and_(User.id == update_data.id)).values(update_data)
           │      │           │    │    │     │                       └ {'id': 'b9f67dc4-8e7b-4d6c-b576-9655b278eeef', 'name': 'string'}
           │      │           │    │    │     └ {'id': 'b9f67dc4-8e7b-4d6c-b576-9655b278eeef', 'name': 'string'}
           │      │           │    │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000222E18A84A0>
           │      │           │    └ <class 'app.models.user.User'>
           │      │           └ <function and_ at 0x00000222E1250F70>
           │      └ <class 'app.models.user.User'>
           └ <function update at 0x00000222E1250B80>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:24:47.188 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 376
               │     └ 3
               └ <function _main at 0x0000025E659E94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 376
           │    └ <function BaseProcess._bootstrap at 0x0000025E658E85E0>
           └ <SpawnProcess name='SpawnProcess-23' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000025E658F3C10>
    └ <SpawnProcess name='SpawnProcess-23' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000025E659FE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-23' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-23' parent=10336 started>
    │    └ <function subprocess_started at 0x0000025E67905EE0>
    └ <SpawnProcess name='SpawnProcess-23' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000025E659FE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000025E679050D0>
           │       │   └ <uvicorn.server.Server object at 0x0000025E659FE460>
           │       └ <function run at 0x0000025E6759C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000025E68A99340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000025E6759D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000025E6759D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000025E675A04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000025E6750E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000025E6B049A60>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000025E6B049A60>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000025E6B049A60>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000025E6B049A60>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025E68ACFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025E6B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000025E68232FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025E68ACFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025E6B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025E6B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025E6B05C880>
          └ <fastapi.applications.FastAPI object at 0x0000025E68232FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025E67EB49D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025E6B05C520>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025E6B05C880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025E67EB49D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000025E688EBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025E6B05C520>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000025E6B05C520...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025E6B05C8B0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025E6B05C520>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000025E6B05C520...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000025E6B07A6A0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000025E6AFFCD90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025E6B05C8B0>
          └ <function wrap_app_handling_exceptions at 0x0000025E686AE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000025E6AFFCD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000025E6AFFCD90>>
          └ <fastapi.routing.APIRouter object at 0x0000025E6AFFCD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000025E6865DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000025E6B03A4C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000025E6B07A910>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000025E6B0598B0>
          └ <function wrap_app_handling_exceptions at 0x0000025E686AE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000025E6B0598B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000025E6B07A910>
                     └ <function get_request_handler.<locals>.app at 0x0000025E6B03A430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000025E686528B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000025E6B07AD60>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000025E6B02B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000025E685C2D00>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000025E6B07AD60>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x0000025E6AFE7700>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 103, in update_user
    stmt = update(User).where(and_(User.id == update_data.id)).values(update_data)
           │      │           │    │    │     │                       └ {'id': 'b9f67dc4-8e7b-4d6c-b576-9655b278eeef', 'name': 'string'}
           │      │           │    │    │     └ {'id': 'b9f67dc4-8e7b-4d6c-b576-9655b278eeef', 'name': 'string'}
           │      │           │    │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000025E6AF884A0>
           │      │           │    └ <class 'app.models.user.User'>
           │      │           └ <function and_ at 0x0000025E6A92FF70>
           │      └ <class 'app.models.user.User'>
           └ <function update at 0x0000025E6A92FB80>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 00:24:47.236 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 376
               │     └ 3
               └ <function _main at 0x0000025E659E94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 376
           │    └ <function BaseProcess._bootstrap at 0x0000025E658E85E0>
           └ <SpawnProcess name='SpawnProcess-23' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000025E658F3C10>
    └ <SpawnProcess name='SpawnProcess-23' parent=10336 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000025E659FE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-23' parent=10336 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-23' parent=10336 started>
    │    └ <function subprocess_started at 0x0000025E67905EE0>
    └ <SpawnProcess name='SpawnProcess-23' parent=10336 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000025E659FE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000025E679050D0>
           │       │   └ <uvicorn.server.Server object at 0x0000025E659FE460>
           │       └ <function run at 0x0000025E6759C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000025E68A99340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000025E6759D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000025E6759D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000025E675A04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000025E6750E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000025E6B049A60>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000025E6B049A60>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000025E6B049A60>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000025E6B049A60>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025E68ACFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025E6B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000025E68232FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025E68ACFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025E6B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025E6B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025E6B05C880>
          └ <fastapi.applications.FastAPI object at 0x0000025E68232FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025E67EB49D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025E6B05C520>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025E6B05C880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '70', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025E67EB49D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000025E688EBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025E6B05C520>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000025E6B05C520...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025E6B05C8B0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025E6B05C520>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000025E6B05C520...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000025E6B07A6A0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000025E6AFFCD90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025E6B05C8B0>
          └ <function wrap_app_handling_exceptions at 0x0000025E686AE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059820>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000025E6AFFCD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059820>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000025E6AFFCD90>>
          └ <fastapi.routing.APIRouter object at 0x0000025E6AFFCD90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000025E6865DD30>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000025E6B03A4C0>
          └ APIRoute(path='/api/v1/users/update', name='update', methods=['PUT'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059820>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000025E6B07A910>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000025E6B0598B0>
          └ <function wrap_app_handling_exceptions at 0x0000025E686AE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000025E6B059940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000025E6B0598B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000025E6B07A910>
                     └ <function get_request_handler.<locals>.app at 0x0000025E6B03A430>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000025E686528B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000025E6B07AD60>, 'user_info': {'id': '4e9b7ed6-205d-4a89-a4...
                 │         └ <function update at 0x0000025E6B02B4C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000025E685C2D00>

  File "E:\ProgramCode\python\brisk\app\apis\v1\auth\user.py", line 78, in update
    await UserCRUD.update_user(update_data, user_info.get("id"), db)
          │        │           │            │         │          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000025E6B07AD60>
          │        │           │            │         └ <method 'get' of 'dict' objects>
          │        │           │            └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │        │           └ UserUpdateForm(id='b9f67dc4-8e7b-4d6c-b576-9655b278eeef', name='string', username=None, phone=None, role=None, email=None, is...
          │        └ <staticmethod object at 0x0000025E6AFE7700>
          └ <class 'app.crud.auth.user.UserCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\auth\user.py", line 103, in update_user
    stmt = update(User).where(and_(User.id == update_data.id)).values(update_data)
           │      │           │    │    │     │                       └ {'id': 'b9f67dc4-8e7b-4d6c-b576-9655b278eeef', 'name': 'string'}
           │      │           │    │    │     └ {'id': 'b9f67dc4-8e7b-4d6c-b576-9655b278eeef', 'name': 'string'}
           │      │           │    │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000025E6AF884A0>
           │      │           │    └ <class 'app.models.user.User'>
           │      │           └ <function and_ at 0x0000025E6A92FF70>
           │      └ <class 'app.models.user.User'>
           └ <function update at 0x0000025E6A92FB80>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 12:27:53.966 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 12:27:53.967 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 12:57:52.985 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 12:57:52.987 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 14:22:04.488 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 14:22:04.489 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 14:22:04.490 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 14:22:04.491 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 14:22:04.491 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 14:22:04.493 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 14:22:04.494 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 14:22:04.494 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 14:31:52.196 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 14:31:52.197 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 15:01:51.207 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 15:01:51.209 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 15:20:24.606 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 96
               │     └ 3
               └ <function _main at 0x00000199038F94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 96
           │    └ <function BaseProcess._bootstrap at 0x00000199037F85E0>
           └ <SpawnProcess name='SpawnProcess-33' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000019903803C10>
    └ <SpawnProcess name='SpawnProcess-33' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001990390E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-33' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-33' parent=3284 started>
    │    └ <function subprocess_started at 0x0000019905814EE0>
    └ <SpawnProcess name='SpawnProcess-33' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=796, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001990390E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=796, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000199058140D0>
           │       │   └ <uvicorn.server.Server object at 0x000001990390E460>
           │       └ <function run at 0x00000199054AC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000199069A8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000199054AD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000199054AD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000199054B14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001990541E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001990906D5B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001990906D5B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001990906D5B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001990906D5B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000199069DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019908...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000019906142FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000199069DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019908...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019908...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000019908F7F640>
          └ <fastapi.applications.FastAPI object at 0x0000019906142FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000019905DC39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000019908F7F790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000019908F7F640>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000019905DC39D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000199067FBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000019908F7F790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000019908F7F790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000019908F7B910>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000019908F7F790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000019908F7F790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000019908FAD070>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000019908F14EB0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000019908F7B910>
          └ <function wrap_app_handling_exceptions at 0x000001990659B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000019908F5D040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000019908F14EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000019908F5D040>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000019908F14EB0>>
          └ <fastapi.routing.APIRouter object at 0x0000019908F14EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000019908F5D040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000019906575D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000019908F5D040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000019908F6CB80>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000019908F5D040>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000019908FAD820>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000019908F6CC10>
          └ <function wrap_app_handling_exceptions at 0x000001990659B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000199064D5DC0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000019908F6CC10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000019908FAD820>
                     └ <function get_request_handler.<locals>.app at 0x0000019908F6CA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000199065768B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x00000199064D5310>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000019908F7F0D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.id)
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x00000199064D0CA0>
          └ <class 'app.crud.config.address.AddressCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 15:20:24.900 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 96
               │     └ 3
               └ <function _main at 0x00000199038F94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 96
           │    └ <function BaseProcess._bootstrap at 0x00000199037F85E0>
           └ <SpawnProcess name='SpawnProcess-33' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000019903803C10>
    └ <SpawnProcess name='SpawnProcess-33' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001990390E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-33' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-33' parent=3284 started>
    │    └ <function subprocess_started at 0x0000019905814EE0>
    └ <SpawnProcess name='SpawnProcess-33' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=796, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001990390E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=796, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000199058140D0>
           │       │   └ <uvicorn.server.Server object at 0x000001990390E460>
           │       └ <function run at 0x00000199054AC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000199069A8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000199054AD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000199054AD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000199054B14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001990541E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001990906D5B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001990906D5B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001990906D5B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001990906D5B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000199069DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019908...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000019906142FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000199069DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019908...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019908...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000019908F7F640>
          └ <fastapi.applications.FastAPI object at 0x0000019906142FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000019905DC39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000019908F7F790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000019908F7F640>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000019905DC39D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000199067FBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000019908F7F790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000019908F7F790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000019908F7B910>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000019908F7F790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000019908F7F790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000019908FAD070>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000019908F14EB0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000019908F7B910>
          └ <function wrap_app_handling_exceptions at 0x000001990659B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000019908F5D040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000019908F14EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000019908F5D040>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000019908F14EB0>>
          └ <fastapi.routing.APIRouter object at 0x0000019908F14EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000019908F5D040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000019906575D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000019908F5D040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000019908F6CB80>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000019908F5D040>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000019908FAD820>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000019908F6CC10>
          └ <function wrap_app_handling_exceptions at 0x000001990659B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000199064D5DC0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000019...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000019908F6CC10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000019908FAD820>
                     └ <function get_request_handler.<locals>.app at 0x0000019908F6CA60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000199065768B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x00000199064D5310>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000019908F7F0D0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.id)
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x00000199064D0CA0>
          └ <class 'app.crud.config.address.AddressCRUD'>

AttributeError: 'dict' object has no attribute 'id'
2024-03-10 15:20:44.755 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 188
               │     └ 3
               └ <function _main at 0x0000024B5A6A94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 188
           │    └ <function BaseProcess._bootstrap at 0x0000024B5A5A85E0>
           └ <SpawnProcess name='SpawnProcess-34' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000024B5A5B3C10>
    └ <SpawnProcess name='SpawnProcess-34' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024B5A6BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-34' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-34' parent=3284 started>
    │    └ <function subprocess_started at 0x0000024B5C5D3EE0>
    └ <SpawnProcess name='SpawnProcess-34' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=780, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000024B5A6BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=780, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000024B5C5D30D0>
           │       │   └ <uvicorn.server.Server object at 0x0000024B5A6BE460>
           │       └ <function run at 0x0000024B5C26C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000024B5D768340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000024B5C26D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000024B5C26D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000024B5C2704C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000024B5C1DE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000024B5FDC8E50>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000024B5FDC8E50>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000024B5FDC8E50>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000024B5FDC8E50>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024B5D79FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024B5F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000024B5CF02FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024B5D79FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024B5F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024B5F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024B5FD42D90>
          └ <fastapi.applications.FastAPI object at 0x0000024B5CF02FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024B5CB839D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024B5FD42EB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024B5FD42D90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024B5CB839D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000024B5D5BBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024B5FD42EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000024B5FD42EB0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024B5FD42DF0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024B5FD42EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000024B5FD42EB0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000024B5FD58E20>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000024B5D59E280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024B5FD42DF0>
          └ <function wrap_app_handling_exceptions at 0x0000024B5D354790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000024B5D59E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000024B5D59E280>>
          └ <fastapi.routing.APIRouter object at 0x0000024B5D59E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000024B5D32DD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000024B5FD2DE50>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000024B5FD58FD0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000024B5FD44160>
          └ <function wrap_app_handling_exceptions at 0x0000024B5D354790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44430>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000024B5FD44160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000024B5FD58FD0>
                     └ <function get_request_handler.<locals>.app at 0x0000024B5FD2DD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000024B5D33B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000024B5FD03EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000024B5FD46790>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000024B5D295940>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    payload['create_user'] = user_id
    │                        └ '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1'
    └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')

TypeError: 'AddressPayload' object does not support item assignment
2024-03-10 15:20:44.789 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 188
               │     └ 3
               └ <function _main at 0x0000024B5A6A94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 188
           │    └ <function BaseProcess._bootstrap at 0x0000024B5A5A85E0>
           └ <SpawnProcess name='SpawnProcess-34' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000024B5A5B3C10>
    └ <SpawnProcess name='SpawnProcess-34' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024B5A6BE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-34' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-34' parent=3284 started>
    │    └ <function subprocess_started at 0x0000024B5C5D3EE0>
    └ <SpawnProcess name='SpawnProcess-34' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=780, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000024B5A6BE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=780, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000024B5C5D30D0>
           │       │   └ <uvicorn.server.Server object at 0x0000024B5A6BE460>
           │       └ <function run at 0x0000024B5C26C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000024B5D768340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000024B5C26D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000024B5C26D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000024B5C2704C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000024B5C1DE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000024B5FDC8E50>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000024B5FDC8E50>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000024B5FDC8E50>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000024B5FDC8E50>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024B5D79FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024B5F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000024B5CF02FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024B5D79FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024B5F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024B5F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024B5FD42D90>
          └ <fastapi.applications.FastAPI object at 0x0000024B5CF02FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024B5CB839D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024B5FD42EB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024B5FD42D90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024B5CB839D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000024B5D5BBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024B5FD42EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000024B5FD42EB0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024B5FD42DF0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024B5FD42EB0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000024B5FD42EB0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000024B5FD58E20>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000024B5D59E280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024B5FD42DF0>
          └ <function wrap_app_handling_exceptions at 0x0000024B5D354790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000024B5D59E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000024B5D59E280>>
          └ <fastapi.routing.APIRouter object at 0x0000024B5D59E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000024B5D32DD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000024B5FD2DE50>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000024B5FD58FD0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000024B5FD44160>
          └ <function wrap_app_handling_exceptions at 0x0000024B5D354790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000024B5FD44430>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000024B5FD44160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000024B5FD58FD0>
                     └ <function get_request_handler.<locals>.app at 0x0000024B5FD2DD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000024B5D33B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000024B5FD03EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000024B5FD46790>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000024B5D295940>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    payload['create_user'] = user_id
    │                        └ '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1'
    └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')

TypeError: 'AddressPayload' object does not support item assignment
2024-03-10 15:29:28.013 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 192
               │     └ 3
               └ <function _main at 0x000001F76E2994C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 192
           │    └ <function BaseProcess._bootstrap at 0x000001F76E1885E0>
           └ <SpawnProcess name='SpawnProcess-36' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F76E193C10>
    └ <SpawnProcess name='SpawnProcess-36' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F76E2AE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-36' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-36' parent=3284 started>
    │    └ <function subprocess_started at 0x000001F7701C4EE0>
    └ <SpawnProcess name='SpawnProcess-36' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F76E2AE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001F7701C40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001F76E2AE460>
           │       └ <function run at 0x000001F76FE5C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F771358340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F76FE5D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F76FE5D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F76FE604C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F76FDCE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001F7739B6E80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001F7739B6E80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001F7739B6E80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001F7739B6E80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F77138FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F773...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F770AF2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F77138FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F773...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F773...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F773930D30>
          └ <fastapi.applications.FastAPI object at 0x000001F770AF2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F7707749D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F773930EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F773930D30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F7707749D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001F7711ABCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F773930EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F773930EE0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F773930E20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F773930EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F773930EE0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001F773946E50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001F77118E280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F773930E20>
          └ <function wrap_app_handling_exceptions at 0x000001F770F6E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001F77118E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001F77118E280>>
          └ <fastapi.routing.APIRouter object at 0x000001F77118E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001F770F1FD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001F77391DE50>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001F773990040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001F773932160>
          └ <function wrap_app_handling_exceptions at 0x000001F770F6E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932430>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001F773932160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F773990040>
                     └ <function get_request_handler.<locals>.app at 0x000001F77391DD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001F770F128B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001F7738F3EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001F7739347C0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001F770E85940>
          └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: object NoneType can't be used in 'await' expression
2024-03-10 15:29:28.048 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 192
               │     └ 3
               └ <function _main at 0x000001F76E2994C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 192
           │    └ <function BaseProcess._bootstrap at 0x000001F76E1885E0>
           └ <SpawnProcess name='SpawnProcess-36' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F76E193C10>
    └ <SpawnProcess name='SpawnProcess-36' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F76E2AE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-36' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-36' parent=3284 started>
    │    └ <function subprocess_started at 0x000001F7701C4EE0>
    └ <SpawnProcess name='SpawnProcess-36' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F76E2AE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=740, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001F7701C40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001F76E2AE460>
           │       └ <function run at 0x000001F76FE5C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F771358340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F76FE5D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F76FE5D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F76FE604C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F76FDCE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001F7739B6E80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001F7739B6E80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001F7739B6E80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001F7739B6E80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F77138FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F773...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F770AF2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F77138FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F773...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F773...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F773930D30>
          └ <fastapi.applications.FastAPI object at 0x000001F770AF2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F7707749D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F773930EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F773930D30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F7707749D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001F7711ABCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F773930EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F773930EE0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F773930E20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F773930EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F773930EE0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001F773946E50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001F77118E280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F773930E20>
          └ <function wrap_app_handling_exceptions at 0x000001F770F6E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001F77118E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001F77118E280>>
          └ <fastapi.routing.APIRouter object at 0x000001F77118E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001F770F1FD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001F77391DE50>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001F773990040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001F773932160>
          └ <function wrap_app_handling_exceptions at 0x000001F770F6E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001F773932430>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001F773932160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F773990040>
                     └ <function get_request_handler.<locals>.app at 0x000001F77391DD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001F770F128B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001F7738F3EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001F7739347C0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001F770E85940>
          └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: object NoneType can't be used in 'await' expression
2024-03-10 15:30:15.658 | ERROR    | app.crud:wrap:50 - Traceback (most recent call last):
  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 47, in wrap
    return await transaction(cls, *args, session=ss, **kwargs)
  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 161, in create
    model_object = cls.__model__(**object_dict)
TypeError: 'NoneType' object is not callable

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x000002225B0D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x000002225AFA85E0>
           └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002225AFB3C10>
    └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002225B0EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>
    │    └ <function subprocess_started at 0x000002225D004EE0>
    └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=588, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002225B0EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=588, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002225D0040D0>
           │       │   └ <uvicorn.server.Server object at 0x000002225B0EE460>
           │       └ <function run at 0x000002225CC9C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002225E198340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002225CC9D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002225CC9D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002225CCA04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002225CC0E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002225E1CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022260...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002225D932FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002225E1CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022260...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022260...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022260770DC0>
          └ <fastapi.applications.FastAPI object at 0x000002225D932FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002225D5B29D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022260770DC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002225D5B29D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000002225DFEBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022260770E20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000022260786E50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002225DFCF280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022260770E20>
          └ <function wrap_app_handling_exceptions at 0x000002225DDAE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002225DFCF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002225DFCF280>>
          └ <fastapi.routing.APIRouter object at 0x000002225DFCF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002225DD5FD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002226075DE50>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000222607D0040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000022260772160>
          └ <function wrap_app_handling_exceptions at 0x000002225DDAE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772430>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000022260772160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000222607D0040>
                     └ <function get_request_handler.<locals>.app at 0x000002226075DD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002225DD528B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000022260733EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000222607747C0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000002225DCC1940>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x0000022260692B20>
          └ <class 'app.crud.config.address.AddressCRUD'>

> File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 47, in wrap
    return await transaction(cls, *args, session=ss, **kwargs)
                 │           │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │           │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002225FF8E0D0>
                 │           │     └ ()
                 │           └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000002226068C5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 161, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable
2024-03-10 15:30:15.689 | ERROR    | app.crud:wrap:51 - 操作Address失败, args：[], kwargs：{'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}, create方法报错: 'NoneType' object is not callable
2024-03-10 15:30:15.690 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 47, in wrap
    return await transaction(cls, *args, session=ss, **kwargs)
                 │           │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │           │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002225FF8E0D0>
                 │           │     └ ()
                 │           └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000002226068C5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 161, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x000002225B0D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x000002225AFA85E0>
           └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002225AFB3C10>
    └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002225B0EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>
    │    └ <function subprocess_started at 0x000002225D004EE0>
    └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=588, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002225B0EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=588, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002225D0040D0>
           │       │   └ <uvicorn.server.Server object at 0x000002225B0EE460>
           │       └ <function run at 0x000002225CC9C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002225E198340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002225CC9D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002225CC9D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002225CCA04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002225CC0E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002225E1CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022260...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002225D932FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002225E1CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022260...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022260...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022260770DC0>
          └ <fastapi.applications.FastAPI object at 0x000002225D932FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002225D5B29D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022260770DC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002225D5B29D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000002225DFEBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022260770E20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000022260786E50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002225DFCF280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022260770E20>
          └ <function wrap_app_handling_exceptions at 0x000002225DDAE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002225DFCF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002225DFCF280>>
          └ <fastapi.routing.APIRouter object at 0x000002225DFCF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002225DD5FD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002226075DE50>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000222607D0040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000022260772160>
          └ <function wrap_app_handling_exceptions at 0x000002225DDAE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772430>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000022260772160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000222607D0040>
                     └ <function get_request_handler.<locals>.app at 0x000002226075DD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002225DD528B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000022260733EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000222607747C0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000002225DCC1940>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x0000022260692B20>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 53, in wrap
    raise f"操作数据库失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 15:30:15.715 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 47, in wrap
    return await transaction(cls, *args, session=ss, **kwargs)
                 │           │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │           │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002225FF8E0D0>
                 │           │     └ ()
                 │           └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000002226068C5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 161, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x000002225B0D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x000002225AFA85E0>
           └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002225AFB3C10>
    └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002225B0EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>
    │    └ <function subprocess_started at 0x000002225D004EE0>
    └ <SpawnProcess name='SpawnProcess-37' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=588, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002225B0EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=588, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000002225D0040D0>
           │       │   └ <uvicorn.server.Server object at 0x000002225B0EE460>
           │       └ <function run at 0x000002225CC9C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002225E198340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002225CC9D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002225CC9D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002225CCA04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002225CC0E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000222607D08B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002225E1CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022260...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000002225D932FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002225E1CFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022260...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022260...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022260770DC0>
          └ <fastapi.applications.FastAPI object at 0x000002225D932FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002225D5B29D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022260770DC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002225D5B29D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000002225DFEBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022260770E20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000022260770EE0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000022260786E50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002225DFCF280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022260770E20>
          └ <function wrap_app_handling_exceptions at 0x000002225DDAE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002225DFCF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002225DFCF280>>
          └ <fastapi.routing.APIRouter object at 0x000002225DFCF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000002225DD5FD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002226075DE50>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000222607D0040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000022260772160>
          └ <function wrap_app_handling_exceptions at 0x000002225DDAE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000022260772430>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000022260772160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000222607D0040>
                     └ <function get_request_handler.<locals>.app at 0x000002226075DD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002225DD528B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000022260733EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000222607747C0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000002225DCC1940>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x0000022260692B20>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 53, in wrap
    raise f"操作数据库失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 15:31:15.299 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000240B9EABF70>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x00000240B9D3F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 161, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 372
               │     └ 3
               └ <function _main at 0x00000240B47894C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 372
           │    └ <function BaseProcess._bootstrap at 0x00000240B46685E0>
           └ <SpawnProcess name='SpawnProcess-38' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000240B4673C10>
    └ <SpawnProcess name='SpawnProcess-38' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000240B479E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-38' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-38' parent=3284 started>
    │    └ <function subprocess_started at 0x00000240B66B4EE0>
    └ <SpawnProcess name='SpawnProcess-38' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=444, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000240B479E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=444, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000240B66B40D0>
           │       │   └ <uvicorn.server.Server object at 0x00000240B479E460>
           │       └ <function run at 0x00000240B634C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000240B784A340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000240B634D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000240B634D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000240B63504C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000240B62BE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000240B9EABB80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000240B9EABB80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000240B9EABB80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000240B9EABB80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000240B787FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000240B9...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000240B6FE2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000240B787FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000240B9...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000240B9...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000240B9E1E760>
          └ <fastapi.applications.FastAPI object at 0x00000240B6FE2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000240B6C649D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000240B9E1E160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000240B9E1E760>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000240B6C649D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000240B769BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000240B9E1E160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000240B9E1E160...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000240B9E199D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000240B9E1E160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000240B9E1E160...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000240B9E4DCD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000240B767E400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000240B9E199D0>
          └ <function wrap_app_handling_exceptions at 0x00000240B745E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E05EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000240B767E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E05EE0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000240B767E400>>
          └ <fastapi.routing.APIRouter object at 0x00000240B767E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E05EE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000240B740FD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E05EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000240B9E05310>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E05EE0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000240B9E4DF40>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000240B9E050D0>
          └ <function wrap_app_handling_exceptions at 0x00000240B745E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E210D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000240B9E050D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000240B9E4DF40>
                     └ <function get_request_handler.<locals>.app at 0x00000240B9E05160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000240B74028B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x00000240B73755E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000240B9E19BE0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x00000240B71DEEB0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x00000240B9D42B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 74, in wrapper
    logger.error(f"操作{cls.model.__name__}失败, args：{[*args]}, kwargs：{kwargs}, "
    │      └ <function Logger.error at 0x00000240B767CA60>
    └ <loguru.logger handlers=[(id=1, level=10, sink=<stdout>), (id=2, level=10, sink='E:\ProgramCode\python\brisk\logs\info.log'),...

AttributeError: 'bool' object has no attribute '__name__'
2024-03-10 15:31:15.334 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000240B9EABF70>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x00000240B9D3F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 161, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 372
               │     └ 3
               └ <function _main at 0x00000240B47894C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 372
           │    └ <function BaseProcess._bootstrap at 0x00000240B46685E0>
           └ <SpawnProcess name='SpawnProcess-38' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000240B4673C10>
    └ <SpawnProcess name='SpawnProcess-38' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000240B479E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-38' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-38' parent=3284 started>
    │    └ <function subprocess_started at 0x00000240B66B4EE0>
    └ <SpawnProcess name='SpawnProcess-38' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=444, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000240B479E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=444, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000240B66B40D0>
           │       │   └ <uvicorn.server.Server object at 0x00000240B479E460>
           │       └ <function run at 0x00000240B634C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000240B784A340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000240B634D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000240B634D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000240B63504C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000240B62BE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000240B9EABB80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000240B9EABB80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000240B9EABB80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000240B9EABB80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000240B787FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000240B9...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000240B6FE2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000240B787FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000240B9...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000240B9...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000240B9E1E760>
          └ <fastapi.applications.FastAPI object at 0x00000240B6FE2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000240B6C649D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000240B9E1E160>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000240B9E1E760>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000240B6C649D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000240B769BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000240B9E1E160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000240B9E1E160...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000240B9E199D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000240B9E1E160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000240B9E1E160...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000240B9E4DCD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000240B767E400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000240B9E199D0>
          └ <function wrap_app_handling_exceptions at 0x00000240B745E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E05EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000240B767E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E05EE0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000240B767E400>>
          └ <fastapi.routing.APIRouter object at 0x00000240B767E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E05EE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000240B740FD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E05EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000240B9E05310>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E05EE0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000240B9E4DF40>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000240B9E050D0>
          └ <function wrap_app_handling_exceptions at 0x00000240B745E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000240B9E210D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000240B9E050D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000240B9E4DF40>
                     └ <function get_request_handler.<locals>.app at 0x00000240B9E05160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000240B74028B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x00000240B73755E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000240B9E19BE0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x00000240B71DEEB0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x00000240B9D42B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 74, in wrapper
    logger.error(f"操作{cls.model.__name__}失败, args：{[*args]}, kwargs：{kwargs}, "
    │      └ <function Logger.error at 0x00000240B767CA60>
    └ <loguru.logger handlers=[(id=1, level=10, sink=<stdout>), (id=2, level=10, sink='E:\ProgramCode\python\brisk\logs\info.log'),...

AttributeError: 'bool' object has no attribute '__name__'
2024-03-10 15:31:50.219 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 15:31:50.220 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 15:32:31.475 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001D4F2E8BF70>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000001D4F2D1F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 161, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001D4ED7694C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001D4ED6485E0>
           └ <SpawnProcess name='SpawnProcess-39' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001D4ED653C10>
    └ <SpawnProcess name='SpawnProcess-39' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001D4ED77E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-39' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-39' parent=3284 started>
    │    └ <function subprocess_started at 0x000001D4EF694EE0>
    └ <SpawnProcess name='SpawnProcess-39' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=448, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001D4ED77E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=448, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001D4EF6940D0>
           │       │   └ <uvicorn.server.Server object at 0x000001D4ED77E460>
           │       └ <function run at 0x000001D4EF32C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001D4F0829340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001D4EF32D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001D4EF32D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001D4EF3304C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001D4EF29E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001D4F2E8BB80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001D4F2E8BB80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001D4F2E8BB80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001D4F2E8BB80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001D4F085FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D4F2...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001D4EFFC2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001D4F085FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D4F2...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D4F2...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001D4F2DFE760>
          └ <fastapi.applications.FastAPI object at 0x000001D4EFFC2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001D4EFC449D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001D4F2DFE790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001D4F2DFE760>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001D4EFC449D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001D4F067BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001D4F2DFE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001D4F2DFE790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001D4F2DF99D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001D4F2DFE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001D4F2DFE790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001D4F2E2DCD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001D4F065E400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001D4F2DF99D0>
          └ <function wrap_app_handling_exceptions at 0x000001D4F043E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2DE5EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001D4F065E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2DE5EE0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001D4F065E400>>
          └ <fastapi.routing.APIRouter object at 0x000001D4F065E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2DE5EE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001D4F03ECD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2DE5EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001D4F2DE5310>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2DE5EE0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001D4F2E2DF40>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001D4F2DE50D0>
          └ <function wrap_app_handling_exceptions at 0x000001D4F043E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2E010D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001D4F2DE50D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001D4F2E2DF40>
                     └ <function get_request_handler.<locals>.app at 0x000001D4F2DE5160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001D4F03E28B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001D4F034F5E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001D4F2DF9BE0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001D4F034EEB0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x000001D4F2D22B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 74, in wrapper
    logger.error(f"操作{cls.model}失败, args：{[*args]}, kwargs：{kwargs}, "
    │      └ <function Logger.error at 0x000001D4F065CA60>
    └ <loguru.logger handlers=[(id=1, level=10, sink=<stdout>), (id=2, level=10, sink='E:\ProgramCode\python\brisk\logs\info.log'),...

AttributeError: 'bool' object has no attribute '__name__'
2024-03-10 15:32:31.512 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001D4F2E8BF70>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000001D4F2D1F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 161, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001D4ED7694C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001D4ED6485E0>
           └ <SpawnProcess name='SpawnProcess-39' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001D4ED653C10>
    └ <SpawnProcess name='SpawnProcess-39' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001D4ED77E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-39' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-39' parent=3284 started>
    │    └ <function subprocess_started at 0x000001D4EF694EE0>
    └ <SpawnProcess name='SpawnProcess-39' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=448, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001D4ED77E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=448, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001D4EF6940D0>
           │       │   └ <uvicorn.server.Server object at 0x000001D4ED77E460>
           │       └ <function run at 0x000001D4EF32C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001D4F0829340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001D4EF32D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001D4EF32D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001D4EF3304C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001D4EF29E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001D4F2E8BB80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001D4F2E8BB80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001D4F2E8BB80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001D4F2E8BB80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001D4F085FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D4F2...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001D4EFFC2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001D4F085FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D4F2...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D4F2...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001D4F2DFE760>
          └ <fastapi.applications.FastAPI object at 0x000001D4EFFC2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001D4EFC449D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001D4F2DFE790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001D4F2DFE760>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001D4EFC449D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001D4F067BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001D4F2DFE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001D4F2DFE790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001D4F2DF99D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001D4F2DFE790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001D4F2DFE790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001D4F2E2DCD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001D4F065E400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001D4F2DF99D0>
          └ <function wrap_app_handling_exceptions at 0x000001D4F043E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2DE5EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001D4F065E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2DE5EE0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001D4F065E400>>
          └ <fastapi.routing.APIRouter object at 0x000001D4F065E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2DE5EE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001D4F03ECD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2DE5EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001D4F2DE5310>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2DE5EE0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001D4F2E2DF40>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001D4F2DE50D0>
          └ <function wrap_app_handling_exceptions at 0x000001D4F043E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001D4F2E010D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001D4F2DE50D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001D4F2E2DF40>
                     └ <function get_request_handler.<locals>.app at 0x000001D4F2DE5160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001D4F03E28B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001D4F034F5E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001D4F2DF9BE0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001D4F034EEB0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x000001D4F2D22B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 74, in wrapper
    logger.error(f"操作{cls.model}失败, args：{[*args]}, kwargs：{kwargs}, "
    │      └ <function Logger.error at 0x000001D4F065CA60>
    └ <loguru.logger handlers=[(id=1, level=10, sink=<stdout>), (id=2, level=10, sink='E:\ProgramCode\python\brisk\logs\info.log'),...

AttributeError: 'bool' object has no attribute '__name__'
2024-03-10 15:32:57.334 | ERROR    | app.crud:wrapper:74 - 操作Address失败, args：[], kwargs：{'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}, True方法报错: 'NoneType' object is not callable
2024-03-10 15:32:57.336 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000021B59B72B50>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x0000021B59A0F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 161, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x0000021B544594C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x0000021B543285E0>
           └ <SpawnProcess name='SpawnProcess-40' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000021B54333C10>
    └ <SpawnProcess name='SpawnProcess-40' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000021B5446E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-40' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-40' parent=3284 started>
    │    └ <function subprocess_started at 0x0000021B56384EE0>
    └ <SpawnProcess name='SpawnProcess-40' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=808, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000021B5446E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=808, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000021B563840D0>
           │       │   └ <uvicorn.server.Server object at 0x0000021B5446E460>
           │       └ <function run at 0x0000021B5601C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000021B57559340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000021B5601D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000021B5601D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000021B560204C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000021B55F8E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000021B59AE3B20>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000021B59AE3B20>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000021B59AE3B20>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000021B59AE3B20>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021B57575AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021B59...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000021B56CB2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021B57575AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021B59...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021B59...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021B59AEA7C0>
          └ <fastapi.applications.FastAPI object at 0x0000021B56CB2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021B59ADDCA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B59AE3C10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021B59AEA7C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021B59ADDCA0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000021B5736BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B59AE3C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000021B59AE3C10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021B59AE0D00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B59AE3C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000021B59AE3C10...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000021B59B05820>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000021B5734F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021B59AE0D00>
          └ <function wrap_app_handling_exceptions at 0x0000021B5712D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59ADDEE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000021B5734F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59ADDEE0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000021B5734F400>>
          └ <fastapi.routing.APIRouter object at 0x0000021B5734F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59ADDEE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000021B570DBD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59ADDEE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000021B59ADD0D0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59ADDEE0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000021B59B05A90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000021B59ADDF70>
          └ <function wrap_app_handling_exceptions at 0x0000021B5712D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59AF1160>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000021B59ADDF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000021B59B05A90>
                     └ <function get_request_handler.<locals>.app at 0x0000021B59ADD280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000021B570DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000021B57042310>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000021B59AEE250>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000021B57045940>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x0000021B59A12B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 76, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 15:32:57.369 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000021B59B72B50>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x0000021B59A0F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 161, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x0000021B544594C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x0000021B543285E0>
           └ <SpawnProcess name='SpawnProcess-40' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000021B54333C10>
    └ <SpawnProcess name='SpawnProcess-40' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000021B5446E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-40' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-40' parent=3284 started>
    │    └ <function subprocess_started at 0x0000021B56384EE0>
    └ <SpawnProcess name='SpawnProcess-40' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=808, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000021B5446E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=808, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000021B563840D0>
           │       │   └ <uvicorn.server.Server object at 0x0000021B5446E460>
           │       └ <function run at 0x0000021B5601C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000021B57559340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000021B5601D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000021B5601D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000021B560204C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000021B55F8E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000021B59AE3B20>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000021B59AE3B20>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000021B59AE3B20>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000021B59AE3B20>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021B57575AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021B59...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000021B56CB2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000021B57575AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021B59...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021B59...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021B59AEA7C0>
          └ <fastapi.applications.FastAPI object at 0x0000021B56CB2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021B59ADDCA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B59AE3C10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021B59AEA7C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021B59ADDCA0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000021B5736BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B59AE3C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000021B59AE3C10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021B59AE0D00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021B59AE3C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000021B59AE3C10...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000021B59B05820>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000021B5734F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021B59AE0D00>
          └ <function wrap_app_handling_exceptions at 0x0000021B5712D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59ADDEE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000021B5734F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59ADDEE0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000021B5734F400>>
          └ <fastapi.routing.APIRouter object at 0x0000021B5734F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59ADDEE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000021B570DBD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59ADDEE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000021B59ADD0D0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59ADDEE0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000021B59B05A90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000021B59ADDF70>
          └ <function wrap_app_handling_exceptions at 0x0000021B5712D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021B59AF1160>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000021B59ADDF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000021B59B05A90>
                     └ <function get_request_handler.<locals>.app at 0x0000021B59ADD280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000021B570DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000021B57042310>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000021B59AEE250>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000021B57045940>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x0000021B59A12B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 76, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 15:36:49.765 | ERROR    | app.crud:wrapper:74 - 操作Address失败, args：[], kwargs：{'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}, True方法报错: 'NoneType' object is not callable
2024-03-10 15:36:49.767 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001C23109BF70>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000001C230F2F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 162, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x000001C22B9794C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x000001C22B8585E0>
           └ <SpawnProcess name='SpawnProcess-41' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C22B863C10>
    └ <SpawnProcess name='SpawnProcess-41' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C22B98E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-41' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-41' parent=3284 started>
    │    └ <function subprocess_started at 0x000001C22D8A4EE0>
    └ <SpawnProcess name='SpawnProcess-41' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C22B98E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C22D8A40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C22B98E460>
           │       └ <function run at 0x000001C22D53C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C22EA3B340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C22D53D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C22D53D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C22D5404C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C22D4AE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C23109BB80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001C23109BB80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001C23109BB80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C23109BB80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C22EA6DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C231...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C22E1D2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C22EA6DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C231...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C231...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C23100E760>
          └ <fastapi.applications.FastAPI object at 0x000001C22E1D2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C22DE529D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C23100E790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C23100E760>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C22DE529D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001C22E88BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C23100E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C23100E790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C231009130>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C23100E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C23100E790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C23103DCD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C22E86F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C231009130>
          └ <function wrap_app_handling_exceptions at 0x000001C22E639790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C230FF5EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C22E86F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C230FF5EE0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C22E86F400>>
          └ <fastapi.routing.APIRouter object at 0x000001C22E86F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C230FF5EE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C22E5FFD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C230FF5EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C230FF5310>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C230FF5EE0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C23103DF40>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C230FF50D0>
          └ <function wrap_app_handling_exceptions at 0x000001C22E639790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C2310110D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C230FF50D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C23103DF40>
                     └ <function get_request_handler.<locals>.app at 0x000001C230FF5160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001C22E60B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001C22E55F5E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001C231009BE0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001C22E55BEB0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x000001C230F32B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 15:36:49.807 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001C23109BF70>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000001C230F2F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 162, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x000001C22B9794C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x000001C22B8585E0>
           └ <SpawnProcess name='SpawnProcess-41' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C22B863C10>
    └ <SpawnProcess name='SpawnProcess-41' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C22B98E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-41' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-41' parent=3284 started>
    │    └ <function subprocess_started at 0x000001C22D8A4EE0>
    └ <SpawnProcess name='SpawnProcess-41' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C22B98E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001C22D8A40D0>
           │       │   └ <uvicorn.server.Server object at 0x000001C22B98E460>
           │       └ <function run at 0x000001C22D53C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C22EA3B340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C22D53D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C22D53D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C22D5404C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C22D4AE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C23109BB80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001C23109BB80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001C23109BB80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001C23109BB80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C22EA6DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C231...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C22E1D2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C22EA6DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C231...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C231...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C23100E760>
          └ <fastapi.applications.FastAPI object at 0x000001C22E1D2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C22DE529D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C23100E790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C23100E760>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C22DE529D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001C22E88BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C23100E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C23100E790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C231009130>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C23100E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C23100E790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001C23103DCD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001C22E86F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C231009130>
          └ <function wrap_app_handling_exceptions at 0x000001C22E639790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C230FF5EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001C22E86F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C230FF5EE0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001C22E86F400>>
          └ <fastapi.routing.APIRouter object at 0x000001C22E86F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C230FF5EE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001C22E5FFD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C230FF5EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001C230FF5310>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C230FF5EE0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001C23103DF40>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001C230FF50D0>
          └ <function wrap_app_handling_exceptions at 0x000001C22E639790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001C2310110D0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001C230FF50D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C23103DF40>
                     └ <function get_request_handler.<locals>.app at 0x000001C230FF5160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001C22E60B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001C22E55F5E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001C231009BE0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001C22E55BEB0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x000001C230F32B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 15:40:07.770 | ERROR    | app.crud:wrapper:76 - 操作Address失败, args：[], kwargs：{'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}, True方法报错: 'NoneType' object is not callable
2024-03-10 15:40:07.798 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 73, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002128C91BF70>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000002128C7AC670>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 164, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 396
               │     └ 3
               └ <function _main at 0x00000212871F94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 396
           │    └ <function BaseProcess._bootstrap at 0x00000212870F85E0>
           └ <SpawnProcess name='SpawnProcess-43' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000021287103C10>
    └ <SpawnProcess name='SpawnProcess-43' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002128720E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-43' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-43' parent=3284 started>
    │    └ <function subprocess_started at 0x0000021289114EE0>
    └ <SpawnProcess name='SpawnProcess-43' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002128720E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000212891140D0>
           │       │   └ <uvicorn.server.Server object at 0x000002128720E460>
           │       └ <function run at 0x0000021288DAC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002128A2A8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000021288DAD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000021288DAD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000021288DB04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000021288D1E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002128C91BB80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000002128C91BB80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000002128C91BB80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002128C91BB80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002128A2DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002128C...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000021289A42FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002128A2DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002128C...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002128C...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002128C88C760>
          └ <fastapi.applications.FastAPI object at 0x0000021289A42FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000212896C49D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002128C88C790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002128C88C760>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000212896C49D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000002128A0FBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002128C88C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002128C88C790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002128C8889D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002128C88C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002128C88C790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002128C8BDCD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002128A0DE400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002128C8889D0>
          └ <function wrap_app_handling_exceptions at 0x0000021289E9B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C87DE50>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002128A0DE400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C87DE50>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002128A0DE400>>
          └ <fastapi.routing.APIRouter object at 0x000002128A0DE400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C87DE50>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000021289E70D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C87DE50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002128C87DCA0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C87DE50>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002128C8BDF40>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002128C87D1F0>
          └ <function wrap_app_handling_exceptions at 0x0000021289E9B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C890040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002128C87D1F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002128C8BDF40>
                     └ <function get_request_handler.<locals>.app at 0x000002128C87D160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000021289E7B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000021289DCF670>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002128C888BE0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000021289DCEEB0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x000002128C7B2B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 79, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 15:40:07.861 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 73, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002128C91BF70>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000002128C7AC670>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 164, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 396
               │     └ 3
               └ <function _main at 0x00000212871F94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 396
           │    └ <function BaseProcess._bootstrap at 0x00000212870F85E0>
           └ <SpawnProcess name='SpawnProcess-43' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000021287103C10>
    └ <SpawnProcess name='SpawnProcess-43' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002128720E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-43' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-43' parent=3284 started>
    │    └ <function subprocess_started at 0x0000021289114EE0>
    └ <SpawnProcess name='SpawnProcess-43' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002128720E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=800, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000212891140D0>
           │       │   └ <uvicorn.server.Server object at 0x000002128720E460>
           │       └ <function run at 0x0000021288DAC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002128A2A8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000021288DAD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000021288DAD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000021288DB04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000021288D1E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002128C91BB80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000002128C91BB80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000002128C91BB80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000002128C91BB80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002128A2DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002128C...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000021289A42FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002128A2DFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002128C...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002128C...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002128C88C760>
          └ <fastapi.applications.FastAPI object at 0x0000021289A42FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000212896C49D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002128C88C790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002128C88C760>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000212896C49D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000002128A0FBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002128C88C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002128C88C790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002128C8889D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002128C88C790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002128C88C790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000002128C8BDCD0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000002128A0DE400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002128C8889D0>
          └ <function wrap_app_handling_exceptions at 0x0000021289E9B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C87DE50>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000002128A0DE400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C87DE50>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002128A0DE400>>
          └ <fastapi.routing.APIRouter object at 0x000002128A0DE400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C87DE50>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000021289E70D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C87DE50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002128C87DCA0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C87DE50>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000002128C8BDF40>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002128C87D1F0>
          └ <function wrap_app_handling_exceptions at 0x0000021289E9B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002128C890040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000002128C87D1F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002128C8BDF40>
                     └ <function get_request_handler.<locals>.app at 0x000002128C87D160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000021289E7B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000021289DCF670>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002128C888BE0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000021289DCEEB0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x000002128C7B2B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 79, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 15:43:01.752 | ERROR    | app.crud:wrapper:74 - 操作Address失败, args：[], kwargs：{'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}, True方法报错: 'NoneType' object is not callable
2024-03-10 15:43:01.759 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000026D478DE0D0>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x0000026D47FDF5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 162, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 408
               │     └ 3
               └ <function _main at 0x0000026D42A294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 408
           │    └ <function BaseProcess._bootstrap at 0x0000026D429085E0>
           └ <SpawnProcess name='SpawnProcess-44' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000026D42913C10>
    └ <SpawnProcess name='SpawnProcess-44' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000026D42A3E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-44' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-44' parent=3284 started>
    │    └ <function subprocess_started at 0x0000026D44954EE0>
    └ <SpawnProcess name='SpawnProcess-44' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000026D42A3E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000026D449540D0>
           │       │   └ <uvicorn.server.Server object at 0x0000026D42A3E460>
           │       └ <function run at 0x0000026D445EC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000026D45AE9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000026D445ED9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000026D445ED940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000026D445F14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000026D4455E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000026D48122520>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000026D48122520>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000026D48122520>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000026D48122520>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000026D45B1FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026D48...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000026D45282FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000026D45B1FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026D48...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026D48...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000026D480B9850>
          └ <fastapi.applications.FastAPI object at 0x0000026D45282FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000026D44F039D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026D480B2C10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000026D480B9850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000026D44F039D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000026D4593BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026D480B2C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000026D480B2C10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000026D480B0D00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026D480B2C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000026D480B2C10...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000026D480D5AC0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000026D4591F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000026D480B0D00>
          └ <function wrap_app_handling_exceptions at 0x0000026D456DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000026D4591F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000026D4591F400>>
          └ <fastapi.routing.APIRouter object at 0x0000026D4591F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000026D456ABD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000026D480AD0D0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000026D480D5D30>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026D480AD160>
          └ <function wrap_app_handling_exceptions at 0x0000026D456DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADF70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000026D480AD160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000026D480D5D30>
                     └ <function get_request_handler.<locals>.app at 0x0000026D480AD280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000026D456A28B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000026D45618310>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000026D480BC250>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000026D45610940>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x0000026D47FE2B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 15:43:01.805 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000026D478DE0D0>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x0000026D47FDF5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 162, in create
    model_object = cls.__model__(**object_dict)
                   │   │           └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1'}
                   │   └ None
                   └ <class 'app.crud.config.address.AddressCRUD'>

TypeError: 'NoneType' object is not callable


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 408
               │     └ 3
               └ <function _main at 0x0000026D42A294C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 408
           │    └ <function BaseProcess._bootstrap at 0x0000026D429085E0>
           └ <SpawnProcess name='SpawnProcess-44' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000026D42913C10>
    └ <SpawnProcess name='SpawnProcess-44' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000026D42A3E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-44' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-44' parent=3284 started>
    │    └ <function subprocess_started at 0x0000026D44954EE0>
    └ <SpawnProcess name='SpawnProcess-44' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000026D42A3E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=508, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000026D449540D0>
           │       │   └ <uvicorn.server.Server object at 0x0000026D42A3E460>
           │       └ <function run at 0x0000026D445EC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000026D45AE9340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000026D445ED9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000026D445ED940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000026D445F14C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000026D4455E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000026D48122520>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000026D48122520>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000026D48122520>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000026D48122520>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000026D45B1FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026D48...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000026D45282FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000026D45B1FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026D48...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026D48...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000026D480B9850>
          └ <fastapi.applications.FastAPI object at 0x0000026D45282FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000026D44F039D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026D480B2C10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000026D480B9850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000026D44F039D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000026D4593BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026D480B2C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000026D480B2C10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000026D480B0D00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000026D480B2C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000026D480B2C10...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000026D480D5AC0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000026D4591F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000026D480B0D00>
          └ <function wrap_app_handling_exceptions at 0x0000026D456DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000026D4591F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000026D4591F400>>
          └ <fastapi.routing.APIRouter object at 0x0000026D4591F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000026D456ABD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000026D480AD0D0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000026D480D5D30>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026D480AD160>
          └ <function wrap_app_handling_exceptions at 0x0000026D456DB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026D480ADF70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000026...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000026D480AD160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000026D480D5D30>
                     └ <function get_request_handler.<locals>.app at 0x0000026D480AD280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000026D456A28B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000026D45618310>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000026D480BC250>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000026D45610940>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x0000026D47FE2B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 15:44:42.615 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000018CB7948EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000018CB79877C0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000018CB7DBAB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018CB7DBACA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018CB7FE6C40>
           └ <_AsyncIoGreenlet object at 0x0000018CB7FEB580 (otid=0x0000018CB6243030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000018CB7FE6BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000018CB7E57160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000018CB7...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x0000018CB7E620D0>
          └ <aiomysql.connection.Connection object at 0x0000018CB7F535B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000018CB7E62820>
          └ <aiomysql.connection.Connection object at 0x0000018CB7F535B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000018CB7E63430>
          └ <aiomysql.connection.MySQLResult object at 0x0000018CB7FD69A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000018CB7FD69A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000018CB7E34790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000018CB7FD6A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000018CB7FD6A60>
    │   └ <function raise_mysql_exception at 0x0000018CB7DE31F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'create_user' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000018CB679E0D0>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x0000018CB7E6F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 164, in create
    await session.commit()
          │       └ <function AsyncSession.commit at 0x0000018CB7D32AF0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000018CB679E0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
          │              │    │            └ <function Session.commit at 0x0000018CB7C564C0>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x0000018CB7FAFBE0>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000018CB679E0D0>
          └ <function greenlet_spawn at 0x0000018CB63C2CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000018CB7FEB580 (otid=0x0000018CB6243030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000018CB7C54700>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB680>

  File "<string>", line 2, in commit

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB680>
                └ <function SessionTransaction.commit at 0x0000018CB7C54670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000018CB7C545E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB680>

  File "<string>", line 2, in _prepare_impl

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB680>
                └ <function SessionTransaction._prepare_impl at 0x0000018CB7C544C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x0000018CB7C5E280>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000018CB7FAFBE0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB680>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x0000018CB7C5E430>
    └ <sqlalchemy.orm.session.Session object at 0x0000018CB7FAFBE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x0000018CB7C54940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB3C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000018CB8012640>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000018CB7C495E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000018CB7FAF640>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000018CB7FAF640>
    │   └ <function SaveUpdateAll.execute at 0x0000018CB7C49EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000018CB7C1E5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x0000018CB7C27CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x0000018CB7884940>
             └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x0000018CB7FD67F0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000018CB7884C10>
           └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000018CB7884DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000018CB7884E50>
           └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000018CB78870D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'create_user' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'create_user' cannot be null"), <traceback object at 0x00...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000018CB7948EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000018CB79877C0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000018CB7DBAB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018CB7DBACA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018CB7FE6C40>
           └ <_AsyncIoGreenlet object at 0x0000018CB7FEB580 (otid=0x0000018CB6243030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000018CB7FE6BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000018CB7E57160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000018CB7...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x0000018CB7E620D0>
          └ <aiomysql.connection.Connection object at 0x0000018CB7F535B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000018CB7E62820>
          └ <aiomysql.connection.Connection object at 0x0000018CB7F535B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000018CB7E63430>
          └ <aiomysql.connection.MySQLResult object at 0x0000018CB7FD69A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000018CB7FD69A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000018CB7E34790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000018CB7FD6A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000018CB7FD6A60>
    │   └ <function raise_mysql_exception at 0x0000018CB7DE31F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 396
               │     └ 3
               └ <function _main at 0x0000018CB28C94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 396
           │    └ <function BaseProcess._bootstrap at 0x0000018CB27C85E0>
           └ <SpawnProcess name='SpawnProcess-46' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000018CB27D3C10>
    └ <SpawnProcess name='SpawnProcess-46' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000018CB28DE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-46' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-46' parent=3284 started>
    │    └ <function subprocess_started at 0x0000018CB47E4EE0>
    └ <SpawnProcess name='SpawnProcess-46' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000018CB28DE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000018CB47E40D0>
           │       │   └ <uvicorn.server.Server object at 0x0000018CB28DE460>
           │       └ <function run at 0x0000018CB447C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000018CB5978340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000018CB447D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000018CB447D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000018CB44804C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000018CB43EE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000018CB7FAF730>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000018CB7FAF730>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000018CB7FAF730>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000018CB7FAF730>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018CB59AAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018CB7...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000018CB5112FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018CB59AAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018CB7...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018CB7...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000018CB7F4FDC0>
          └ <fastapi.applications.FastAPI object at 0x0000018CB5112FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018CB4D949D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018CB7F4FEE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000018CB7F4FDC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018CB4D949D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000018CB57CBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018CB7F4FEE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000018CB7F4FEE0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000018CB7F4FE20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018CB7F4FEE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000018CB7F4FEE0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000018CB7F66E50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000018CB57AF280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000018CB7F4FE20>
          └ <function wrap_app_handling_exceptions at 0x0000018CB556B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000018CB57AF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000018CB57AF280>>
          └ <fastapi.routing.APIRouter object at 0x0000018CB57AF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000018CB5545D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000018CB7F3DE50>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000018CB7FAF040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000018CB7F52160>
          └ <function wrap_app_handling_exceptions at 0x0000018CB556B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52430>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000018CB7F52160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000018CB7FAF040>
                     └ <function get_request_handler.<locals>.app at 0x0000018CB7F3DD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000018CB55468B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000018CB7F14EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000018CB7F537C0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000018CB549F940>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x0000018CB7E72B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 74, in wrapper
    logger.error(f"操作{cls.model.__name__}失败, args：{[*args]}, kwargs：{kwargs}, "
    │      └ <function Logger.error at 0x0000018CB57AEA60>
    └ <loguru.logger handlers=[(id=1, level=10, sink=<stdout>), (id=2, level=10, sink='E:\ProgramCode\python\brisk\logs\info.log'),...

AttributeError: type object 'AddressCRUD' has no attribute 'model'
2024-03-10 15:44:43.002 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000018CB7948EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000018CB79877C0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000018CB7DBAB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018CB7DBACA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018CB7FE6C40>
           └ <_AsyncIoGreenlet object at 0x0000018CB7FEB580 (otid=0x0000018CB6243030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000018CB7FE6BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000018CB7E57160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000018CB7...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x0000018CB7E620D0>
          └ <aiomysql.connection.Connection object at 0x0000018CB7F535B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000018CB7E62820>
          └ <aiomysql.connection.Connection object at 0x0000018CB7F535B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000018CB7E63430>
          └ <aiomysql.connection.MySQLResult object at 0x0000018CB7FD69A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000018CB7FD69A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000018CB7E34790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000018CB7FD6A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000018CB7FD6A60>
    │   └ <function raise_mysql_exception at 0x0000018CB7DE31F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'create_user' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000018CB679E0D0>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x0000018CB7E6F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 164, in create
    await session.commit()
          │       └ <function AsyncSession.commit at 0x0000018CB7D32AF0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000018CB679E0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
          │              │    │            └ <function Session.commit at 0x0000018CB7C564C0>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x0000018CB7FAFBE0>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000018CB679E0D0>
          └ <function greenlet_spawn at 0x0000018CB63C2CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000018CB7FEB580 (otid=0x0000018CB6243030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000018CB7C54700>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB680>

  File "<string>", line 2, in commit

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB680>
                └ <function SessionTransaction.commit at 0x0000018CB7C54670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000018CB7C545E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB680>

  File "<string>", line 2, in _prepare_impl

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB680>
                └ <function SessionTransaction._prepare_impl at 0x0000018CB7C544C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x0000018CB7C5E280>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000018CB7FAFBE0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB680>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x0000018CB7C5E430>
    └ <sqlalchemy.orm.session.Session object at 0x0000018CB7FAFBE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x0000018CB7C54940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018CB7FEB3C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000018CB8012640>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000018CB7C495E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000018CB7FAF640>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000018CB7FAF640>
    │   └ <function SaveUpdateAll.execute at 0x0000018CB7C49EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000018CB7C1E5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x0000018CB7C27CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x0000018CB7884940>
             └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x0000018CB7FD67F0>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000018CB7884C10>
           └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000018CB7884DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000018CB7884E50>
           └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000018CB78870D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'create_user' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'create_user' cannot be null"), <traceback object at 0x00...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000018CB7948EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000018CB79877C0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018CB7FAF490>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000018CB7DBAB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018CB7DBACA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018CB7FE6C40>
           └ <_AsyncIoGreenlet object at 0x0000018CB7FEB580 (otid=0x0000018CB6243030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000018CB7FE6BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000018CB7FE9D60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000018CB7E57160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000018CB7...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x0000018CB7E620D0>
          └ <aiomysql.connection.Connection object at 0x0000018CB7F535B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000018CB7E62820>
          └ <aiomysql.connection.Connection object at 0x0000018CB7F535B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000018CB7E63430>
          └ <aiomysql.connection.MySQLResult object at 0x0000018CB7FD69A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000018CB7FD69A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000018CB7E34790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000018CB7FD6A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000018CB7FD6A60>
    │   └ <function raise_mysql_exception at 0x0000018CB7DE31F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', '5c1ba81e-388f-47f4-9d41-36416e0ffe28', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 396
               │     └ 3
               └ <function _main at 0x0000018CB28C94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 396
           │    └ <function BaseProcess._bootstrap at 0x0000018CB27C85E0>
           └ <SpawnProcess name='SpawnProcess-46' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000018CB27D3C10>
    └ <SpawnProcess name='SpawnProcess-46' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000018CB28DE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-46' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-46' parent=3284 started>
    │    └ <function subprocess_started at 0x0000018CB47E4EE0>
    └ <SpawnProcess name='SpawnProcess-46' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000018CB28DE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000018CB47E40D0>
           │       │   └ <uvicorn.server.Server object at 0x0000018CB28DE460>
           │       └ <function run at 0x0000018CB447C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000018CB5978340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000018CB447D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000018CB447D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000018CB44804C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000018CB43EE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000018CB7FAF730>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000018CB7FAF730>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000018CB7FAF730>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000018CB7FAF730>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018CB59AAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018CB7...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000018CB5112FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018CB59AAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018CB7...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018CB7...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000018CB7F4FDC0>
          └ <fastapi.applications.FastAPI object at 0x0000018CB5112FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018CB4D949D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018CB7F4FEE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000018CB7F4FDC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018CB4D949D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000018CB57CBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018CB7F4FEE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000018CB7F4FEE0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000018CB7F4FE20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000018CB7F4FEE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000018CB7F4FEE0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000018CB7F66E50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000018CB57AF280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000018CB7F4FE20>
          └ <function wrap_app_handling_exceptions at 0x0000018CB556B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000018CB57AF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000018CB57AF280>>
          └ <fastapi.routing.APIRouter object at 0x0000018CB57AF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000018CB5545D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000018CB7F3DE50>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000018CB7FAF040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000018CB7F52160>
          └ <function wrap_app_handling_exceptions at 0x0000018CB556B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000018CB7F52430>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000018CB7F52160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000018CB7FAF040>
                     └ <function get_request_handler.<locals>.app at 0x0000018CB7F3DD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000018CB55468B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000018CB7F14EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000018CB7F537C0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000018CB549F940>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x0000018CB7E72B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 74, in wrapper
    logger.error(f"操作{cls.model.__name__}失败, args：{[*args]}, kwargs：{kwargs}, "
    │      └ <function Logger.error at 0x0000018CB57AEA60>
    └ <loguru.logger handlers=[(id=1, level=10, sink=<stdout>), (id=2, level=10, sink='E:\ProgramCode\python\brisk\logs\info.log'),...

AttributeError: type object 'AddressCRUD' has no attribute 'model'
2024-03-10 15:47:19.114 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000118E7C18EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x00000118E7C57790>
    └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x00000118E808CB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x00000118E808CCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x00000118E82B4CC0>
           └ <_AsyncIoGreenlet object at 0x00000118E8271F00 (otid=0x00000118E6513030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x00000118E82B4C40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x00000118E8127160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x00000118E8...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x00000118E81320D0>
          └ <aiomysql.connection.Connection object at 0x00000118E822FF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x00000118E8132820>
          └ <aiomysql.connection.Connection object at 0x00000118E822FF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x00000118E8133430>
          └ <aiomysql.connection.MySQLResult object at 0x00000118E8279A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x00000118E8279A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x00000118E8105790>
    └ <pymysql.protocol.MysqlPacket object at 0x00000118E82795B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x00000118E82795B0>
    │   └ <function raise_mysql_exception at 0x00000118E80B41F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'create_user' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000118E7A3E0D0>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x00000118E813F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 164, in create
    await session.commit()
          │       └ <function AsyncSession.commit at 0x00000118E8000AF0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000118E7A3E0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
          │              │    │            └ <function Session.commit at 0x00000118E7F264C0>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x00000118E82AA8E0>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000118E7A3E0D0>
          └ <function greenlet_spawn at 0x00000118E6692CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x00000118E8271F00 (otid=0x00000118E6513030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x00000118E7F23700>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271F40>

  File "<string>", line 2, in commit

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271F40>
                └ <function SessionTransaction.commit at 0x00000118E7F23670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x00000118E7F235E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271F40>

  File "<string>", line 2, in _prepare_impl

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271F40>
                └ <function SessionTransaction._prepare_impl at 0x00000118E7F234C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x00000118E7F2E280>
    │    └ <sqlalchemy.orm.session.Session object at 0x00000118E82AA8E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x00000118E7F2E430>
    └ <sqlalchemy.orm.session.Session object at 0x00000118E82AA8E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x00000118E7F23940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271EC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x00000118E82E7580>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x00000118E7F195E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000118E82AAFA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000118E82AAFA0>
    │   └ <function SaveUpdateAll.execute at 0x00000118E7F19EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x00000118E7EEE5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x00000118E7EF7CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x00000118E7B54940>
             └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x00000118E8279A00>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000118E7B54C10>
           └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000118E7B54DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000118E7B54E50>
           └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000118E7B560D0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'create_user' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'create_user' cannot be null"), <traceback object at 0x00...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000118E7C18EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x00000118E7C57790>
    └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x00000118E808CB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x00000118E808CCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x00000118E82B4CC0>
           └ <_AsyncIoGreenlet object at 0x00000118E8271F00 (otid=0x00000118E6513030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x00000118E82B4C40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x00000118E8127160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x00000118E8...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x00000118E81320D0>
          └ <aiomysql.connection.Connection object at 0x00000118E822FF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x00000118E8132820>
          └ <aiomysql.connection.Connection object at 0x00000118E822FF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x00000118E8133430>
          └ <aiomysql.connection.MySQLResult object at 0x00000118E8279A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x00000118E8279A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x00000118E8105790>
    └ <pymysql.protocol.MysqlPacket object at 0x00000118E82795B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x00000118E82795B0>
    │   └ <function raise_mysql_exception at 0x00000118E80B41F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x00000118E2B894C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x00000118E2A685E0>
           └ <SpawnProcess name='SpawnProcess-47' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000118E2A73C10>
    └ <SpawnProcess name='SpawnProcess-47' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000118E2B9E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-47' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-47' parent=3284 started>
    │    └ <function subprocess_started at 0x00000118E4AB4EE0>
    └ <SpawnProcess name='SpawnProcess-47' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=512, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000118E2B9E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=512, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000118E4AB40D0>
           │       │   └ <uvicorn.server.Server object at 0x00000118E2B9E460>
           │       └ <function run at 0x00000118E474C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000118E5C48340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000118E474D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000118E474D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000118E47504C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000118E46BE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000118E82796A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000118E82796A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000118E82796A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000118E82796A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000118E5C7AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000118E8...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000118E53E2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000118E5C7AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000118E8...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000118E8...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000118E821D760>
          └ <fastapi.applications.FastAPI object at 0x00000118E53E2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000118E8205F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000118E821D790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000118E821D760>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000118E8205F70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000118E5A9BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000118E821D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000118E821D790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000118E82189D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000118E821D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000118E821D790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000118E824DFA0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000118E5A7E400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000118E82189D0>
          └ <function wrap_app_handling_exceptions at 0x00000118E585D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E8220040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000118E5A7E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E8220040>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000118E5A7E400>>
          └ <fastapi.routing.APIRouter object at 0x00000118E5A7E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E8220040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000118E5808D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E8220040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000118E8205310>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E8220040>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000118E8279250>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000118E82200D0>
          └ <function wrap_app_handling_exceptions at 0x00000118E585D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E82201F0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000118E82200D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000118E8279250>
                     └ <function get_request_handler.<locals>.app at 0x00000118E8205160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000118E581A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x00000118E576F5E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000118E8218BE0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x00000118E578CEB0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x00000118E8142B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 15:47:19.189 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000118E7C18EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x00000118E7C57790>
    └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x00000118E808CB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x00000118E808CCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x00000118E82B4CC0>
           └ <_AsyncIoGreenlet object at 0x00000118E8271F00 (otid=0x00000118E6513030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x00000118E82B4C40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x00000118E8127160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x00000118E8...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x00000118E81320D0>
          └ <aiomysql.connection.Connection object at 0x00000118E822FF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x00000118E8132820>
          └ <aiomysql.connection.Connection object at 0x00000118E822FF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x00000118E8133430>
          └ <aiomysql.connection.MySQLResult object at 0x00000118E8279A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x00000118E8279A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x00000118E8105790>
    └ <pymysql.protocol.MysqlPacket object at 0x00000118E82795B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x00000118E82795B0>
    │   └ <function raise_mysql_exception at 0x00000118E80B41F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'create_user' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000118E7A3E0D0>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x00000118E813F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 164, in create
    await session.commit()
          │       └ <function AsyncSession.commit at 0x00000118E8000AF0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000118E7A3E0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
          │              │    │            └ <function Session.commit at 0x00000118E7F264C0>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x00000118E82AA8E0>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000118E7A3E0D0>
          └ <function greenlet_spawn at 0x00000118E6692CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x00000118E8271F00 (otid=0x00000118E6513030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x00000118E7F23700>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271F40>

  File "<string>", line 2, in commit

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271F40>
                └ <function SessionTransaction.commit at 0x00000118E7F23670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x00000118E7F235E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271F40>

  File "<string>", line 2, in _prepare_impl

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271F40>
                └ <function SessionTransaction._prepare_impl at 0x00000118E7F234C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x00000118E7F2E280>
    │    └ <sqlalchemy.orm.session.Session object at 0x00000118E82AA8E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271F40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x00000118E7F2E430>
    └ <sqlalchemy.orm.session.Session object at 0x00000118E82AA8E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x00000118E7F23940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000118E8271EC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x00000118E82E7580>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x00000118E7F195E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000118E82AAFA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000118E82AAFA0>
    │   └ <function SaveUpdateAll.execute at 0x00000118E7F19EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x00000118E7EEE5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x00000118E7EF7CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x00000118E7B54940>
             └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x00000118E8279A00>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000118E7B54C10>
           └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000118E7B54DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000118E7B54E50>
           └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000118E7B560D0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'create_user' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'create_user' cannot be null"), <traceback object at 0x00...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000118E7C18EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x00000118E7C57790>
    └ <sqlalchemy.engine.base.Connection object at 0x00000118E829E1C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x00000118E808CB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x00000118E808CCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x00000118E82B4CC0>
           └ <_AsyncIoGreenlet object at 0x00000118E8271F00 (otid=0x00000118E6513030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x00000118E82B4C40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x00000118E82E6400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x00000118E8127160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x00000118E8...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x00000118E81320D0>
          └ <aiomysql.connection.Connection object at 0x00000118E822FF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x00000118E8132820>
          └ <aiomysql.connection.Connection object at 0x00000118E822FF40>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x00000118E8133430>
          └ <aiomysql.connection.MySQLResult object at 0x00000118E8279A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x00000118E8279A30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x00000118E8105790>
    └ <pymysql.protocol.MysqlPacket object at 0x00000118E82795B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x00000118E82795B0>
    │   └ <function raise_mysql_exception at 0x00000118E80B41F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', '654679d9-276a-4d69-a695-4063cffb30b2', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 392
               │     └ 3
               └ <function _main at 0x00000118E2B894C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 392
           │    └ <function BaseProcess._bootstrap at 0x00000118E2A685E0>
           └ <SpawnProcess name='SpawnProcess-47' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000118E2A73C10>
    └ <SpawnProcess name='SpawnProcess-47' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000118E2B9E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-47' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-47' parent=3284 started>
    │    └ <function subprocess_started at 0x00000118E4AB4EE0>
    └ <SpawnProcess name='SpawnProcess-47' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=512, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000118E2B9E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=512, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x00000118E4AB40D0>
           │       │   └ <uvicorn.server.Server object at 0x00000118E2B9E460>
           │       └ <function run at 0x00000118E474C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000118E5C48340>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000118E474D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000118E474D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000118E47504C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000118E46BE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000118E82796A0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000118E82796A0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000118E82796A0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000118E82796A0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000118E5C7AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000118E8...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x00000118E53E2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000118E5C7AAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000118E8...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000118E8...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000118E821D760>
          └ <fastapi.applications.FastAPI object at 0x00000118E53E2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000118E8205F70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000118E821D790>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000118E821D760>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000118E8205F70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000118E5A9BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000118E821D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000118E821D790...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000118E82189D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000118E821D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000118E821D790...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x00000118E824DFA0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000118E5A7E400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000118E82189D0>
          └ <function wrap_app_handling_exceptions at 0x00000118E585D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E8220040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000118E5A7E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E8220040>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000118E5A7E400>>
          └ <fastapi.routing.APIRouter object at 0x00000118E5A7E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E8220040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x00000118E5808D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E8220040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x00000118E8205310>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E8220040>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000118E8279250>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000118E82200D0>
          └ <function wrap_app_handling_exceptions at 0x00000118E585D790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000118E82201F0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x00000118E82200D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000118E8279250>
                     └ <function get_request_handler.<locals>.app at 0x00000118E8205160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000118E581A8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x00000118E576F5E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000118E8218BE0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x00000118E578CEB0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x00000118E8142B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 16:01:49.777 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 16:01:49.781 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 16:05:15.022 | ERROR    | app.crud:wrapper:74 - 操作AddressCRUD失败, args：[], kwargs：{'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}, True方法报错: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-03-10 16:05:15.023 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000028D41D08EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000028D41D47790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000028D4213DB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000028D4213DCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000028D423B35C0>
           └ <_AsyncIoGreenlet object at 0x0000028D42362480 (otid=0x0000028D40603030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000028D423B3340>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000028D42217160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000028D42...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x0000028D422220D0>
          └ <aiomysql.connection.Connection object at 0x0000028D4231FF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000028D42222820>
          └ <aiomysql.connection.Connection object at 0x0000028D4231FF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000028D42223430>
          └ <aiomysql.connection.MySQLResult object at 0x0000028D423B4280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000028D423B4280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000028D421F5790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000028D423DB190>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000028D423DB190>
    │   └ <function raise_mysql_exception at 0x0000028D421A41F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'create_user' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000028D423B4520>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x0000028D4222F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 165, in create
    await session.commit()
          │       └ <function AsyncSession.commit at 0x0000028D420F0AF0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000028D423B4520>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
          │              │    │            └ <function Session.commit at 0x0000028D420164C0>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x0000028D423B49A0>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000028D423B4520>
          └ <function greenlet_spawn at 0x0000028D40782CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000028D42362480 (otid=0x0000028D40603030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000028D42013700>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362200>

  File "<string>", line 2, in commit

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362200>
                └ <function SessionTransaction.commit at 0x0000028D42013670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000028D420135E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362200>

  File "<string>", line 2, in _prepare_impl

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362200>
                └ <function SessionTransaction._prepare_impl at 0x0000028D420134C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x0000028D4201E280>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000028D423B49A0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362200>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x0000028D4201E430>
    └ <sqlalchemy.orm.session.Session object at 0x0000028D423B49A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x0000028D42013940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000028D423EB740>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000028D420095E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000028D423B4640>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000028D423B4640>
    │   └ <function SaveUpdateAll.execute at 0x0000028D42009EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000028D41FDE5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x0000028D41FE7CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x0000028D41C44940>
             └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x0000028D42395F70>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000028D41C44C10>
           └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000028D41C44DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000028D41C44E50>
           └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000028D41C460D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'create_user' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'create_user' cannot be null"), <traceback object at 0x00...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000028D41D08EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000028D41D47790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000028D4213DB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000028D4213DCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000028D423B35C0>
           └ <_AsyncIoGreenlet object at 0x0000028D42362480 (otid=0x0000028D40603030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000028D423B3340>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000028D42217160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000028D42...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x0000028D422220D0>
          └ <aiomysql.connection.Connection object at 0x0000028D4231FF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000028D42222820>
          └ <aiomysql.connection.Connection object at 0x0000028D4231FF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000028D42223430>
          └ <aiomysql.connection.MySQLResult object at 0x0000028D423B4280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000028D423B4280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000028D421F5790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000028D423DB190>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000028D423DB190>
    │   └ <function raise_mysql_exception at 0x0000028D421A41F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x0000028D3CC894C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x0000028D3CB885E0>
           └ <SpawnProcess name='SpawnProcess-49' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000028D3CB93C10>
    └ <SpawnProcess name='SpawnProcess-49' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000028D3CC9E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-49' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-49' parent=3284 started>
    │    └ <function subprocess_started at 0x0000028D3EBA4EE0>
    └ <SpawnProcess name='SpawnProcess-49' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=580, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000028D3CC9E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=580, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000028D3EBA40D0>
           │       │   └ <uvicorn.server.Server object at 0x0000028D3CC9E460>
           │       └ <function run at 0x0000028D3E83C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000028D3FD38340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000028D3E83D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000028D3E83D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000028D3E8404C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000028D3E7AE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000028D423B48B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000028D423B48B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000028D423B48B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000028D423B48B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028D3FD6FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028D42...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000028D3F4D2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028D3FD6FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028D42...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028D42...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028D4230E9A0>
          └ <fastapi.applications.FastAPI object at 0x0000028D3F4D2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000028D3F1539D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028D4230E310>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028D4230E9A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000028D3F1539D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000028D3FB8BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028D4230E310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000028D4230E310...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028D42309AC0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028D4230E310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000028D4230E310...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000028D4233DD30>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000028D3FB6E400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028D42309AC0>
          └ <function wrap_app_handling_exceptions at 0x0000028D3F92B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D422F5EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000028D3FB6E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D422F5EE0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000028D3FB6E400>>
          └ <fastapi.routing.APIRouter object at 0x0000028D3FB6E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D422F5EE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000028D3F8F6D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D422F5EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000028D422F5310>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D422F5EE0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000028D4233DEE0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000028D422F50D0>
          └ <function wrap_app_handling_exceptions at 0x0000028D3F92B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D42310160>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000028D422F50D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000028D4233DEE0>
                     └ <function get_request_handler.<locals>.app at 0x0000028D422F5160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000028D3F90D8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000028D3F85F5E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000028D42309B20>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000028D3F87CF70>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x0000028D42232B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 16:05:15.102 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000028D41D08EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000028D41D47790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000028D4213DB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000028D4213DCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000028D423B35C0>
           └ <_AsyncIoGreenlet object at 0x0000028D42362480 (otid=0x0000028D40603030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000028D423B3340>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000028D42217160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000028D42...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x0000028D422220D0>
          └ <aiomysql.connection.Connection object at 0x0000028D4231FF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000028D42222820>
          └ <aiomysql.connection.Connection object at 0x0000028D4231FF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000028D42223430>
          └ <aiomysql.connection.MySQLResult object at 0x0000028D423B4280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000028D423B4280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000028D421F5790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000028D423DB190>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000028D423DB190>
    │   └ <function raise_mysql_exception at 0x0000028D421A41F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'create_user' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000028D423B4520>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x0000028D4222F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 165, in create
    await session.commit()
          │       └ <function AsyncSession.commit at 0x0000028D420F0AF0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000028D423B4520>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
          │              │    │            └ <function Session.commit at 0x0000028D420164C0>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x0000028D423B49A0>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000028D423B4520>
          └ <function greenlet_spawn at 0x0000028D40782CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000028D42362480 (otid=0x0000028D40603030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000028D42013700>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362200>

  File "<string>", line 2, in commit

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362200>
                └ <function SessionTransaction.commit at 0x0000028D42013670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000028D420135E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362200>

  File "<string>", line 2, in _prepare_impl

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362200>
                └ <function SessionTransaction._prepare_impl at 0x0000028D420134C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x0000028D4201E280>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000028D423B49A0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362200>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x0000028D4201E430>
    └ <sqlalchemy.orm.session.Session object at 0x0000028D423B49A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x0000028D42013940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000028D42362BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000028D423EB740>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000028D420095E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000028D423B4640>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000028D423B4640>
    │   └ <function SaveUpdateAll.execute at 0x0000028D42009EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000028D41FDE5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x0000028D41FE7CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x0000028D41C44940>
             └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x0000028D42395F70>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000028D41C44C10>
           └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000028D41C44DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000028D41C44E50>
           └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000028D41C460D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'create_user' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'create_user' cannot be null"), <traceback object at 0x00...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000028D41D08EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x0000028D41D47790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000028D423B4040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x0000028D4213DB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x0000028D4213DCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000028D423B35C0>
           └ <_AsyncIoGreenlet object at 0x0000028D42362480 (otid=0x0000028D40603030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000028D423B3340>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000028D423DA8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000028D42217160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000028D42...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x0000028D422220D0>
          └ <aiomysql.connection.Connection object at 0x0000028D4231FF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000028D42222820>
          └ <aiomysql.connection.Connection object at 0x0000028D4231FF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000028D42223430>
          └ <aiomysql.connection.MySQLResult object at 0x0000028D423B4280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x0000028D423B4280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000028D421F5790>
    └ <pymysql.protocol.MysqlPacket object at 0x0000028D423DB190>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x0000028D423DB190>
    │   └ <function raise_mysql_exception at 0x0000028D421A41F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', 'e65bdec0-1ae8-49ee-bd07-4d47c8d4597f', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x0000028D3CC894C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x0000028D3CB885E0>
           └ <SpawnProcess name='SpawnProcess-49' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000028D3CB93C10>
    └ <SpawnProcess name='SpawnProcess-49' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000028D3CC9E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-49' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-49' parent=3284 started>
    │    └ <function subprocess_started at 0x0000028D3EBA4EE0>
    └ <SpawnProcess name='SpawnProcess-49' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=580, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000028D3CC9E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=580, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000028D3EBA40D0>
           │       │   └ <uvicorn.server.Server object at 0x0000028D3CC9E460>
           │       └ <function run at 0x0000028D3E83C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000028D3FD38340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000028D3E83D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000028D3E83D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000028D3E8404C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000028D3E7AE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000028D423B48B0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x0000028D423B48B0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x0000028D423B48B0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x0000028D423B48B0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028D3FD6FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028D42...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000028D3F4D2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028D3FD6FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028D42...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028D42...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028D4230E9A0>
          └ <fastapi.applications.FastAPI object at 0x0000028D3F4D2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000028D3F1539D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028D4230E310>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028D4230E9A0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000028D3F1539D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000028D3FB8BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028D4230E310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000028D4230E310...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028D42309AC0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028D4230E310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000028D4230E310...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000028D4233DD30>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000028D3FB6E400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028D42309AC0>
          └ <function wrap_app_handling_exceptions at 0x0000028D3F92B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D422F5EE0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000028D3FB6E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D422F5EE0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000028D3FB6E400>>
          └ <fastapi.routing.APIRouter object at 0x0000028D3FB6E400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D422F5EE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000028D3F8F6D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D422F5EE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x0000028D422F5310>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D422F5EE0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x0000028D4233DEE0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000028D422F50D0>
          └ <function wrap_app_handling_exceptions at 0x0000028D3F92B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000028D42310160>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000028D422F50D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000028D4233DEE0>
                     └ <function get_request_handler.<locals>.app at 0x0000028D422F5160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000028D3F90D8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000028D3F85F5E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000028D42309B20>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000028D3F87CF70>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x0000028D42232B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 16:05:31.889 | ERROR    | app.crud:wrapper:74 - 操作AddressCRUD失败, args：[], kwargs：{'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}, True方法报错: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-03-10 16:05:31.892 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001835F9D8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001835FA17790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001835FE4DB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001835FE4DCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018360076C40>
           └ <_AsyncIoGreenlet object at 0x0000018360031480 (otid=0x000001835E2D3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000018360076BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x000001835FEE7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000018360...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x000001835FEF20D0>
          └ <aiomysql.connection.Connection object at 0x000001835FFD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001835FEF2820>
          └ <aiomysql.connection.Connection object at 0x000001835FFD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001835FEF3430>
          └ <aiomysql.connection.MySQLResult object at 0x000001836006C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001836006C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001835FEC5790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001836006CA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001836006CA90>
    │   └ <function raise_mysql_exception at 0x000001835FE741F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'create_user' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001835F7FE0D0>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000001835FEFF5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 165, in create
    await session.commit()
          │       └ <function AsyncSession.commit at 0x000001835FDC2AF0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001835F7FE0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
          │              │    │            └ <function Session.commit at 0x000001835FCE84C0>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x0000018360042880>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001835F7FE0D0>
          └ <function greenlet_spawn at 0x000001835E452CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000018360031480 (otid=0x000001835E2D3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001835FCE4700>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031340>

  File "<string>", line 2, in commit

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031340>
                └ <function SessionTransaction.commit at 0x000001835FCE4670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001835FCE45E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031340>

  File "<string>", line 2, in _prepare_impl

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031340>
                └ <function SessionTransaction._prepare_impl at 0x000001835FCE44C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001835FCEE280>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000018360042880>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031340>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001835FCEE430>
    └ <sqlalchemy.orm.session.Session object at 0x0000018360042880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x000001835FCE4940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x00000183600A28C0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001835FCD95E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000183600422E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000183600422E0>
    │   └ <function SaveUpdateAll.execute at 0x000001835FCD9EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001835FCAE5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001835FCB7CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001835F914940>
             └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001836006C820>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001835F914C10>
           └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001835F914DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001835F914E50>
           └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001835F9170D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'create_user' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'create_user' cannot be null"), <traceback object at 0x00...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001835F9D8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001835FA17790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001835FE4DB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001835FE4DCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018360076C40>
           └ <_AsyncIoGreenlet object at 0x0000018360031480 (otid=0x000001835E2D3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000018360076BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x000001835FEE7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000018360...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x000001835FEF20D0>
          └ <aiomysql.connection.Connection object at 0x000001835FFD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001835FEF2820>
          └ <aiomysql.connection.Connection object at 0x000001835FFD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001835FEF3430>
          └ <aiomysql.connection.MySQLResult object at 0x000001836006C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001836006C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001835FEC5790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001836006CA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001836006CA90>
    │   └ <function raise_mysql_exception at 0x000001835FE741F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x000001835A9494C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x000001835A8185E0>
           └ <SpawnProcess name='SpawnProcess-50' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001835A823C10>
    └ <SpawnProcess name='SpawnProcess-50' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001835A95E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-50' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-50' parent=3284 started>
    │    └ <function subprocess_started at 0x000001835C874EE0>
    └ <SpawnProcess name='SpawnProcess-50' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001835A95E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001835C8740D0>
           │       │   └ <uvicorn.server.Server object at 0x000001835A95E460>
           │       └ <function run at 0x000001835C50C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001835DA06340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001835C50D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001835C50D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001835C5104C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001835C47E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000183600423D0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000183600423D0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000183600423D0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000183600423D0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001835DA3DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001835F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001835D1A2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001835DA3DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001835F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001835F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001835FFD37F0>
          └ <fastapi.applications.FastAPI object at 0x000001835D1A2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001835CE239D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001835D491250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001835FFD37F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001835CE239D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001835D85BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001835D491250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001835D491250...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001835D491670>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001835D491250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001835D491250...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001835FFF4AF0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001835D83F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001835D491670>
          └ <function wrap_app_handling_exceptions at 0x000001835D61E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001835D83F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001835D83F400>>
          └ <fastapi.routing.APIRouter object at 0x000001835D83F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001835D5CBD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001835FFCD0D0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001835FFF4D60>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001835FFCD160>
          └ <function wrap_app_handling_exceptions at 0x000001835D61E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDF70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001835FFCD160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001835FFF4D60>
                     └ <function get_request_handler.<locals>.app at 0x000001835FFCD280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001835D5C28B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001835D52F310>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001835FFDD160>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001835D535970>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x000001835FF02B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 16:05:31.985 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001835F9D8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001835FA17790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001835FE4DB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001835FE4DCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018360076C40>
           └ <_AsyncIoGreenlet object at 0x0000018360031480 (otid=0x000001835E2D3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000018360076BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x000001835FEE7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000018360...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x000001835FEF20D0>
          └ <aiomysql.connection.Connection object at 0x000001835FFD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001835FEF2820>
          └ <aiomysql.connection.Connection object at 0x000001835FFD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001835FEF3430>
          └ <aiomysql.connection.MySQLResult object at 0x000001836006C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001836006C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001835FEC5790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001836006CA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001836006CA90>
    │   └ <function raise_mysql_exception at 0x000001835FE741F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'create_user' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001835F7FE0D0>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000001835FEFF5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 165, in create
    await session.commit()
          │       └ <function AsyncSession.commit at 0x000001835FDC2AF0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001835F7FE0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
          │              │    │            └ <function Session.commit at 0x000001835FCE84C0>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x0000018360042880>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001835F7FE0D0>
          └ <function greenlet_spawn at 0x000001835E452CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000018360031480 (otid=0x000001835E2D3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001835FCE4700>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031340>

  File "<string>", line 2, in commit

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031340>
                └ <function SessionTransaction.commit at 0x000001835FCE4670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001835FCE45E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031340>

  File "<string>", line 2, in _prepare_impl

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031340>
                └ <function SessionTransaction._prepare_impl at 0x000001835FCE44C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001835FCEE280>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000018360042880>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031340>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001835FCEE430>
    └ <sqlalchemy.orm.session.Session object at 0x0000018360042880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x000001835FCE4940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018360031400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x00000183600A28C0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001835FCD95E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000183600422E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000183600422E0>
    │   └ <function SaveUpdateAll.execute at 0x000001835FCD9EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001835FCAE5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001835FCB7CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001835F914940>
             └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001836006C820>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001835F914C10>
           └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001835F914DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001835F914E50>
           └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001835F9170D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'create_user' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'create_user' cannot be null"), <traceback object at 0x00...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001835F9D8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001835FA17790>
    └ <sqlalchemy.engine.base.Connection object at 0x0000018360042130>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001835FE4DB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001835FE4DCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000018360076C40>
           └ <_AsyncIoGreenlet object at 0x0000018360031480 (otid=0x000001835E2D3030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000018360076BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001836007AEA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x000001835FEE7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000018360...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x000001835FEF20D0>
          └ <aiomysql.connection.Connection object at 0x000001835FFD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001835FEF2820>
          └ <aiomysql.connection.Connection object at 0x000001835FFD3A60>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001835FEF3430>
          └ <aiomysql.connection.MySQLResult object at 0x000001836006C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001836006C9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001835FEC5790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001836006CA90>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001836006CA90>
    │   └ <function raise_mysql_exception at 0x000001835FE741F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', '1196a50f-f7b1-425f-b4f6-f25035748d5c', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x000001835A9494C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x000001835A8185E0>
           └ <SpawnProcess name='SpawnProcess-50' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001835A823C10>
    └ <SpawnProcess name='SpawnProcess-50' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001835A95E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-50' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-50' parent=3284 started>
    │    └ <function subprocess_started at 0x000001835C874EE0>
    └ <SpawnProcess name='SpawnProcess-50' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001835A95E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001835C8740D0>
           │       │   └ <uvicorn.server.Server object at 0x000001835A95E460>
           │       └ <function run at 0x000001835C50C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001835DA06340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001835C50D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001835C50D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001835C5104C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001835C47E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000183600423D0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000183600423D0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000183600423D0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000183600423D0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001835DA3DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001835F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001835D1A2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001835DA3DAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001835F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001835F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001835FFD37F0>
          └ <fastapi.applications.FastAPI object at 0x000001835D1A2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001835CE239D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001835D491250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001835FFD37F0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001835CE239D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001835D85BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001835D491250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001835D491250...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001835D491670>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001835D491250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001835D491250...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001835FFF4AF0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001835D83F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001835D491670>
          └ <function wrap_app_handling_exceptions at 0x000001835D61E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001835D83F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001835D83F400>>
          └ <fastapi.routing.APIRouter object at 0x000001835D83F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001835D5CBD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001835FFCD0D0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001835FFF4D60>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001835FFCD160>
          └ <function wrap_app_handling_exceptions at 0x000001835D61E790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001835FFCDF70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001835FFCD160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001835FFF4D60>
                     └ <function get_request_handler.<locals>.app at 0x000001835FFCD280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001835D5C28B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001835D52F310>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001835FFDD160>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001835D535970>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x000001835FF02B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 16:07:27.576 | ERROR    | app.crud:wrapper:74 - 操作AddressCRUD失败, args：[], kwargs：{'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}, True方法报错: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-03-10 16:07:27.577 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001B360CA8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001B360CE7790>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001B3610DDB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001B3610DDCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001B361346C40>
           └ <_AsyncIoGreenlet object at 0x000001B3612E7640 (otid=0x000001B35F5A4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x000001B361346BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x000001B3611B7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000001B361...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x000001B3611C20D0>
          └ <aiomysql.connection.Connection object at 0x000001B3612AE880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001B3611C2820>
          └ <aiomysql.connection.Connection object at 0x000001B3612AE880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001B3611C3430>
          └ <aiomysql.connection.MySQLResult object at 0x000001B36133F9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001B36133F9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001B361195790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001B3613125B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001B3613125B0>
    │   └ <function raise_mysql_exception at 0x000001B3611441F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'create_user' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001B360ACE0D0>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000001B3611CF5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 167, in create
    await session.commit()
          │       └ <function AsyncSession.commit at 0x000001B361093AF0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001B360ACE0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
          │              │    │            └ <function Session.commit at 0x000001B360FB84C0>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x000001B361312880>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001B360ACE0D0>
          └ <function greenlet_spawn at 0x000001B35F722CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000001B3612E7640 (otid=0x000001B35F5A4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001B360FB4700>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9BC0>

  File "<string>", line 2, in commit

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9BC0>
                └ <function SessionTransaction.commit at 0x000001B360FB4670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001B360FB45E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9BC0>

  File "<string>", line 2, in _prepare_impl

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9BC0>
                └ <function SessionTransaction._prepare_impl at 0x000001B360FB44C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001B360FBE280>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001B361312880>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001B360FBE430>
    └ <sqlalchemy.orm.session.Session object at 0x000001B361312880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x000001B360FB4940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9C00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001B3613724C0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001B360FA95E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001B3612AEF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001B3612AEF70>
    │   └ <function SaveUpdateAll.execute at 0x000001B360FA9EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001B360F7E5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001B360F87CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001B360BE4940>
             └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001B36133F820>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001B360BE4C10>
           └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001B360BE4DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001B360BE4E50>
           └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001B360BE70D0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'create_user' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'create_user' cannot be null"), <traceback object at 0x00...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001B360CA8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001B360CE7790>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001B3610DDB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001B3610DDCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001B361346C40>
           └ <_AsyncIoGreenlet object at 0x000001B3612E7640 (otid=0x000001B35F5A4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x000001B361346BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x000001B3611B7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000001B361...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x000001B3611C20D0>
          └ <aiomysql.connection.Connection object at 0x000001B3612AE880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001B3611C2820>
          └ <aiomysql.connection.Connection object at 0x000001B3612AE880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001B3611C3430>
          └ <aiomysql.connection.MySQLResult object at 0x000001B36133F9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001B36133F9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001B361195790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001B3613125B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001B3613125B0>
    │   └ <function raise_mysql_exception at 0x000001B3611441F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x000001B35BC194C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x000001B35BB185E0>
           └ <SpawnProcess name='SpawnProcess-51' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B35BB23C10>
    └ <SpawnProcess name='SpawnProcess-51' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B35BC2E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-51' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-51' parent=3284 started>
    │    └ <function subprocess_started at 0x000001B35DB44EE0>
    └ <SpawnProcess name='SpawnProcess-51' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=516, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B35BC2E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=516, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001B35DB440D0>
           │       │   └ <uvicorn.server.Server object at 0x000001B35BC2E460>
           │       └ <function run at 0x000001B35D7DC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B35ECD8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B35D7DD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B35D7DD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B35D7E04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B35D74E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001B361312130>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001B361312130>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001B361312130>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001B361312130>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B35ED0FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B361...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B35E472FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B35ED0FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B361...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B361...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B3612A4820>
          └ <fastapi.applications.FastAPI object at 0x000001B35E472FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B35E0F39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B3612A3250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B3612A4820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B35E0F39D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001B35EB2BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B3612A3250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B3612A3250...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B3612A3BB0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B3612A3250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B3612A3250...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001B3612C5AF0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001B35EB0F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B3612A3BB0>
          └ <function wrap_app_handling_exceptions at 0x000001B35E8CB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001B35EB0F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001B35EB0F400>>
          └ <fastapi.routing.APIRouter object at 0x000001B35EB0F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001B35E89FD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001B36129D0D0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001B3612C5D60>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001B36129D160>
          └ <function wrap_app_handling_exceptions at 0x000001B35E8CB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DF70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001B36129D160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B3612C5D60>
                     └ <function get_request_handler.<locals>.app at 0x000001B36129D280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001B35E8AD8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001B35E801310>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001B3612AE160>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001B35E7FF970>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x000001B3611D2B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 16:07:27.650 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001B360CA8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001B360CE7790>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001B3610DDB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001B3610DDCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001B361346C40>
           └ <_AsyncIoGreenlet object at 0x000001B3612E7640 (otid=0x000001B35F5A4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x000001B361346BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x000001B3611B7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000001B361...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x000001B3611C20D0>
          └ <aiomysql.connection.Connection object at 0x000001B3612AE880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001B3611C2820>
          └ <aiomysql.connection.Connection object at 0x000001B3612AE880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001B3611C3430>
          └ <aiomysql.connection.MySQLResult object at 0x000001B36133F9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001B36133F9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001B361195790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001B3613125B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001B3613125B0>
    │   └ <function raise_mysql_exception at 0x000001B3611441F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1048, "Column 'create_user' cannot be null")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'obj': AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001B360ACE0D0>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000001B3611CF5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 167, in create
    await session.commit()
          │       └ <function AsyncSession.commit at 0x000001B361093AF0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001B360ACE0D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
          │              │    │            └ <function Session.commit at 0x000001B360FB84C0>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x000001B361312880>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001B360ACE0D0>
          └ <function greenlet_spawn at 0x000001B35F722CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000001B3612E7640 (otid=0x000001B35F5A4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001B360FB4700>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9BC0>

  File "<string>", line 2, in commit

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9BC0>
                └ <function SessionTransaction.commit at 0x000001B360FB4670>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001B360FB45E0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9BC0>

  File "<string>", line 2, in _prepare_impl

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9BC0>
                └ <function SessionTransaction._prepare_impl at 0x000001B360FB44C0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001B360FBE280>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001B361312880>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001B360FBE430>
    └ <sqlalchemy.orm.session.Session object at 0x000001B361312880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x000001B360FB4940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001B35E7F9C00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001B3613724C0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001B360FA95E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001B3612AEF70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001B3612AEF70>
    │   └ <function SaveUpdateAll.execute at 0x000001B360FA9EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001B360F7E5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001B360F87CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001B360BE4940>
             └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001B36133F820>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001B360BE4C10>
           └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001B360BE4DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001B360BE4E50>
           └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001B360BE70D0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1048, "Column 'create_user' cannot be null")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1048, "Column 'create_user' cannot be null"), <traceback object at 0x00...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1048, "Column \'create_user\' cannot be null")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001B360CA8EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x000001B360CE7790>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B361312400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x000001B3610DDB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x000001B3610DDCA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x000001B361346C40>
           └ <_AsyncIoGreenlet object at 0x000001B3612E7640 (otid=0x000001B35F5A4030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x000001B361346BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x000001B361373040>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x000001B3611B7160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x000001B361...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x000001B3611C20D0>
          └ <aiomysql.connection.Connection object at 0x000001B3612AE880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x000001B3611C2820>
          └ <aiomysql.connection.Connection object at 0x000001B3612AE880>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x000001B3611C3430>
          └ <aiomysql.connection.MySQLResult object at 0x000001B36133F9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x000001B36133F9D0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x000001B361195790>
    └ <pymysql.protocol.MysqlPacket object at 0x000001B3613125B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x000001B3613125B0>
    │   └ <function raise_mysql_exception at 0x000001B3611441F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Column 'create_user' cannot be null"
          │          └ 1048
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'create_user' cannot be null")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', 'dd78792e-8155-4454-81ed-5a2f6f527cb7', None, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 368
               │     └ 3
               └ <function _main at 0x000001B35BC194C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 368
           │    └ <function BaseProcess._bootstrap at 0x000001B35BB185E0>
           └ <SpawnProcess name='SpawnProcess-51' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B35BB23C10>
    └ <SpawnProcess name='SpawnProcess-51' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B35BC2E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-51' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-51' parent=3284 started>
    │    └ <function subprocess_started at 0x000001B35DB44EE0>
    └ <SpawnProcess name='SpawnProcess-51' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=516, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B35BC2E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=516, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001B35DB440D0>
           │       │   └ <uvicorn.server.Server object at 0x000001B35BC2E460>
           │       └ <function run at 0x000001B35D7DC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B35ECD8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B35D7DD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B35D7DD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B35D7E04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B35D74E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001B361312130>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001B361312130>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001B361312130>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001B361312130>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B35ED0FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B361...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B35E472FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B35ED0FAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B361...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B361...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B3612A4820>
          └ <fastapi.applications.FastAPI object at 0x000001B35E472FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B35E0F39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B3612A3250>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B3612A4820>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B35E0F39D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001B35EB2BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B3612A3250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B3612A3250...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B3612A3BB0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B3612A3250>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B3612A3250...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001B3612C5AF0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001B35EB0F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B3612A3BB0>
          └ <function wrap_app_handling_exceptions at 0x000001B35E8CB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001B35EB0F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001B35EB0F400>>
          └ <fastapi.routing.APIRouter object at 0x000001B35EB0F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001B35E89FD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001B36129D0D0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001B3612C5D60>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001B36129D160>
          └ <function wrap_app_handling_exceptions at 0x000001B35E8CB790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001B36129DF70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001B36129D160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B3612C5D60>
                     └ <function get_request_handler.<locals>.app at 0x000001B36129D280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001B35E8AD8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001B35E801310>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001B3612AE160>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload,user_info.get("id"))
          │           │                │       │         └ <method 'get' of 'dict' objects>
          │           │                │       └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001B35E7FF970>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    await cls.create(obj=payload)
          │   │          └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │   └ <classmethod object at 0x000001B3611D2B80>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 16:24:41.285 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x00000215210B94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x0000021520FB85E0>
           └ <SpawnProcess name='SpawnProcess-56' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000021520FC3C10>
    └ <SpawnProcess name='SpawnProcess-56' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000215210CE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-56' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-56' parent=3284 started>
    │    └ <function subprocess_started at 0x0000021522FE4EE0>
    └ <SpawnProcess name='SpawnProcess-56' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=516, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000215210CE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=516, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000021522FE40D0>
           │       │   └ <uvicorn.server.Server object at 0x00000215210CE460>
           │       └ <function run at 0x0000021522C7C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002152417A340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000021522C7D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000021522C7D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000021522C814C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000021522BEE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000215267D6E80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000215267D6E80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000215267D6E80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000215267D6E80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000215241AFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021526...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000021523912FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000215241AFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021526...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021526...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021526750DC0>
          └ <fastapi.applications.FastAPI object at 0x0000021523912FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000215235939D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021526750EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021526750DC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000215235939D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000021523FCBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021526750EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000021526750EE0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021526750E20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021526750EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000021526750EE0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000021526767E50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000021523FAF280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021526750E20>
          └ <function wrap_app_handling_exceptions at 0x0000021523D6B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000021523FAF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000021523FAF280>>
          └ <fastapi.routing.APIRouter object at 0x0000021523FAF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000021523D40D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002152673FE50>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000215267B0040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000021526752160>
          └ <function wrap_app_handling_exceptions at 0x0000021523D6B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752430>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000021526752160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000215267B0040>
                     └ <function get_request_handler.<locals>.app at 0x000002152673FD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000021523D4B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000021526717EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000215267547C0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload, user_info.get("id"))
          │           │                │        │         └ <method 'get' of 'dict' objects>
          │           │                │        └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000021523CA6AC0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 22, in register_address
    payload.create_user = user_id
    │                     └ '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1'
    └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pydantic\main.py", line 795, in __setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "AddressPayload" object has no field "create_user"
2024-03-10 16:24:41.322 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 384
               │     └ 3
               └ <function _main at 0x00000215210B94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 384
           │    └ <function BaseProcess._bootstrap at 0x0000021520FB85E0>
           └ <SpawnProcess name='SpawnProcess-56' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000021520FC3C10>
    └ <SpawnProcess name='SpawnProcess-56' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000215210CE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-56' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-56' parent=3284 started>
    │    └ <function subprocess_started at 0x0000021522FE4EE0>
    └ <SpawnProcess name='SpawnProcess-56' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=516, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000215210CE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=516, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x0000021522FE40D0>
           │       │   └ <uvicorn.server.Server object at 0x00000215210CE460>
           │       └ <function run at 0x0000021522C7C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002152417A340>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000021522C7D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000021522C7D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000021522C814C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000021522BEE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000215267D6E80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000215267D6E80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000215267D6E80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000215267D6E80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000215241AFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021526...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x0000021523912FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000215241AFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021526...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021526...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021526750DC0>
          └ <fastapi.applications.FastAPI object at 0x0000021523912FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000215235939D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021526750EE0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021526750DC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000215235939D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x0000021523FCBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021526750EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000021526750EE0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021526750E20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021526750EE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000021526750EE0...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000021526767E50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x0000021523FAF280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021526750E20>
          └ <function wrap_app_handling_exceptions at 0x0000021523D6B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752310>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x0000021523FAF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752310>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000021523FAF280>>
          └ <fastapi.routing.APIRouter object at 0x0000021523FAF280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752310>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x0000021523D40D30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752310>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000002152673FE50>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752310>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000215267B0040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000021526752160>
          └ <function wrap_app_handling_exceptions at 0x0000021523D6B790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000021526752430>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000021526752160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000215267B0040>
                     └ <function get_request_handler.<locals>.app at 0x000002152673FD30>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000021523D4B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x0000021526717EE0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000215267547C0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload, user_info.get("id"))
          │           │                │        │         └ <method 'get' of 'dict' objects>
          │           │                │        └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x0000021523CA6AC0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 22, in register_address
    payload.create_user = user_id
    │                     └ '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1'
    └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pydantic\main.py", line 795, in __setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "AddressPayload" object has no field "create_user"
2024-03-10 16:25:57.644 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 416
               │     └ 3
               └ <function _main at 0x000001ED3DE894C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 416
           │    └ <function BaseProcess._bootstrap at 0x000001ED3DD885E0>
           └ <SpawnProcess name='SpawnProcess-58' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001ED3DD93C10>
    └ <SpawnProcess name='SpawnProcess-58' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001ED3DE9E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-58' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-58' parent=3284 started>
    │    └ <function subprocess_started at 0x000001ED3FDA3EE0>
    └ <SpawnProcess name='SpawnProcess-58' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001ED3DE9E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001ED3FDA30D0>
           │       │   └ <uvicorn.server.Server object at 0x000001ED3DE9E460>
           │       └ <function run at 0x000001ED3FA3C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001ED40F38340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001ED3FA3D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001ED3FA3D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001ED3FA404C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001ED3F9AE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001ED4359EE80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001ED4359EE80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001ED4359EE80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001ED4359EE80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001ED40F69AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ED43...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001ED406D2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001ED40F69AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ED43...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ED43...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001ED434FFCD0>
          └ <fastapi.applications.FastAPI object at 0x000001ED406D2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001ED403549D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001ED434FFC70>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001ED434FFCD0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001ED403549D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001ED40D8BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001ED434FFC70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001ED434FFC70...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001ED434FFD00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001ED434FFC70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001ED434FFC70...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001ED43526AC0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001ED40D6F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001ED434FFD00>
          └ <function wrap_app_handling_exceptions at 0x000001ED40B24790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001ED40D6F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001ED40D6F400>>
          └ <fastapi.routing.APIRouter object at 0x000001ED40D6F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001ED40AFDD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001ED434FC0D0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001ED43526D30>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001ED434FC160>
          └ <function wrap_app_handling_exceptions at 0x000001ED40B24790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCF70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001ED434FC160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001ED43526D30>
                     └ <function get_request_handler.<locals>.app at 0x000001ED434FC280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001ED40B0B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001ED40A65310>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001ED4350E250>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload, user_info.get("id"))
          │           │                │        │         └ <method 'get' of 'dict' objects>
          │           │                │        └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001ED40A61970>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 22, in register_address
    setattr(payload, 'create_user', user_id)
            │                       └ '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1'
            └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pydantic\main.py", line 795, in __setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "AddressPayload" object has no field "create_user"
2024-03-10 16:25:57.674 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 416
               │     └ 3
               └ <function _main at 0x000001ED3DE894C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 416
           │    └ <function BaseProcess._bootstrap at 0x000001ED3DD885E0>
           └ <SpawnProcess name='SpawnProcess-58' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001ED3DD93C10>
    └ <SpawnProcess name='SpawnProcess-58' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001ED3DE9E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-58' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-58' parent=3284 started>
    │    └ <function subprocess_started at 0x000001ED3FDA3EE0>
    └ <SpawnProcess name='SpawnProcess-58' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001ED3DE9E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001ED3FDA30D0>
           │       │   └ <uvicorn.server.Server object at 0x000001ED3DE9E460>
           │       └ <function run at 0x000001ED3FA3C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001ED40F38340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001ED3FA3D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001ED3FA3D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001ED3FA404C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001ED3F9AE0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001ED4359EE80>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001ED4359EE80>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001ED4359EE80>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001ED4359EE80>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001ED40F69AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ED43...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001ED406D2FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001ED40F69AF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ED43...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ED43...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001ED434FFCD0>
          └ <fastapi.applications.FastAPI object at 0x000001ED406D2FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001ED403549D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001ED434FFC70>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001ED434FFCD0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001ED403549D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001ED40D8BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001ED434FFC70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001ED434FFC70...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001ED434FFD00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001ED434FFC70>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001ED434FFC70...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001ED43526AC0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001ED40D6F400>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001ED434FFD00>
          └ <function wrap_app_handling_exceptions at 0x000001ED40B24790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCD30>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001ED40D6F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCD30>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001ED40D6F400>>
          └ <fastapi.routing.APIRouter object at 0x000001ED40D6F400>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001ED40AFDD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001ED434FC0D0>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCD30>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001ED43526D30>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001ED434FC160>
          └ <function wrap_app_handling_exceptions at 0x000001ED40B24790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001ED434FCF70>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001ED434FC160>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001ED43526D30>
                     └ <function get_request_handler.<locals>.app at 0x000001ED434FC280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001ED40B0B8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001ED40A65310>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001ED4350E250>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload, user_info.get("id"))
          │           │                │        │         └ <method 'get' of 'dict' objects>
          │           │                │        └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001ED40A61970>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 22, in register_address
    setattr(payload, 'create_user', user_id)
            │                       └ '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1'
            └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pydantic\main.py", line 795, in __setattr__
    raise ValueError(f'"{self.__class__.__name__}" object has no field "{name}"')

ValueError: "AddressPayload" object has no field "create_user"
2024-03-10 16:31:48.796 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 16:31:48.797 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 16:32:44.105 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 420
               │     └ 3
               └ <function _main at 0x000001BD38D094C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 420
           │    └ <function BaseProcess._bootstrap at 0x000001BD38C085E0>
           └ <SpawnProcess name='SpawnProcess-65' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001BD38C13C10>
    └ <SpawnProcess name='SpawnProcess-65' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001BD38D1E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-65' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-65' parent=3284 started>
    │    └ <function subprocess_started at 0x000001BD3AC34EE0>
    └ <SpawnProcess name='SpawnProcess-65' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001BD38D1E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001BD3AC340D0>
           │       │   └ <uvicorn.server.Server object at 0x000001BD38D1E460>
           │       └ <function run at 0x000001BD3A8CC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001BD3BDC8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001BD3A8CD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001BD3A8CD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001BD3A8D04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001BD3A83E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BD3E437EB0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001BD3E437EB0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001BD3E437EB0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BD3E437EB0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BD3BDFFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BD3E...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001BD3BE92FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BD3BDFFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BD3E...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BD3E...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BD3E3AED00>
          └ <fastapi.applications.FastAPI object at 0x000001BD3BE92FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BD3B1E29D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BD3E3AEE20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BD3E3AED00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BD3B1E29D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001BD3C52BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BD3E3AEE20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001BD3E3AEE20...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BD3E3AEC70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BD3E3AEE20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001BD3E3AEE20...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001BD3E3C6E80>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001BD3C50E280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BD3E3AEC70>
          └ <function wrap_app_handling_exceptions at 0x000001BD3C2C9790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B11F0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001BD3C50E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B11F0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001BD3C50E280>>
          └ <fastapi.routing.APIRouter object at 0x000001BD3C50E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B11F0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001BD3C2AFD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B11F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001BD3E39ED30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B11F0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001BD3E40E130>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001BD3E3B1310>
          └ <function wrap_app_handling_exceptions at 0x000001BD3C2C9790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B15E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001BD3E3B1310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001BD3E40E130>
                     └ <function get_request_handler.<locals>.app at 0x000001BD3E39EEE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001BD3C2AB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001BD3C2193A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001BD3E3B27F0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload, user_info.get("id"))
          │           │                │        │         └ <method 'get' of 'dict' objects>
          │           │                │        └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001BD3C2159A0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    model = Address(**payload.model_dump(),
            │         │       └ <function BaseModel.model_dump at 0x000001BD3B3CACA0>
            │         └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
            └ <class 'app.models.address.Address'>

  File "<string>", line 4, in __init__

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
    │       │        │            │     │     └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1', 'user_id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1'}
    │       │        │            │     └ ()
    │       │        │            └ <sqlalchemy.orm.state.InstanceState object at 0x000001BD3E430C40>
    │       │        └ <member 'init_failure' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x000001BD3C2195E0>
    └ <ClassManager of <class 'app.models.address.Address'> at 1bd3c20fbd0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001BD3E4037C0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ TypeError("'user_id' is an invalid keyword argument for Address")

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
    │       │              │            └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1', 'user_id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1'}
    │       │              └ (<sqlalchemy.orm.state.InstanceState object at 0x000001BD3E430C40>, <app.models.address.Address object at 0x000001BD3E3AEE80>)
    │       └ <function _declarative_constructor at 0x000001BD3E0FE040>
    └ <ClassManager of <class 'app.models.address.Address'> at 1bd3c20fbd0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(

TypeError: 'user_id' is an invalid keyword argument for Address
2024-03-10 16:32:44.178 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 420
               │     └ 3
               └ <function _main at 0x000001BD38D094C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 420
           │    └ <function BaseProcess._bootstrap at 0x000001BD38C085E0>
           └ <SpawnProcess name='SpawnProcess-65' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001BD38C13C10>
    └ <SpawnProcess name='SpawnProcess-65' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001BD38D1E430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-65' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-65' parent=3284 started>
    │    └ <function subprocess_started at 0x000001BD3AC34EE0>
    └ <SpawnProcess name='SpawnProcess-65' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001BD38D1E460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001BD3AC340D0>
           │       │   └ <uvicorn.server.Server object at 0x000001BD38D1E460>
           │       └ <function run at 0x000001BD3A8CC160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001BD3BDC8340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001BD3A8CD9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001BD3A8CD940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001BD3A8D04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001BD3A83E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BD3E437EB0>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x000001BD3E437EB0>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x000001BD3E437EB0>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x000001BD3E437EB0>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BD3BDFFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BD3E...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001BD3BE92FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BD3BDFFAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BD3E...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BD3E...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BD3E3AED00>
          └ <fastapi.applications.FastAPI object at 0x000001BD3BE92FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BD3B1E29D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BD3E3AEE20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BD3E3AED00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BD3B1E29D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x000001BD3C52BCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BD3E3AEE20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001BD3E3AEE20...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BD3E3AEC70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BD3E3AEE20>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001BD3E3AEE20...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x000001BD3E3C6E80>
          │                            │    └ <fastapi.routing.APIRouter object at 0x000001BD3C50E280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BD3E3AEC70>
          └ <function wrap_app_handling_exceptions at 0x000001BD3C2C9790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B11F0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x000001BD3C50E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B11F0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001BD3C50E280>>
          └ <fastapi.routing.APIRouter object at 0x000001BD3C50E280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B11F0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001BD3C2AFD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B11F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001BD3E39ED30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B11F0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x000001BD3E40E130>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000001BD3E3B1310>
          └ <function wrap_app_handling_exceptions at 0x000001BD3C2C9790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000001BD3E3B15E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x000001BD3E3B1310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001BD3E40E130>
                     └ <function get_request_handler.<locals>.app at 0x000001BD3E39EEE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001BD3C2AB8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001BD3C2193A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001BD3E3B27F0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload, user_info.get("id"))
          │           │                │        │         └ <method 'get' of 'dict' objects>
          │           │                │        └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001BD3C2159A0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 21, in register_address
    model = Address(**payload.model_dump(),
            │         │       └ <function BaseModel.model_dump at 0x000001BD3B3CACA0>
            │         └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
            └ <class 'app.models.address.Address'>

  File "<string>", line 4, in __init__

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
    │       │        │            │     │     └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1', 'user_id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1'}
    │       │        │            │     └ ()
    │       │        │            └ <sqlalchemy.orm.state.InstanceState object at 0x000001BD3E430C40>
    │       │        └ <member 'init_failure' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x000001BD3C2195E0>
    └ <ClassManager of <class 'app.models.address.Address'> at 1bd3c20fbd0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001BD3E4037C0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ TypeError("'user_id' is an invalid keyword argument for Address")

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
    │       │              │            └ {'env': 1, 'name': '开发', 'gateway': 'https://127.0.0.1', 'user_id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1'}
    │       │              └ (<sqlalchemy.orm.state.InstanceState object at 0x000001BD3E430C40>, <app.models.address.Address object at 0x000001BD3E3AEE80>)
    │       └ <function _declarative_constructor at 0x000001BD3E0FE040>
    └ <ClassManager of <class 'app.models.address.Address'> at 1bd3c20fbd0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(

TypeError: 'user_id' is an invalid keyword argument for Address
2024-03-10 16:33:28.246 | ERROR    | app.crud:wrapper:74 - 操作AddressCRUD失败, args：[], kwargs：{'model': <app.models.address.Address object at 0x0000015952887D30>}, True方法报错: (pymysql.err.IntegrityError) (1062, "Duplicate entry '1-开发' for key 'brisk_address.env'")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-03-10 16:33:28.249 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000015952268EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x00000159522A77C0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x00000159526DAB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x00000159526DACA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000015952906C40>
           └ <_AsyncIoGreenlet object at 0x00000159528C28C0 (otid=0x0000015950B63030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000015952906BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000015952777160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000015952...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x00000159527820D0>
          └ <aiomysql.connection.Connection object at 0x00000159528735E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000015952782820>
          └ <aiomysql.connection.Connection object at 0x00000159528735E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000015952783430>
          └ <aiomysql.connection.MySQLResult object at 0x00000159528F6A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x00000159528F6A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000015952754790>
    └ <pymysql.protocol.MysqlPacket object at 0x00000159528F6AC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x00000159528F6AC0>
    │   └ <function raise_mysql_exception at 0x00000159527031F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Duplicate entry '1-开发' for key 'brisk_address.env'"
          │          └ 1062
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1062, "Duplicate entry '1-开发' for key 'brisk_address.env'")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'model': <app.models.address.Address object at 0x0000015952887D30>}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000159528D0C10>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000001595278F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 165, in create
    await session.flush()
          │       └ <function AsyncSession.flush at 0x0000015952652670>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000159528D0C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 791, in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
          │              │    │            │              └ None
          │              │    │            └ <function Session.flush at 0x000001595257E280>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x00000159528D0DF0>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000159528D0C10>
          └ <function greenlet_spawn at 0x0000015950CE2CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x00000159528C28C0 (otid=0x0000015950B63030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001595257E430>
    └ <sqlalchemy.orm.session.Session object at 0x00000159528D0DF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x0000015952574940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000159528C2740>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000015952931680>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1062, "Duplicate entry \'1-开发\' for key \'brisk_address.env\'")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x00000159525695E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000159528D0E80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000159528D0E80>
    │   └ <function SaveUpdateAll.execute at 0x0000015952569EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001595253E5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x0000015952547CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x00000159521A4940>
             └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x00000159528D0940>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000159521A4C10>
           └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000159521A4DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000159521A4E50>
           └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000159521A60D0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1062, "Duplicate entry '1-开发' for key 'brisk_address.env'")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1062, "Duplicate entry '1-开发' for key 'brisk_address.env'"), <traceback...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1062, "Duplicate entry \'1-开发\' for key \'brisk_address.env\'")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000015952268EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x00000159522A77C0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x00000159526DAB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x00000159526DACA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000015952906C40>
           └ <_AsyncIoGreenlet object at 0x00000159528C28C0 (otid=0x0000015950B63030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000015952906BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000015952777160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000015952...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x00000159527820D0>
          └ <aiomysql.connection.Connection object at 0x00000159528735E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000015952782820>
          └ <aiomysql.connection.Connection object at 0x00000159528735E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000015952783430>
          └ <aiomysql.connection.MySQLResult object at 0x00000159528F6A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x00000159528F6A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000015952754790>
    └ <pymysql.protocol.MysqlPacket object at 0x00000159528F6AC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x00000159528F6AC0>
    │   └ <function raise_mysql_exception at 0x00000159527031F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Duplicate entry '1-开发' for key 'brisk_address.env'"
          │          └ 1062
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1062, "Duplicate entry '1-开发' for key 'brisk_address.env'")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 100
               │     └ 3
               └ <function _main at 0x000001594D1D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 100
           │    └ <function BaseProcess._bootstrap at 0x000001594D0B45E0>
           └ <SpawnProcess name='SpawnProcess-66' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001594D0B3C10>
    └ <SpawnProcess name='SpawnProcess-66' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001594D1EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-66' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-66' parent=3284 started>
    │    └ <function subprocess_started at 0x000001594F103EE0>
    └ <SpawnProcess name='SpawnProcess-66' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=448, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001594D1EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=448, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001594F1030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001594D1EE460>
           │       └ <function run at 0x000001594ED9C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000015950298340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001594ED9D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001594ED9D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001594EDA04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001594ED0E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000159528F6B50>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000159528F6B50>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000159528F6B50>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000159528F6B50>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000159502CAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015952...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001594FA32FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000159502CAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015952...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015952...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001595286FDF0>
          └ <fastapi.applications.FastAPI object at 0x000001594FA32FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001594F6B39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001595286FF10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001595286FDF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001594F6B39D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000159500EBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001595286FF10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001595286FF10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001595286FE50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001595286FF10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001595286FF10...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000015952887E80>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000159500CE280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001595286FE50>
          └ <function wrap_app_handling_exceptions at 0x000001594FEAD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528721F0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000159500CE280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528721F0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000159500CE280>>
          └ <fastapi.routing.APIRouter object at 0x00000159500CE280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528721F0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001594FE5BD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528721F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001595285ED30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528721F0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000159528D0070>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000015952872310>
          └ <function wrap_app_handling_exceptions at 0x000001594FEAD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528725E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000015952872310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000159528D0070>
                     └ <function get_request_handler.<locals>.app at 0x000001595285EEE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001594FE5F8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001594FDC73A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000159528737F0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload, user_info.get("id"))
          │           │                │        │         └ <method 'get' of 'dict' objects>
          │           │                │        └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001594FDC09A0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 23, in register_address
    await cls.create(model=model)
          │   │            └ <app.models.address.Address object at 0x0000015952887D30>
          │   └ <classmethod object at 0x0000015952792B50>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 16:33:28.326 | ERROR    | uvicorn.protocols.http.httptools_impl:run_asgi:424 - Exception in ASGI application

Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000015952268EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x00000159522A77C0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x00000159526DAB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x00000159526DACA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000015952906C40>
           └ <_AsyncIoGreenlet object at 0x00000159528C28C0 (otid=0x0000015950B63030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000015952906BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000015952777160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000015952...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x00000159527820D0>
          └ <aiomysql.connection.Connection object at 0x00000159528735E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000015952782820>
          └ <aiomysql.connection.Connection object at 0x00000159528735E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000015952783430>
          └ <aiomysql.connection.MySQLResult object at 0x00000159528F6A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x00000159528F6A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000015952754790>
    └ <pymysql.protocol.MysqlPacket object at 0x00000159528F6AC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x00000159528F6AC0>
    │   └ <function raise_mysql_exception at 0x00000159527031F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Duplicate entry '1-开发' for key 'brisk_address.env'"
          │          └ 1062
          └ <class 'pymysql.err.IntegrityError'>

pymysql.err.IntegrityError: (1062, "Duplicate entry '1-开发' for key 'brisk_address.env'")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 71, in wrapper
    return await func(cls, *args, session=ss, **kwargs)
                 │    │     │             │     └ {'model': <app.models.address.Address object at 0x0000015952887D30>}
                 │    │     │             └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000159528D0C10>
                 │    │     └ ()
                 │    └ <class 'app.crud.config.address.AddressCRUD'>
                 └ <function BaseCrud.create at 0x000001595278F5E0>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 165, in create
    await session.flush()
          │       └ <function AsyncSession.flush at 0x0000015952652670>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000159528D0C10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 791, in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
          │              │    │            │              └ None
          │              │    │            └ <function Session.flush at 0x000001595257E280>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x00000159528D0DF0>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000159528D0C10>
          └ <function greenlet_spawn at 0x0000015950CE2CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x00000159528C28C0 (otid=0x0000015950B63030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001595257E430>
    └ <sqlalchemy.orm.session.Session object at 0x00000159528D0DF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4432, in _flush
    transaction.rollback(_capture_exception=True)
    │           └ <function SessionTransaction.rollback at 0x0000015952574940>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000159528C2740>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000015952931680>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1062, "Duplicate entry \'1-开发\' for key \'brisk_address.env\'")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x00000159525695E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000159528D0E80>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000159528D0E80>
    │   └ <function SaveUpdateAll.execute at 0x0000015952569EE0>
    └ SaveUpdateAll(Mapper[Address(brisk_address)])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001595253E5E0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\orm\\persist...
    │    └ <module 'sqlalchemy.util.preloaded' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\preload...
    └ <module 'sqlalchemy.util' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\sqlalchemy\\util\\__init__.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x0000015952547CA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x00000159521A4940>
             └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x00000159528D0940>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000159521A4C10>
           └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000159521A4DC0>
          └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000159521A4E50>
           └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000159521A60D0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1062, "Duplicate entry '1-开发' for key 'brisk_address.env'")
          │                    │              └ (<class 'pymysql.err.IntegrityError'>, IntegrityError(1062, "Duplicate entry '1-开发' for key 'brisk_address.env'"), <traceback...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(pymysql.err.IntegrityError) (1062, "Duplicate entry \'1-开发\' for key \'brisk_address.env\'")')

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000015952268EE0>
    │    └ <sqlalchemy.dialects.mysql.aiomysql.MySQLDialect_aiomysql object at 0x00000159522A77C0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000159528D0850>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
    │      │       └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
    │      └ <function AsyncAdapt_aiomysql_cursor.execute at 0x00000159526DAB80>
    └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 93, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
           │    │      │    │              └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
           │    │      │    └ <function AsyncAdapt_aiomysql_cursor._execute_async at 0x00000159526DACA0>
           │    │      └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>
           │    └ <member 'await_' of 'AsyncAdapt_aiomysql_cursor' objects>
           └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_aiomysql_cursor._execute_async at 0x0000015952906C40>
           └ <_AsyncIoGreenlet object at 0x00000159528C28C0 (otid=0x0000015950B63030) dead>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object Connection.rollback at 0x0000015952906BC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 102, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)
                   │    │               └ 'INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s,...
                   │    └ <member '_cursor' of 'AsyncAdapt_aiomysql_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_cursor object at 0x0000015952932090>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
          │    │      └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Cursor._query at 0x0000015952777160>
          └ <sqlalchemy.dialects.mysql.aiomysql.AsyncAdapt_aiomysql_dbapi._init_cursors_subclasses.<locals>.Cursor object at 0x0000015952...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
          │    │     └ "INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (1, ...
          │    └ <function Connection.query at 0x00000159527820D0>
          └ <aiomysql.connection.Connection object at 0x00000159528735E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
          │    │                             └ False
          │    └ <function Connection._read_query_result at 0x0000015952782820>
          └ <aiomysql.connection.Connection object at 0x00000159528735E0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
          │      └ <function MySQLResult.read at 0x0000015952783430>
          └ <aiomysql.connection.MySQLResult object at 0x00000159528F6A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                         │    └ None
                         └ <aiomysql.connection.MySQLResult object at 0x00000159528F6A00>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    │      └ <function MysqlPacket.raise_for_error at 0x0000015952754790>
    └ <pymysql.protocol.MysqlPacket object at 0x00000159528F6AC0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
    │   │                     │    └ <member '_data' of 'MysqlPacket' objects>
    │   │                     └ <pymysql.protocol.MysqlPacket object at 0x00000159528F6AC0>
    │   └ <function raise_mysql_exception at 0x00000159527031F0>
    └ <module 'pymysql.err' from 'E:\\ProgramCode\\python\\brisk\\venv\\lib\\site-packages\\pymysql\\err.py'>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
          │          │      └ "Duplicate entry '1-开发' for key 'brisk_address.env'"
          │          └ 1062
          └ <class 'pymysql.err.IntegrityError'>

sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1062, "Duplicate entry '1-开发' for key 'brisk_address.env'")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '开发', 'https://127.0.0.1', 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 100
               │     └ 3
               └ <function _main at 0x000001594D1D94C0>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 100
           │    └ <function BaseProcess._bootstrap at 0x000001594D0B45E0>
           └ <SpawnProcess name='SpawnProcess-66' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 315, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001594D0B3C10>
    └ <SpawnProcess name='SpawnProcess-66' parent=3284 started>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001594D1EE430>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-66' parent=3284 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-66' parent=3284 started>
    │    └ <function subprocess_started at 0x000001594F103EE0>
    └ <SpawnProcess name='SpawnProcess-66' parent=3284 started>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\_subprocess.py", line 78, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=448, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001594D1EE460>>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\server.py", line 62, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=448, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 443)>]
           │       │   │    └ <function Server.serve at 0x000001594F1030D0>
           │       │   └ <uvicorn.server.Server object at 0x000001594D1EE460>
           │       └ <function run at 0x000001594ED9C160>
           └ <module 'asyncio' from 'C:\\Users\\wies\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\__init__.py'>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000015950298340>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001594ED9D9D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 603, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001594ED9D940>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 570, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001594EDA04C0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\base_events.py", line 1859, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001594ED0E0D0>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000159528F6B50>(<Future finished result=None>)>

  File "C:\Users\wies\AppData\Local\Programs\Python\Python38\lib\asyncio\events.py", line 81, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskWakeupMethWrapper object at 0x00000159528F6B50>(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskWakeupMethWrapper object at 0x00000159528F6B50>(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskWakeupMethWrapper object at 0x00000159528F6B50>(<Future finished result=None>)>

> File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000159502CAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015952...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
                 │    └ <fastapi.applications.FastAPI object at 0x000001594FA32FA0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000159502CAAF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015952...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015952...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001595286FDF0>
          └ <fastapi.applications.FastAPI object at 0x000001594FA32FA0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001594F6B39D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001595286FF10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001595286FDF0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:443', 'connection': 'keep-alive', 'content-length': '68', 'sec-ch-ua': '"Chromium";v="122", "Not(...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001594F6B39D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function CORSMiddleware.simple_response at 0x00000159500EBCA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001595286FF10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001595286FF10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001595286FE50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001595286FF10>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001595286FF10...
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    │    └ <starlette.requests.Request object at 0x0000015952887E80>
          │                            │    └ <fastapi.routing.APIRouter object at 0x00000159500CE280>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001595286FE50>
          └ <function wrap_app_handling_exceptions at 0x000001594FEAD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528721F0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <fastapi.routing.APIRouter object at 0x00000159500CE280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528721F0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x00000159500CE280>>
          └ <fastapi.routing.APIRouter object at 0x00000159500CE280>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528721F0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │     └ <function Route.handle at 0x000001594FE5BD30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528721F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │    └ <function request_response.<locals>.app at 0x000001595285ED30>
          └ APIRoute(path='/api/v1/config/gateway', name='create_gateway', methods=['POST'])

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528721F0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          │                            │    └ <starlette.requests.Request object at 0x00000159528D0070>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000015952872310>
          └ <function wrap_app_handling_exceptions at 0x000001594FEAD790>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000159528725E0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000015...
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 443), 'cli...
          └ <function request_response.<locals>.app.<locals>.app at 0x0000015952872310>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000159528D0070>
                     └ <function get_request_handler.<locals>.app at 0x000001595285EEE0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001594FE5F8B0>

  File "E:\ProgramCode\python\brisk\venv\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'user_info': {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com',...
                 │         └ <function create_gateway at 0x000001594FDC73A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000159528737F0>

  File "E:\ProgramCode\python\brisk\app\apis\v1\config\address.py", line 25, in create_gateway
    await AddressCRUD.register_address(payload, user_info.get("id"))
          │           │                │        │         └ <method 'get' of 'dict' objects>
          │           │                │        └ {'id': '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', 'username': 'admin', 'name': '管理员', 'email': 'user@example.com', 'role': 2, 'p...
          │           │                └ AddressPayload(env=1, name='开发', gateway='https://127.0.0.1')
          │           └ <classmethod object at 0x000001594FDC09A0>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\config\address.py", line 23, in register_address
    await cls.create(model=model)
          │   │            └ <app.models.address.Address object at 0x0000015952887D30>
          │   └ <classmethod object at 0x0000015952792B50>
          └ <class 'app.crud.config.address.AddressCRUD'>

  File "E:\ProgramCode\python\brisk\app\crud\__init__.py", line 77, in wrapper
    raise f"操作数据失败: {e}"

TypeError: exceptions must derive from BaseException
2024-03-10 16:41:02.856 | ERROR    | app.crud:wrapper:74 - 操作AddressCRUD失败, args：[], kwargs：{'model': <app.models.address.Address object at 0x000002028670EDC0>}, True方法报错: (pymysql.err.IntegrityError) (1062, "Duplicate entry '1-测试' for key 'brisk_address.env'")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '测试', 'https://127.0.0.1', 'bcde9800-4071-4144-aac1-526194be3a5f', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-03-10 16:42:20.393 | ERROR    | app.crud:wrapper:74 - 操作AddressCRUD失败, args：[], kwargs：{'model': <app.models.address.Address object at 0x000001FFA2E0FC70>}, True方法报错: (pymysql.err.IntegrityError) (1062, "Duplicate entry '1-测试' for key 'brisk_address.env'")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '测试', 'https://127.0.0.1', 'f0120e94-df58-40f9-8db6-ca204b852076', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-03-10 16:44:12.396 | ERROR    | app.crud:wrapper:75 - 操作AddressCRUD失败, args：[], kwargs：{'model': <app.models.address.Address object at 0x0000022A7895AAC0>}, True方法报错: (pymysql.err.IntegrityError) (1062, "Duplicate entry '1-测试' for key 'brisk_address.env'")
[SQL: INSERT INTO brisk_address (env, name, gateway, create_time, update_time, id, create_user, update_user, del_flag) VALUES (%s, %s, %s, now(), now(), %s, %s, %s, %s)]
[parameters: (1, '测试', 'https://127.0.0.1', 'c85b85c8-1a70-4904-b047-16108012e51f', '4e9b7ed6-205d-4a89-a48c-8f19d0d99bf1', None, 0)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-03-10 17:01:47.814 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 17:01:47.820 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 17:31:46.839 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 17:31:46.841 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 17:37:48.791 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 17:37:48.791 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 17:37:54.292 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 17:37:54.292 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 17:40:19.593 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 17:40:19.603 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 18:01:46.452 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 18:01:46.453 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 18:31:45.480 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 18:31:45.486 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 19:01:44.513 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 19:01:44.517 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 19:59:28.826 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 19:59:28.827 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 19:59:28.828 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 19:59:28.831 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 20:03:44.053 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 20:03:44.054 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 20:18:38.784 | ERROR    | app.crud:wrapper:72 - 操作AddressCRUD失败, args：[], kwargs：{'schema_to_select': <class 'app.schemas.address.AddressPayload'>, 'return_as_model': False, 'id': 'f6129a48-08c8-41df-a1a2-e5cfbecfadb4'}, False方法报错: 'method' object is not iterable
2024-03-10 20:33:43.072 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 20:33:43.075 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 21:03:42.088 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 21:03:42.090 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 21:33:41.096 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-10 21:33:41.097 | WARNING  | uvicorn.protocols.http.httptools_impl:data_received:180 - Invalid HTTP request received.
2024-03-18 19:18:30.672 | ERROR    | uvicorn.lifespan.on:send:134 - Traceback (most recent call last):
  File "D:\brisk\venv\lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "D:\brisk\venv\lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
  File "C:\Users\v_wieszheng\AppData\Local\Programs\Python\Python38\lib\asyncio\queues.py", line 163, in get
    await getter
asyncio.exceptions.CancelledError

2024-03-18 19:18:30.673 | ERROR    | uvicorn.lifespan.on:send:134 - Traceback (most recent call last):
  File "D:\brisk\venv\lib\site-packages\starlette\routing.py", line 743, in lifespan
    await receive()
  File "D:\brisk\venv\lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
  File "C:\Users\v_wieszheng\AppData\Local\Programs\Python\Python38\lib\asyncio\queues.py", line 163, in get
    await getter
asyncio.exceptions.CancelledError

